{"url_object_id": "f2c65dccf718330f513e67e843e7c14f", "title": "可交换开发者的神话", "url": "http://blog.jobbole.com/113210/", "create_date": "2017/12/07", "front_image_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fkm7cqqsr0j20m40er0tm.jpg"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/the-myth-of-the-interchangeable-developer-38d41aff563e\">Scott Shipp</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：作者反驳“好的程序员，让他去用另外一种语言去完成工作，他一样可以做得很好，好程序员可以在不同语言框架间无缝切换”。事实上每个程序员用多年来深入学习一种编程语言，已经习惯了那种语言的思维，怎么可能几个月就达到别人好几年的水平呢？作者做了八个月的移动开发项目依旧不敢称自己为移动开发工程师。<b></b></p>\n<hr>\n<p class=\"graf graf--p graf-after--h3\">我多次听经理或招聘人员说，优秀工程师是可以与其他优秀工程师交换的。他们可能会说，“首席工程师为这个项目选择了 F# 语言，如果外面没有太多的 F# 开发者，那么有几年经验的优秀开发者应该也还不错。”</p>\n<p id=\"9c5c\" class=\"graf graf--p graf-after--figure\">我还听说过一些这样的言论，“我知道他们是前端人员，但我们现在需要他们做些后端工作。因为他们本身很优秀，所以这没什么大不了的。”</p>\n<p class=\"graf graf--p graf-after--p\">如果你相信这些蠢话，那我都可以把布鲁克林大桥卖给你了。我还创立了下一个独角兽公司，业务就是把冰卖给爱斯基摩人！我敢肯定，公司很快会有 10 亿美元的估值！机会难得，快来投资吧~</p>\n<p class=\"graf graf--p graf-after--p\"><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fkm7cqqsr0j20m40er0tm.jpg\" width=\"690\" height=\"460\"></p>\n<p class=\"graf graf--p graf-after--p\">好吧，不开玩笑了，说实在的，“优秀的”软件工程师可以交换，这样的想法并不靠谱。我有时会对软件工作感到疑惑，是不是我在简历上写，“我保持良好的记录，不断在新技术上开拓驰骋”，然后我就能去任何想去的公司了？</p>\n<p class=\"graf graf--p graf-after--p\">我不敢相信今天要坐下来和你解释这一点，但是，现在让我们从语言差异开始说起。实际上，我已经将多种语言的代码投入生产，从 Scala 到 C#，从 Java 到 JavaScript。即使我能在几周内学会任何类 C 语言的的语法，（给别人可能需要更多时间，）我仍然清楚地知道，我不会用一种新的语言去开发一个生产代码库。</p>\n<p class=\"graf graf--p graf-after--p\">那么行业或商业背景呢？我已经涉猎在很多领域，包括健康卫生、电子商务、教育和电信。我是否应该认为我有资格在社交媒体工作哪？那么制造业、航空航天、数字加密货币（Cryptocurrency）哪？我的领域究竟能拓展到哪一块？在我被要求从 Web 过渡到移动、桌面或物联网时，也发生了同样的情况。</p>\n<p class=\"graf graf--p graf-after--p\">现在，让我给你讲个小故事。去年，在做后端 Java web 服务工程师的全职工作时，我还参与了另一个团队的工作，他们要在 Ionic Framework 中做一个移动应用程序，并使用 Angular、TypeScript 和一些定制库打组合拳。直到长达八个月的项目临近结束时，我才得以“适应”这种融合了 Ionic/Angular/TypeScript 的工作方式。实际上，“适应”这个词可能有点夸大其词。但仍然困扰我的是，我要在控制器中公开字段，因为需要在视图中显示它们，或者常量应该与其他变量一样命名。</p>\n<p class=\"graf graf--p graf-after--p\">顺便一说，如果你想在 JavaScript 中使用静态类型（static typing），你很快就会发现，这条路走不通。必须准备好“任何”类型！不过，我喜欢使用的 RxJs 订阅。</p>\n<p class=\"graf graf--p graf-after--p\">在项目结束后，我愉快地撤了。我现在再也不会自称为 TypeScript 或移动开发者了。这不是要在口头上表达优越性，而是一个简单的经验问题：八个月的时间不足以证明我在此方面的资质。我敢打赌，任何全职编程的人都会同意我的看法。</p>\n<p class=\"graf graf--p graf-after--p\">一个花了几年时间研究某种语言的开发者，将能够毫不费力地用它思考。她会在脑海中随时准备好所有需要的资源来完成任务，然后继续投入下一个任务。她了解语言环境，可以轻松地将标准库和第三方库结合成一个具有内聚性的新功能，就像一把钥匙对应一把锁一样，以此来轻松地解决问题。然而，当她不知道什么是可用的时候，她会重新造轮子，或者更糟的情况是，她会完全不知所措。</p>\n<p class=\"graf graf--p graf-after--p\">每一种语言都有着其独特的习惯用语、构建和依赖管理工具、框架、库、在线社区、IDE 等一系列东西，这些东西在日常实践中，对开发者生产力的影响比我们想象的要大得多。</p>\n<p class=\"graf graf--p graf-after--p\">但是，所有的语言都一样吗？我是说，C# 和 C++ 的开发者，到底有什么区别？“只是 # 和 ++ 的区别，哈哈，没什么大不了的！”快，把说这话的人扔去喂狮子！</p>\n<p class=\"graf graf--p graf-after--p\">我不是说任何人都不应该更换自己的语言、行业或设备。我只是说，程序员是不一样的。一个以 F# 为主要语言编写应用程序的软件团队，不会从我的 Java 经验中获益，尽管我也花了大量时间写 Scala。我只是说，我们不能找到那些“优秀的开发者”，然后出于奇思妙想，随机地把他们拖到不同的团队，并期望他们能够发挥出应有的效果。我是说，不要把所有“优秀的”开发者当作是可以交换的。</p>\n<p>可交换开发者的神话是不现实的。人与人之间的不同无法消除，并愿每个人都能找到最适合自己的那个角色！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113210\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113210votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113210\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            I'm OUT, never IN.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 44</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员", "front_image_path": "full/675acba0c3fe762a3da3697c582bdec7fa10530b.jpg"}
{"url_object_id": "5e5aab5f6e5a7864fa89f576ddfd8a08", "title": "我们逃离北上广，美国人逃离硅谷", "url": "http://blog.jobbole.com/112376/", "create_date": "2017/12/05", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3gy1fm661vp40wj20jg0d1412.jpg"], "praise_nums": "1", "fav_nums": 1, "comment_nums": 4, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.com/@preethikasireddy/why-im-leaving-silicon-valley-72919edb3297\">Preethi Kasireddy</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5105906.html\">36kr - 郝鹏程</a>   </div><p>【导读】：硅谷长期以来一直被看作是科技与创新的理想场所，硅谷也汇聚了各个领域的高、精、尖人才和企业家。但随着共享知识时代的发展，世界各地科技领域都有了不同程度的发展，硅谷的唯一地位也有所改变。本文作者 <a href=\"https://medium.com/@preethikasireddy?source=post_header_lockup\">Preethi Kasireddy</a> 现在是一名区块链工程师，她在本文中回首了自己毕业后到硅谷工作，以及三年后离开硅谷的经历，或许对想要换个地方工作的你有一定的启发。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fm661vp40wj20jg0d1412.jpg\" width=\"690\" height=\"462\"></p>\n<hr>\n<p>我永远想不到我会说这句话：这是我留在硅谷的最后一周。这篇文章是分享我个人经历的内容，这次我不想再讨论关于区块链或者 Javascript 方面的内容，而是想回首一下我过去几年一路走来的心路历程。这是一段让我渴望改变的旅程，开车去到洛杉矶寻找一个新的住处就是一个很大的改变。</p>\n<p><strong>我与硅谷结缘</strong></p>\n<p>五年前，也就是 2012 年的夏天，我搬到了硅谷。那时的我刚刚大学毕业，因为接到了一份新的工作 offer 偶然间来到了这里。我当时怀着急切而又紧张的心情想要在这里开始我的职业生涯，坦白来说，当时的我根本不知道该期待些什么。</p>\n<p>事实证明，我非常幸运，硅谷是世界上最好的地方之一，这里有众多优秀的企业家、工程师以及各色各样敢于尝试，希望通过技术改变这个世界的人。这与我的家乡新泽西的生活场景形成了鲜明的对比，那里大部分人接受得都是社区大学的教育，毕业后找一份朝九晚五的工作，25 岁左右就已经过上了安逸舒适的生活。在这样的环境中，无论是对于理想、冒险还是职业生涯的发展，可以选择的空间都非常小。</p>\n<p>所以，可以想象，来自新泽西的我到了旧金山工作之后就受到了一种文化的冲击。突然之间，我发现自己被技术和创新的氛围所包围，我发现自己已经身处于一个崇尚挑战自我的社区环境之中。在旧金山工作和生活的三年对我的生活有着很大的影响，因为我开始明白，那些愿意为那些看似疯狂的想法全身心投入，愿意去挑战风险的人，他们的做法其实并不疯狂。</p>\n<p><strong>第一个挑战：高盛</strong></p>\n<p>大学毕业之后我的第一份工作是在高盛的分析师岗位。在这一岗位上，通过与首席执行官和首席财务官们合作准备上市和收购事宜，我了解了科技初创企业的财务基本状况。这对于我后来直接与这些科技公司合作方面来说大有裨益，并且也埋下了我对于用软件解决问题方面的一颗兴趣的种子。</p>\n<p>在高盛工作一年后，我意识到银行业的工作并不是我长期想做的，我想像大学时期一样做一名工程师。于是我辞掉了这份光鲜亮丽的工作，离开了高盛。接下来我去了哪里呢？</p>\n<p><strong>第二个挑战：a16z</strong></p>\n<p>当时，我最大的可能性是进入一家小型工业型初创企业做一名系统工程师，但是，在一封偶然的冷邮件之后，一连串意外事件接踵而至。我收到了 a16z 交易团队岗位的 offer，这绝对是不可拒绝的一个机会，谢天谢地，我也确实没有想不开而去拒绝。</p>\n<p>我在 a16z 度过了接下来两年的时间，在那里，我向各种的互联网先驱人物学习，像 Marc Andreessen、Ben Horowitz 和 Chris Dixon 等。我看到成千上万的公司向我们走来，我了解他们的想法、他们的团队、他们面临的挑战以及他们的实力。我学到了创立一家成功的科技初创企业所具有的所有细节信息，同时我也学到了会导致企业失败的一些常见的错误。最重要的是，我遇到了许多不可思议的企业家，这些企业家激励着我未来有一天也能够像他们一样。</p>\n<p><strong>第三个挑战：回到工程领域</strong></p>\n<p>我离开 a16z 之后，就转向了软件工程领域，我还年轻，我想为这个世界创建出一些东西。你可以说我是在眼红那些企业家们，我也渴望能够创建出自己的产品，然后最终创立一家自己的企业。这一过渡让人感觉十分惊讶。我在学习，并且在以一种突破性的速度成长。我对自己的工作充满了激情，我也为我的工作感到兴奋。坦率来讲，作为一名工程师我感觉到有如此多的乐趣，甚至都不感觉自己是在工作。</p>\n<p>除了对于这份工作的热爱之外，我也感觉到我可以去做一些我之前想都不曾想的事情，因为工程师的工作让我有了自由：只要我想，随时随地，我都可以对心所欲的创建任何东西的自由；去了解任何事物基本运作原理的自由；教授和授权新开发者的自由；而最重要的是，成为一名创造者，从无到有创造出一些东西的自由。</p>\n<p><strong>感觉开始发生变化</strong></p>\n<p>在我离开 a16z 回到工程师岗位工作之后，我对硅谷的生活感受开始发生变化。得益于开发人员自由的生活方式，我开始更多的出行，结交了世界各地的工程师，包括巴黎、伦敦、印度、维也纳、澳大利亚、柏林、特拉维夫、南非、阿根廷、韩国等等。我也逐渐了解到原来在这个世界上，硅谷并不是工程、技术和创新聚集的唯一地方。我之前认为的只有在硅谷才能找到的东西，也开始出现在我去到的每一个城市之中。科技和创新的种子在纽约、洛杉矶、多伦多、柏林、特拉维夫、印度、瑞士甚至南非的一些地区开始生根发芽。</p>\n<p>这其实并不是什么意外，因为毕竟互联网的核心功能之一就是让知识传遍每一个角落。我自己也是从互联网上获得了大量的编程相关知识，其中有许多在过去是仅限于斯坦福大学、伯克利大学或麻省理工等顶级高校学生才能享用到的资源，而我也只是成千上万名网络资源渠道学习群体中的一员。</p>\n<p>如今，技术人员如果想寻找资金支持和社区环境，硅谷已经不再是唯一的选择。</p>\n<p><strong>硅谷的“群体思维”问题</strong></p>\n<p>尽管硅谷数十年来一直是科技和创新的中心，但我最近却发现硅谷文化存在一定程度的同质现象，并且注意到这一现象的也绝不只是我一人。同质化的原因在于每个人似乎都有着类似的故事，无论他们是软件工程师、产品经理、风险投资家还是企业家。他们的职业道路和目标可能与我的家乡—新泽西州风格不同，但在硅谷地区，你却能一遍又一遍听到类似甚至同样的故事。</p>\n<p>我去过的每一家咖啡店或者是每一家餐厅，都能听到有人在谈论他们那 2000 万美元的融资轮、2 亿美元的退出或者是 200% 的年同比增长率。这种类似的思维和兴趣，原来曾经是一件我认为很美好的事物，现在对我来说却不再美好。我开始注意到他们有很多类似的看法和想法，他们称之为“群体思维”。</p>\n<p>硅谷有它的矛盾性，它是一个建立在不可预测的诸多想法之上的一个可预测思维模式的地方。</p>\n<p>我在硅谷学到的第一课：要知道自己的梦想可以实现，并且走出你自己的道路</p>\n<p>我并不是说硅谷没有让我学到任何重要的东西，事实上，这是一个学习冒险的理想场所，也是一个让你了解到创造自己道路所拥有的价值，并且证明自己可以做到这一点的地方。</p>\n<p>在硅谷工作生活期间，我刻意让自己努力对自己的梦想说“可以”。我想要自由地去创造我想要的任何东西，我做到了。我想尽快地学习和成长，我也做到了。我想结识来自世界各地的人，向他们学习，我同样做到了。我想找到自己独特的目标，而不是盲从“成功”的道路，我再次做到了。最重要的是，我想打造一条属于自己的独一无二的道路，我也正在这样做。</p>\n<p>现在回头去看，在我离开 a16z 去追寻自己的道路时，我为自己制定了一个路线图，其中包含三部分：</p>\n<p>1、找到我最喜欢开发的东西。</p>\n<p>2、做到真正的擅长。</p>\n<p>3、用我的这些专业技能对世界产生积极的影响。</p>\n<p>在过去两年的时间里，我学习了编程领域不同方面的知识，例如网络开发、移动开发和分布式系统等，也学习了包括机器学习和区块链等不同应用领域的知识。我故意让自己广泛涉猎，尽可能的接触更多的分支，也学会了为那些我最感兴趣的产品编写代码。最终，我锁定了区块链。</p>\n<p>我对区块链的青睐始于我在 a16z 时首次对 Coinbase 进行投资之时，之后我一直关注区块链技术的发展，最后也进入了 Coinbase 担任软件工程师，这也让我进一步深入到这一领域之中。离开 Coinbase 之后，我继续了解和学习了区块链的方方面面，现在我也进入了第二个阶段，让自己做到真正的擅长。下一步就是利用我的技能去“创建一个能够积极改变世界的公司或者是产品”。</p>\n<p>追求自我的道路并不需要我留在硅谷。工程师的自由让我可以去学习并且成长为一名企业家、作家和演讲者，为我打开了一个全新的世界。这也让我意识到，我可以在世界上任何一个地方去扮演这些角色。</p>\n<p><strong>我在硅谷学到的第二课：不是只有在硅谷才能改变世界</strong></p>\n<p>世界现在越来越全球化，硅谷只是其中的一种生活方式，其中的一种思维方式，一种观察世界的方式。除此之外，还有很多其他的方式，因为毕竟技术是全球性的，工程、创新和创业精神都是全球性的。事实证明亦是如此。我们看到中国和印度等国家的科技已经实现跨越式发展，他们也走出了自己的道路，像中国的微信、印度的 Paytm 和肯尼亚的 mPesa。</p>\n<p>并且，现在得益于互联网的发展，全球各地之间的联系也更加容易，更加快捷。具体自己身处何地已经不再是一个限制条件，我们可以在南非编码，然后将产品运往硅谷。除此之外，区块链革命的全球性让我对此感到真正的触动。过去一年时间里，我在区块链技术方面进行了很多的研究和开发，我发现硅谷之外的许多城市，像纽约、柏林、多伦多、中国、韩国和曼谷在推动区块链技术方面都走在前沿位置。硅谷以外的许多地方正在开展一些知名度很高的项目，试图将区块链技术带给大众。这一次，我发现硅谷并不是他们的中心。</p>\n<p>然后我产生了一个疯狂的想法，我能离开硅谷，并且仍然可以去实现我的梦想吗？离开硅谷我还可以创立一家规模庞大、足以改变世界的企业吗？离开硅谷我还能对这一世界产生很大的影响吗？这些问题的答案越来越明显，“可以”！</p>\n<p>诚然，也有很多原因可以让我留在硅谷。毕竟，硅谷是一个庞大的企业家网络，到处都是实现梦想的人。硅谷知道如何孕育出色的初创企业，并且在过去的五年里，我自己在硅谷也搭建起了优秀的人脉网络。留在这里，我会比较轻松，很容易就过上比较成功的生活，至少从财务上来看是这样。</p>\n<p>但坦率来说，我不想留在这里。这样感觉有些太简单了，我年轻，充满激情，富有动力，我不能让惯性、熟悉感或者是金钱成为我不去追求更大、更艰巨目标的借口。我要挑战自己，为我的目标而奋斗，哪怕日夜兼程也在所不惜。金钱给不了我这些，赚钱也从来不是我的主要动力。我在拿到第一年的奖金之前就离开了高盛，因为我当时急切想去 a16z，所以无法忍受再过两个月自己讨厌的生活。之后，我又放弃了在 a16z 的职业发展道路，成为了一名开发人员。挑战以及有意义是我每天奋斗的动力所在。我渴望去硅谷以外，去做更多的事情，去了解更多，体验更多。</p>\n<p><strong>去往下一个城市</strong></p>\n<p>也许我对硅谷和旧金山有这样的感觉只是因为我在这里待得太久，也许是我需要改变，也许是成为一名工程师、作家和企业家的愿望在向我呼唤，告诉我在任何地方都可以做到这一点。我收拾行李，踏上了去往洛杉矶的下一趟冒险之旅。</p>\n<p>你问我是否感到害怕吗？废话，不止害怕，而且是很害怕。除了几个几年来都没有联系的大学同学之外，我在洛杉矶没有一个认识的人。这听上去很可怕，但同时我也感到欣喜，来到一个完全陌生的城市，我可以像五年前我去到硅谷一样，从头开始建立起一个全新的人脉网络。</p>\n<p>那我为什么会选择洛杉矶呢？原因如下：</p>\n<p>1、地理位置接近：洛杉矶与旧金山位置比较近， 3 个小时我就可以从洛杉矶到旧金山的任何地方。地理位置是我在选择下一个城市时重点考虑的一个因素，因为对我来说，保持与硅谷的联系非常重要，距离近意味着我可以随时、经常性的去到硅谷。</p>\n<p>2、科技发展：洛杉矶的科技领域刚刚开始呈现出蓬勃发展之势。随着 Snapchat、Google、Facebook、微软和亚马逊等许多巨型科技公司在那里建立了大型的园区，你可以想象洛杉矶绝对不乏优秀的科技人才。科技蓬勃发展之势刚刚显现，我预计这将在洛杉矶的每一个行业都产生连锁反应。这也就意味着，在科技发展热潮期，作为工程师或者是企业家有机会去发挥出自己的影响力。</p>\n<p>3、天气：不夸张的说，洛杉矶的天气绝对是完美。每天早晨醒来，都会发现眼光明媚，气温也完美到不行。我会有更多的时间待在户外，心情也奇迹般变得更好。</p>\n<p>4、多样性：我喜欢洛杉矶到处都是充满创意和艺术氛围的人文环境，接触到多元化的人让我感觉耳目一新。我从科技领域以外的那些人（从事时尚、媒体、娱乐、艺术和房地产等）身上学到了很多东西。</p>\n<p>5、忙碌：这里的忙碌非常真实，在过去几个月的时间里，我迅速体验到了这一点。我还记得在洛杉矶，我早晨第一次去健身房的场景，当时是五点半，健身房却已经是半满员状态。当时，我看了自己的手表好几次，一度怀疑是我眼睛出了问题或者是手表出了问题。过了几天之后，我习惯了他们的这一状态，我发现他们都是同我一样，富有动力、充满热情、为目标全力以赴的人。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112376\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112376votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112376\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,硅谷,程序员,职场", "front_image_path": "full/130a06ece44711ed14474d9df3946810a9faabe8.jpg"}
{"url_object_id": "5e4d58414069c0e60dc714bf042ec15d", "title": "如果你还不了解机器学习的简史，请看这篇文章", "url": "http://blog.jobbole.com/113180/", "create_date": "2017/12/05", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/914a7f9323808e5b11330f275e0ac4c8.jpg"], "praise_nums": "2", "fav_nums": 1, "comment_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/nemoland\">李大萌</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.erogol.com/brief-history-machine-learning/\">Eren Golge</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：全面介绍机器学习的发展史，从感知机、神经网络、决策树、SVM、Adaboost到随机森林、Deep Learning。<b></b></p>\n<p><img class=\"alignnone\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/test.jpg\" width=\"1793\" height=\"1104\"></p>\n<p>自科学技术和人工智能最初发展开始，科学家Blaise Pascal和Von Leibniz就思考着如何制造一台像人类一样具有智力的机器。 著名作家朱尔斯·凡尔纳，弗兰克·鲍姆（绿野仙踪），玛丽·雪莱（科学怪人），乔治·卢卡斯（George Lucas）（星球大战）梦想着具有人类行为的物种存在，甚至拥有在不同的环境中能战胜人类的技能。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/Arts_et_Metiers_Pascaline_dsc03869.jpg\" width=\"392\" height=\"215\"></p>\n<p style=\"text-align: center;\">帕斯卡机器执行减法和求和- 1642</p>\n<p>机器学习是人工智能最重要发展分支之一，在科研领域和工业界都是非常热门的课题。企业和学校投入大量的资源来做提升知识面。最近，该领域在许多不同任务上取得了非常可观的结果，与人类的表现（交通标志的识别，机器学习达到了98.98％ – 已经超过了人类）相当。</p>\n<p>在这里，我想分享一下机器学习发展一个粗略的时间表，并且标记了一些里程碑，但并不完整。此外，在阅读本文所有的论断时，都请在前自行脑补一句：“据我所知”。</p>\n<p>普遍推广机器学习的第一人是Hebb，他在1949年提出了基于神经心理学习方法，被称为Hebbian学习理论。通过简单的解释，研究递归神经网络（RNN）节点之间的相关性。它记录网络上的共性，像记忆一样工作。这个论点正式地表达是这样：</p>\n<blockquote><p>我们假设反射活动（或“踪迹”）的持续性或重复性会诱导细胞的持续性变化，增加其稳定性…当细胞A的轴突足够接近细胞B时，就能反复或持续刺激细胞B。此时，会在其中一个细胞或者两者中发生一些生长过程或代谢变化，来增加A的效率[1]。</p></blockquote>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2015/11/us__en_us__ibm100__700_series__checkers__620x350.jpg\" width=\"620\" height=\"350\"></p>\n<p style=\"text-align: center;\">Arthur Samuel</p>\n<p>在1952年，IBM的亚瑟·塞缪尔（Arthur Samuel）开发了一个西洋棋的程序。 该程序能够通过棋子的位置学习一个隐式模型，为下一步棋提供比较好的走法。 塞缪尔与这个程序对局了很多次，并观察到这个程序在经过一段时间的学习后可以发挥得更好。</p>\n<p>塞缪尔用这个程序驳倒了机器无法超越书面代码，并像人类一样学习模式的论断。 他创造并定义了“机器学习”：</p>\n<blockquote><p>机器学习是一个能使计算机不用显示编程就能获得能力的研究领域。</p></blockquote>\n<p><img class=\"alignnone aligncenter\" src=\"http://csis.pace.edu/~ctappert/srd2011/photos/Rosenblatt-ratlab.jpg\" width=\"453\" height=\"681\"></p>\n<p style=\"text-align: center;\">F. Rosenblatt</p>\n<p>1957年，Rosenblatt再次提出以神经科学为背景的第二个机器学习模型——感知器，它与今天的机器学习模型更像。当时，这是非常激动人心的发现，实际上它比Hebbian的想法更容易实现。 Rosenblatt用下面几句话介绍了感知器模型：</p>\n<blockquote><p>感知器模型的设计是针对于一般智能系统的一些基本特性，而不会纠缠于一些特定生物体通常情况下未知的特性。[2]</p></blockquote>\n<p>3 年后，Widrow [4]发明的Delta学习规则载入机器学习史册，该规则很快被用作感知器训练的实践程序。它也被称为最小二乘问题。这两个想法的结合创造了一个很好的线性分类器。 然而，感知器模型的热度在1969年被Minsky [3]所取代。他提出了著名的XOR问题，感知器无法对线性不可分割的数据进行分类。 这是Minsky对神经网络社区的反驳。 此后，神经网络的研究一直止步不前，到在80年代才有所突破。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.cs.ru.nl/~ths/rt2/col/h10/draw-LTUdecis.GIF\" width=\"477\" height=\"168\"></p>\n<p style=\"text-align: center;\">面向不可线性分割数据的 XOR 问题</p>\n<p>尽管早在1973年由Linnainmaa [5] 以“反向自动差异化模式”为名提出了BP思想，但是直到1981年，Werbos [6]才提出将神经网络特定反向传播（BP）算法应用到多层感知器（MLP）。BP仍然是当今神经网络架构的关键组成部分。有了这些新想法，神经网络的研究再次加速。1985年至1986年间，神经网络研究人员相继提出了采用BP训练多层感知器（MLP）的理念（Rumelhart，Hinton，Williams [7] – Hetch，Nielsen [8]）</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/Hetch_Nielsen_NN.png\" width=\"891\" height=\"754\"></p>\n<p style=\"text-align: center;\">From Hetch and Nielsen [8]</p>\n<p>另一个学派，在1986年，J.R.Quinlan [9]提出了另一个非常著名的ML算法，我们称之为决策树，更具体地说是ID3算法。这是机器学习另一个主流的闪光点。此外，ID3以软件的形式发布，能够以简单的规则及其明确的推论更好地应用到实际生活中，与黑匣子神经网络模型相反。</p>\n<p>在ID3之后，社区探索了很多不同的可用方案和算法改进（例如ID4，回归树，CART …），而且仍然是机器学习中的活跃话题之一。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/Quinlan_ID3.png\" width=\"631\" height=\"445\"></p>\n<p style=\"text-align: center;\">图：一个简单的决策树</p>\n<p>机器学习领域最重要突破之一是Vapnik和Cortes [10]在1995年提出的支持向量机（网络）（SVM），它具有非常强的理论论证和实证结果。SVM将机器学习社区分为NN（神经网络）和SVM两个派别。 然而在2000年左右，SVM内核化版本提出之后，NN在这两个派别之间的竞争并不容易（我无法找到关于该主题的第一篇文章）。SVM在很多之前用NN模型解决的问题上得出了最佳结果。 此外，与NN模型相比，SVM能够充分利用凸优化，泛化边际理论和内核化的所有深奥知识。 因此，它可以从不同学科中获得巨大的推动力，促进理论和实践的快速发展。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/SVM_Vapnik.png\" width=\"1036\" height=\"583\"></p>\n<p style=\"text-align: center;\">From Vapnik and Cortes [10]</p>\n<p>NN模型受到的另一次重创是1 9 9 1年Hochreiter的论文[40]和2001年Hochreiter等人的论文[11]，表明在使用BP算法时，NN单位饱和后会发生梯度损失。简单来说，训练NN模型时由于单位饱和，在迭代超过一定数量后冗余，因此NN非常倾向于在短时间的时期过度拟合。</p>\n<p>不久之前，Freund和Schapire在1997年提出了另一个实体机器学习模型，该模型采用增强的弱分类器组合，称为Adaboost。当时给这项工作的作者颁发了戈德尔奖。 Adaboost通过易于训练的弱分类器进行训练，给那些难的样本更高的权重。这种模型是许多不同任务的基础，如面部识别和检测。它也是PAC（Probably Approximately Correct）理论的一种实现。通常，所谓的弱分类器被Adaboost选为简单的判决树（单个决策树节点）。他们这样介绍Adaboost;</p>\n<blockquote><p>我们研究的模型可以解释为一个广泛的，抽象的扩展的研究在线预测模型到一般决策理论的设置[11]</p></blockquote>\n<p>2001年，Breiman [2001]探索了另一个综合模型，该模型集合了多个决策树，其中每个决策树的训练集都是从实例集合中随机选择的，每个节点的特征都是从特征集合随机选择的。基于这些特性，该模型被称为随机森林（RF）。RF从理论上和实际上都证明不会产生过拟合。甚至AdaBoost在数据集中有过拟合和离群点时，随机森林能有更好的鲁棒性（有关RF的更多详细信息，请参阅我的旧帖子http://www.erogol.com/randomness-randomforests/）。随机森林在许多不同的领域，如Kaggle比赛中也有很出色的表现。</p>\n<p>随机森林是树预测因子的组合，每棵树取决于独立采样的随机向量，并且森林中的所有树都具有相同的分布。森林的泛化误差a随着森林中树木数量增多而收敛[12]</p>\n<p>随着时间向今天靠近，神经网络（NN）的一个新时代——深度学习已经被商业化了。这个短语只是指具有许多广泛连续层的NN模型。三层的NN模型崛起大致在2005年，由近期和现在的Hinton，LeCun，Bengio，Andrew Ng和诸多大师结合了许多不同的发现。下面我列举了一些机器学习领域重要的概念（我猜，我将专门为深度学习写一篇文章）;</p>\n<ul>\n<li>GPU编程</li>\n<li>卷积NN [18] [20] [40]</li>\n<li>解卷积网络[21]</li>\n<li>算法优化</li>\n<li>随机梯度下降[19] [22]</li>\n<li>BFGS和L-BFGS [23]</li>\n<li>共轭梯度下降[24]</li>\n<li>反向传播[40] [19]</li>\n<li>整流器单元</li>\n<li>稀疏性[15] [16]</li>\n<li>Dropout网 [26]</li>\n<li>Maxout网[25]</li>\n<li>无监督的NN模型[14]</li>\n<li>深度信念网[13]</li>\n<li>堆叠式自动编码器[16] [39]</li>\n<li>去噪NN模型[17]</li>\n</ul>\n<p>结合所有这些想法和未列出的想法，NN 模型能够在对象识别、语音识别、NLP等不同的任务中击败之前的技术。但是应该注意的是，这并不意味着其他ML流派的结束。虽然深度学习的成功故事还在接二连三的上演，但是它在训练成本和调整模型的外部参数方面还有很多争议。此外，由于其简单性，SVM的使用依然非常普遍。 （据说可能会引起很大争议）</p>\n<p>在结束之前，我需要再介绍一个比较前沿的 ML 趋势。随着WWW和社交媒体的发展，一个新的术语——大数据出现了，并大大影响了ML研究。由于大数据的数据规模都很大，许多强大的ML算法在相当多的系统中（当然对大型技术公司来说不是这样）是无用的。因此，研究人员提出了一套新的简单模型——dubbed Bandit Algorithms，被称为强盗算法[27 – 38]（通常都基于在线学习），使学习更容易，适应大规模问题。</p>\n<p>我只是总结了机器学习的发展史。如果你发现错误，不足或没有添加引用的地方，请不要犹豫，可以通过各种方式告诉我。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113180\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113180votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113180\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">李大萌</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            码农一枚        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/nemoland\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/nemoland/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 23</a> · <a title=\"QQ：727231337\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：qq_nemo\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,机器学习", "front_image_path": "full/0104e7c14a36650ad69f34f21bb577491ca53eda.jpg"}
{"url_object_id": "ecb07428446047245a1f32f8ff966176", "title": "如何在 Linux 系统中通过用户组来管理用户", "url": "http://blog.jobbole.com/113200/", "create_date": "2017/12/06", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/04/e260ae4f5d153b25be87819b25ff0577.jpg"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/12/how-manage-users-groups-linux\">Jack Wallen</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9114-1.html\">Linux中国/imquanquan</a>   </div><blockquote><p>本教程可以了解如何通过用户组和访问控制表（ACL）来管理用户。</p></blockquote>\n<p>当你需要管理一台容纳多个用户的 Linux 机器时，比起一些基本的用户管理工具所提供的方法，有时候你需要对这些用户采取更多的用户权限管理方式。特别是当你要管理某些用户的权限时，这个想法尤为重要。比如说，你有一个目录，某个用户组中的用户可以通过读和写的权限访问这个目录，而其他用户组中的用户对这个目录只有读的权限。在 Linux 中，这是完全可以实现的。但前提是你必须先了解如何通过用户组和访问控制表（ACL）来管理用户。</p>\n<p>我们将从简单的用户开始，逐渐深入到复杂的访问控制表（ACL）。你可以在你所选择的 Linux 发行版完成你所需要做的一切。本文的重点是用户组，所以不会涉及到关于用户的基础知识。</p>\n<p>为了达到演示的目的，我将假设：</p>\n<p>你需要用下面两个用户名新建两个用户：</p>\n<ul>\n<li>olivia</li>\n<li>nathan</li>\n</ul>\n<p>你需要新建以下两个用户组：</p>\n<ul>\n<li>readers</li>\n<li>editors</li>\n</ul>\n<p>olivia 属于 editors 用户组，而 nathan 属于 readers 用户组。reader 用户组对 <code>/DATA</code> 目录只有读的权限，而 editors 用户组则对 <code>/DATA</code> 目录同时有读和写的权限。当然，这是个非常小的任务，但它会给你基本的信息，你可以扩展这个任务以适应你其他更大的需求。</p>\n<p>我将在 Ubuntu 16.04 Server 平台上进行演示。这些命令都是通用的，唯一不同的是，要是在你的发行版中不使用 <code>sudo</code> 命令，你必须切换到 root 用户来执行这些命令。</p>\n<h3 id=\"toc_1\">创建用户</h3>\n<p>我们需要做的第一件事是为我们的实验创建两个用户。可以用 <code>useradd</code> 命令来创建用户，我们不只是简单地创建一个用户，而需要同时创建用户和属于他们的家目录，然后给他们设置密码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7a6325976157\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo useradd -m olivia\r\nsudo useradd -m nathan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7a6325976157-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7a6325976157-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7a6325976157-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7a6325976157-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">useradd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">olivia</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7a6325976157-2\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">useradd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nathan</span></div><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7a6325976157-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>我们现在创建了两个用户，如果你看看 <code>/home</code> 目录，你可以发现他们的家目录（因为我们用了 <code>-m</code> 选项，可以在创建用户的同时创建他们的家目录。</p>\n<p>之后，我们可以用以下命令给他们设置密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7ba302776588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo passwd olivia\r\nsudo passwd nathan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7ba302776588-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7ba302776588-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7ba302776588-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7ba302776588-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">passwd </span><span class=\"crayon-e\">olivia</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7ba302776588-2\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">passwd </span><span class=\"crayon-i\">nathan</span></div><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7ba302776588-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>就这样，我们创建了两个用户。</p>\n<h3 id=\"toc_2\">创建用户组并添加用户</h3>\n<p>现在我们将创建 readers 和 editors 用户组，然后给它们添加用户。创建用户组的命令是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7be505393393\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\naddgroup readers\r\naddgroup editors\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7be505393393-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7be505393393-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7be505393393-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7be505393393-1\"><span class=\"crayon-e\">addgroup </span><span class=\"crayon-e\">readers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7be505393393-2\"><span class=\"crayon-e\">addgroup </span><span class=\"crayon-i\">editors</span></div><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7be505393393-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>（LCTT 译注：当你使用 CentOS 等一些 Linux 发行版时，可能系统没有 <code>addgroup</code> 这个命令，推荐使用 <code>groupadd</code> 命令来替换 <code>addgroup</code> 命令以达到同样的效果）</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/a4aeb9d98d79d707090f46b85e6db25b.jpg\" alt=\"groups\"></p>\n<p><em>图一：我们可以使用刚创建的新用户组了。</em></p>\n<p>创建用户组后，我们需要添加我们的用户到这两个用户组。我们用以下命令来将 nathan 用户添加到 readers 用户组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7c2633165772\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo usermod -a -G readers nathan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7c2633165772-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7c2633165772-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7c2633165772-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">usermod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">readers </span><span class=\"crayon-i\">nathan</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7c2633165772-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>用以下命令将 olivia 添加到 editors 用户组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7c5851810906\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo usermod -a -G editors olivia\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7c5851810906-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7c5851810906-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7c5851810906-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">usermod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">editors </span><span class=\"crayon-i\">olivia</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7c5851810906-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>现在我们可以通过用户组来管理用户了。</p>\n<h3 id=\"toc_3\">给用户组授予目录的权限</h3>\n<p>假设你有个目录 <code>/READERS</code> 且允许 readers 用户组的所有成员访问这个目录。首先，我们执行以下命令来更改目录所属用户组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7c9398733698\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chown -R :readers /READERS \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7c9398733698-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7c9398733698-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7c9398733698-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">readers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">READERS</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7c9398733698-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>接下来，执行以下命令收回目录所属用户组的写入权限：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7cc802315206\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chmod -R g-w /READERS\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7cc802315206-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7cc802315206-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7cc802315206-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">READERS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7cc802315206-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>然后我们执行下面的命令来收回其他用户对这个目录的访问权限（以防止任何不在 readers 组中的用户访问这个目录里的文件）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7cf085014126\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chmod -R o-x /READERS\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7cf085014126-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7cf085014126-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7cf085014126-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">READERS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7cf085014126-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这时候，只有目录的所有者（root）和用户组 reader 中的用户可以访问 <code>/READES</code> 中的文件。</p>\n<p>假设你有个目录 <code>/EDITORS</code> ，你需要给用户组 editors 里的成员这个目录的读和写的权限。为了达到这个目的，执行下面的这些命令是必要的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7d3961898877\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chown -R :editors /EDITORS\r\nsudo chmod -R g+w /EDITORS\r\nsudo chmod -R o-x /EDITORS\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7d3961898877-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7d3961898877-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7d3961898877-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7d3961898877-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7d3961898877-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">editors</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">EDITORS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7d3961898877-2\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">EDITORS</span></div><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7d3961898877-3\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">EDITORS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7d3961898877-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>此时 editors 用户组的所有成员都可以访问和修改其中的文件。除此之外其他用户（除了 root 之外）无法访问 <code>/EDITORS</code> 中的任何文件。</p>\n<p>使用这个方法的问题在于，你一次只能操作一个组和一个目录而已。这时候访问控制表（ACL）就可以派得上用场了。</p>\n<h3 id=\"toc_4\">使用访问控制表（ACL）</h3>\n<p>现在，让我们把这个问题变得棘手一点。假设你有一个目录 <code>/DATA</code> 并且你想给 readers 用户组的成员读取权限，并同时给 editors 用户组的成员读和写的权限。为此，你必须要用到 <code>setfacl</code> 命令。<code>setfacl</code> 命令可以为文件或文件夹设置一个访问控制表（ACL）。</p>\n<p>这个命令的结构如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7d6367650885\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsetfacl OPTION X:NAME:Y /DIRECTORY\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7d6367650885-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7d6367650885-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7d6367650885-1\"><span class=\"crayon-e\">setfacl </span><span class=\"crayon-i\">OPTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">Y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">DIRECTORY</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7d6367650885-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>其中 OPTION 是可选选项，X 可以是 <code>u</code>（用户）或者是 <code>g</code> （用户组），NAME 是用户或者用户组的名字，/DIRECTORY 是要用到的目录。我们将使用 <code>-m</code> 选项进行修改。因此，我们给 readers 用户组添加读取权限的命令是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7da366277822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo setfacl -m g:readers:rx -R /DATA\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7da366277822-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7da366277822-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7da366277822-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">setfacl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">readers</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">rx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">DATA</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7da366277822-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>现在 readers 用户组里面的每一个用户都可以读取 <code>/DATA</code> 目录里的文件了，但是他们不能修改里面的内容。</p>\n<p>为了给 editors 用户组里面的用户读写权限，我们执行了以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a4e7e7dd163780019\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo setfacl -m g:editors:rwx -R /DATA \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a4e7e7dd163780019-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a4e7e7dd163780019-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a4e7e7dd163780019-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">setfacl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">editors</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">DATA</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a4e7e7dd163780019-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>上述命令将赋予 editors 用户组中的任何成员读取权限，同时保留 readers 用户组的只读权限。</p>\n<h3 id=\"toc_5\">更多的权限控制</h3>\n<p>使用访问控制表（ACL），你可以实现你所需的权限控制。你可以添加用户到用户组，并且灵活地控制这些用户组对每个目录的权限以达到你的需求。如果想了解上述工具的更多信息，可以执行下列的命令：</p>\n<ul>\n<li><code>man usradd</code></li>\n<li><code>man addgroup</code></li>\n<li><code>man usermod</code></li>\n<li><code>man sefacl</code></li>\n<li><code>man chown</code></li>\n<li><code>man chmod</code></li>\n</ul>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113200\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113200votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113200\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "front_image_path": "full/6085acc0af4696f5d49164561c6bc4f9b590fc26.jpg"}
{"url_object_id": "9d1a4f483de8dad0a4da4300eacbcc09", "title": "MySQL 性能调优技巧", "url": "http://blog.jobbole.com/113197/", "create_date": "2017/12/06", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://dzone.com/articles/mysql-performance-tuning-tips-for-the-shopping-sea\">Shree Nair</a>   译文出处：<a target=\"_blank\" href=\"http://www.iteye.com/news/32796\">ITeye/无阻我飞扬</a>   </div><blockquote><p><em>摘要：针对购物旺季网站流量会对数据库造成的压力，作者给出了MySQL性能调优的一些技巧，这些技巧极具参考价值，通过这些调优，可以有效避免因为流量过大造成服务器宕机，从而给企业造成经济损失。以下是译文</em></p></blockquote>\n<p>万圣节已经过去很久了，该是把注意力集中在即将到来的假日季节的时候了。首先是感恩节，接着就是黑色星期五和网络星期一，最终在圣诞节/节礼周（从12月26日的节礼日开始，到12月31日的除夕结束为期六天或更长时间。这个词是由零售业在2000年代中期左右发明的，试图延长他们的节礼日销售）达到购物高潮。对于企业主来说，一年的这个时候标志着人们期待已久的年底获利了结。对于一些DBA来说，它会带来恐惧，不安，甚至是不眠之夜，他们要努力使系统重新上线。</p>\n<p>值得庆幸是，情况并非如此。通过对MySQL性能变量做一些主动调整，可以使数据库服务器免受购物旺季带来的需求增加的冲击。</p>\n<h3>技巧#1：确定MySQL的最大连接数</h3>\n<p>对于MySQL的最大连接数，一次最好是发送5个请求到Web服务器。对Web服务器的5个请求中的一部分将用于CSS样式表，图像和脚本等资源。由于诸如浏览器缓存等原因，要获得准确的MySQL到Web服务器的请求比率可能很困难; 要想得到一个确切的数字，就需要分析Web服务器的日志文件。例如，可以手动访问Apache的“access_log”日志文件，也可以通过<a href=\"http://www.debianhelp.co.uk/analog.htm\" target=\"_blank\">Analog</a>或<a href=\"http://www.webalizer.org/\" target=\"_blank\">Webalizer</a>等实用程序访问日志文件。</p>\n<p>一旦有了对特定使用情况的准确估计，请将该比率乘以Web服务器的最大连接数。例如，如果Web服务器配置为最多为256个客户端提供服务，MySQL请求与Web请求的比率为1/8，则最好将最大数据库连接数设置为32。还要考虑留有安全余量，把这个数乘以2，得到最终的数量。只有在基础设施支持的情况下，才能尝试将数据库连接数的最大数量与Web服务器的客户端限制相匹配。在大多数情况下，最好保持接近32。</p>\n<p><strong>在Monyog中查看MySQL连接</strong></p>\n<p>在MySQL数据库中，MySQL的最大并发连接数是存储在全局变量max_connections中的。Monyog报告变量“max_connections”作为当前连接监控组中的“最大允许”指标。它还将该数字除以打开的连接数，以生成连接使用百分比：</p>\n<p>还有一个连接历史记录监控，可以帮助计算最佳的最大并发连接数。它包括尝试，拒绝和成功连接的数量。此外，允许达到的最大指标的百分比显示为一个进度条，可以让你快速评估服务器在过去达到的最大并发连接数：</p>\n<h3>技巧#2：为临时表分配足够的内存</h3>\n<p>在某些情况下，服务器在处理语句时会创建内部临时表。临时表用于内部操作如GROUP BY和distinct，还有一些ORDER BY查询以及UNION和FROM子句（派生表）中的子查询。这些都是在内存中创建的内存表。内存中临时表的最大大小由tmp_table_size和max_heap_table_size中较小的值确定。如果临时表的大小超过这个阈值，则将其转换为磁盘上的InnoDB或MyISAM表。此外，如果查询涉及BLOB或TEXT列，而这些列不能存储在内存表中，临时表总是直接指向磁盘。</p>\n<p>这种转换的代价很大，所以考虑增加max_heap_table_size和tmp_table_size变量的大小来帮助减少在磁盘上创建临时表的数量。请记住，这将需要大量内存，因为内存中临时表的大小是基于“最坏情况”的。例如，内存表总是使用固定长度的列，所以字符列使用VARCHAR（255）。这可以使内存中的临时表比想象的要大得多—事实上，这比查询表的总大小要大很多倍！当增加max_heap_table_size和tmp_table_sizevariables的大小时，一定要监视服务器的内存使用情况，因为内存中的临时表可能会增加达到服务器内存容量的风险。</p>\n<p>一般来说，32M到64M是建议值，从这两个变量开始并根据需要进行调优。</p>\n<p><strong>在Monyog中的临时表监测</strong></p>\n<p>临时表的监测是许多预定义的Monyog监测之一。它提供了一些临时表使用的指标，包括：</p>\n<ul>\n<li><strong>允许的最大值</strong>：显示tmp_table_size服务器变量的值，它定义了在内存中创建的临时表的最大大小。与max_heap_table_size一起，这个值定义了可以在内存中创建的临时表的最大大小。如果内存临时表大于此大小，则将其存储在磁盘上。</li>\n<li><strong>内存表的最大大小</strong>：显示max_heap_table_size服务器变量的值，该值定义了显式创建的MEMORY存储引擎表的最大大小。</li>\n<li><strong>创建的临时表总数</strong>：显示created_tmp_tables服务器变量的值，它定义了在内存中创建的临时表的数量。</li>\n<li><strong>在磁盘上创建的临时表</strong>：显示created_tmp_disk_tables服务器变量的值，该变量定义了在磁盘上创建的临时表的数量。如果这个值很高，则应该考虑增加tmp_table_size和max_heap_table_size的值，以便增加创建内存临时表的数量，从而减少在磁盘上创建临时表的数量。</li>\n<li><strong>磁盘：总比率</strong>：基于created_tmp_disk_tables除以created_tmp_tables的计算值。由于tmp_table_size或max_heap_table_size不足而在磁盘上创建的临时表的百分比。Monyog将这个数字显示为一个进度条和百分比，以便快速确定有多少磁盘用于临时表，而不是内存。</li>\n</ul>\n<p>趋势图可用于创建的总表，磁盘上创建的表和磁盘的总比值。这些让我们看到了它们随着时间的演变：</p>\n<h3>技巧#3：增加线程缓存大小</h3>\n<p>连接管理器线程处理服务器监听的网络接口上的客户端连接请求。连接管理器线程将每个客户端连接与专用于它的线程关联，该线程负责处理该连接的身份验证和所有请求处理。因此，线程和当前连接的客户端之间是一对一的比例。确保线程缓存足够大以容纳所有传入请求是非常重要的。</p>\n<p>MySQL提供了许多与连接线程相关的服务器变量：</p>\n<p>线程缓存大小由thread_cache_size系统变量决定。默认值为0（无缓存），这将导致为每个新连接设置一个线程，并在连接终止时需要处理该线程。如果希望服务器每秒接收数百个连接请求，那么应该将thread_cache_size设置的足够高，以便大多数新连接可以使用缓存线程。可以在服务器启动或运行时设置max_connections的值。</p>\n<p>还应该监视缓存中的线程数（Threads_cached）以及创建了多少个线程，因为无法从缓存中获取线程（Threads_created）。关于后者，如果Threads_created继续以每分钟多于几个线程的增加，请考虑增加thread_cache_size的值。</p>\n<p>使用MySQL show status命令显示MySQL的变量和状态信息。这里有几个例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a29585dc6c83730680868\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSHOW GLOBAL STATUS LIKE '%Threads_connected%';\r\n\r\n+-------------------+-------+\r\n\r\n| Variable_name     | Value |\r\n\r\n+-------------------+-------+\r\n\r\n| Threads_connected | 2     |\r\n\r\n+-------------------+-------+\r\nSHOW GLOBAL STATUS LIKE '%Threads_running%';\r\n\r\n+-----------------+-------+\r\n\r\n| Variable_name   | Value |\r\n\r\n+-----------------+-------+\r\n\r\n| Threads_running | 1     |\r\n\r\n+-----------------+-------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585dc6c83730680868-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a29585dc6c83730680868-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-1\"><span class=\"crayon-e\">SHOW </span><span class=\"crayon-m\">GLOBAL</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">STATUS </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Threads_connected%'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-3\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-7\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-9\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Threads_connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-11\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-12\"><span class=\"crayon-e\">SHOW </span><span class=\"crayon-m\">GLOBAL</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">STATUS </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Threads_running%'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-14\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-16\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-18\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-20\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Threads_running</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585dc6c83730680868-22\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5a29585dc6c83730680868-23\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p><strong>Monyog线程缓存监测</strong></p>\n<p>Monyog提供了一个监控线程缓存的屏幕，名为“线程”。与MySQL线程相关的服务器变量映射到以下Monyog指标：</p>\n<ul>\n<li>thread_cache_size：可以缓存的线程数。</li>\n<li>Threads_cached：缓存中的线程数。</li>\n<li>Threads_created：创建用于处理连接的线程。</li>\n</ul>\n<p>Monyog线程屏幕还包括“线程缓存命中率”指标。这是一个提示线程缓存命中率的指标。如果值较低，则应该考虑增加线程缓存。在状态栏以百分比形式显示该值；它的值越接近100％越好。</p>\n<p>如果这些指标的值等于或超过指定值，则可以将每一个指标配置为发出警告和/或严重警报。</p>\n<h3>其他相关的服务器变量</h3>\n<p>除了上述指标以外，还应该监控以下内容：</p>\n<ol>\n<li><strong>InnoDB缓冲池大小</strong>： InnoDB缓冲池大小在使用InnoDB的MySQL数据库中起着至关重要的作用。缓冲池同时缓存数据和索引。它的值应该尽可能的大，以确保数据库使用内存而不是硬盘驱动器进行读取操作。</li>\n<li><strong>临时表大小</strong>： MySQL使用max_heap_table_size和tmp_table_size中较小的一个来限制内存中临时表的大小。拥有较大的值可以帮助减少在磁盘上创建临时表的数量，但也会增加服务器内存容量的风险，因为这个指标适用于每个客户端。一般来说，32M到64M是建议的值，从这两个变量开始并根据需要进行调优。</li>\n<li><strong>InnoDB日志缓冲区大小</strong>： MySQL每次写入日志文件时，它都会利用可用于处理销售数据的重要系统资源。因此，将InnoDB日志缓冲区大小设置为较大值才有意义。这样，服务器在大型事务中写入磁盘的次数就减少了，从而最大限度地减少了这些耗时的操作。64M是这个变量的一个很好的起点。</li>\n</ol>\n<h3>结论</h3>\n<p>虽然即便是最大的公司网站也会因宕机而遭受损失，但这种影响对于处理网上销售的中小型企业尤其关键。根据<a href=\"https://blog.100tb.com/the-real-cost-of-downtime-for-business\" target=\"_blank\">最近的一份调查报告</a>显示，一分钟的宕机导致企业平均损失约5000美元。不要让你的业务成为那种统计数据（因为宕机造成的损失）的一部分。在假日繁忙之前，主动调优MySQL数据库服务器（S）并收获回报吧！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113197\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113197votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113197\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,MySQL,数据库", "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg"}
{"url_object_id": "7a16af3cbe5d612e0cf98bb0bc900bb8", "title": "浅谈软件项目规模估计——怎么估？", "url": "http://blog.jobbole.com/113169/", "create_date": "2017/12/05", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Hofstadter.png"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><blockquote><p>做事所花费的时间总是比你预期的要长，即使你的预期中考虑了侯世达定律。</p>\n<p>—— 侯世达，哥德尔、埃舍尔、巴赫</p></blockquote>\n<p><a class=\"fancybox\" href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Hofstadter.png\" rel=\"fancybox\"><img class=\"aligncenter size-full wp-image-6214\" src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Hofstadter.png\" alt=\"\" width=\"992\" height=\"794\"></a></p>\n<p>周三的下午，我像平常一样，写着代码听着歌，突然从天而降一份莫名其妙的故事列表，说让我给个人天，用来投标用。作为一个技术异常牛逼的高端程序员，这对我来说岂不是 A Piece Of Shit…哦不，Cake。拿着列表，打眼一看就知道是做什么 — 又是个审批流系统。注册、登录、忘记密码…这些也需要时间？！哦，还要做个SSO，可能要做点数据集成，给个15人天吧！又是一堆CRUD… CRUD 各给2人天一共8个。看起来有4个 Model，乘个4，32个人天差不多。前端还有些工作量，找前端估一下…还有些跟遗留系统集成的部分，这块应该比较麻烦，给个30人天差不多…还要用微服务架构，估计需要一些基础环境，每个组件给3个人天，一共8个组件，算24吧….总共算起来130个开发人天，差不多，再加点buffer，算150吧！差不多了吧…</p>\n<p>这一幕是不是有点眼熟？不过，这样的做法可能会带来下面的几个问题：</p>\n<h3>1. 估计者的估计点数是否能代表团队的估计点数？</h3>\n<p>问题的答案显而易见。那么有同学会说，此时团队的人员还没完成配置，没办法让真实团队进行功能的估计。确实是这个样子，所以我们只能力所能及的去模拟真实团队进行估计。一般，交付项目的团队肯定不会全上非常有经验的同学，人员配比一定会有 leverage，也就是 Senior 人员和 Junior 人员的比例。所以，在估计的过程中，至少要引入 Junior 的同事，能够从不同经验的角度来看待同样的问题，来使估计不会过分“乐观”。</p>\n<h3>2. 是否有故事卡片之外的工作时间没有考虑到呢？</h3>\n<p>上文中的估计看起来是采用的经典的“理想人天”估计法，如果使用这样的估计方法，势必要考虑一些虽然没有在故事卡工作量中，但也一定会花费时间的事务，包括但不限于：</p>\n<ul>\n<li>回复电子邮件（沟通成本）</li>\n<li>面试（内部耗损）</li>\n<li>参加会议（包括内部会议，比如站会、Retro、Code Diff、技术研讨会议、客户沟通会议等）</li>\n<li>为当前发布提供支持（上线支持）</li>\n<li>培训？（内部的 Session）</li>\n<li>任务之间切换/被人打断（程序员出栈入栈的消耗…）</li>\n<li>修复bug（一定会有 Bug，一定会花时间修…）</li>\n<li>写各种文档（对于对文档比较看重的客户，这一部分会占用不少的时间）</li>\n</ul>\n<p>这些事务会伴随整个交付过程中发生，基本上都是正常交付必不可少的工作内容，而且根据笔者的经验，这些事情占据的时间并不比完成故事卡的编码工作要少。</p>\n<h3>3. 故事卡的需求是否清晰呢？</h3>\n<p>在项目启动前拿到的故事列表，往往只有 Epic 级别的，也就是很粗粒度的故事卡。故事卡中的 AC（Acceptance Criteria，验收条件）往往只考虑了最简单的 Happy Path，然而大部分项目中（尤其是 ToB项目），Exception 才是相对复杂的，这些异常情况往往需要花费更多的时间完成。在这种情况下进行估计，可想而知，一些隐藏的需求点往往难以发现。</p>\n<p><a class=\"fancybox\" href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/project-scale.jpg\" rel=\"fancybox\"><img class=\"aligncenter size-large wp-image-6213\" src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/project-scale-1024x683.jpg\" alt=\"\" width=\"700\" height=\"467\"></a></p>\n<h3>问题可能的答案</h3>\n<p>那么想要解决上面的问题，或者说更好一点的缓解上述问题的方案是什么呢？《敏捷估计与规划》中介绍了一些基本的方法。</p>\n<h4>首先，要进行集体估计</h4>\n<p>集体估计可以缓解因为个人能力不同所引发的单点偏差，不同的开发成员对于某个需求在不同角度的阐述，也容易让大家对需求有更全面的理解，也易于发现潜藏在需求中的风险。阐述的过程中，出现复杂问题时，可以及时联系相应的专家资源。对于一些规模较大的卡片，也可以综合大家的意见，进行更合理的拆解。同时，需要由要做次工作的人来进行估计，这样会产生更多的责任感，可以在一定程度上缓解乐观估计的问题（Lederer and Prasad 1992）。</p>\n<h4>其次，是方法</h4>\n<p>《敏捷估计与规划》介绍了2种基本的方法：理想人天法和故事点法。</p>\n<p><strong>1. 理想人天法</strong></p>\n<p>理想人天法就是直接把故事卡估计成理想人天。所谓理想人天，就是“在需求非常明确的情况下，进行编码、测试工作所花费的时间”。就好像篮球比赛一样，每节12分钟，4节总共48分钟，这是比赛的理想时间。但是谁都知道，一般NBA每场比赛都要2个半小时左右，比赛激烈的话三个小时都有可能，比赛真正持续的时间与理想时间是有较大差距的。相比于篮球比赛，软件项目“场外”的工作就更多了，除了上面问题2列出的那些实务之外，像是方案变更引发的大量沟通、集成联调、测试过程中的需求讲解、项目的交接等等，这些工作也需要算到项目时间之内。同时，对于同一个项目，不同的人根据其能力、经验的不同，会有不同的理想人天。</p>\n<p>所以在估计完理想人天之后，如何进行实际人天的换算，在实际应用中，仍然是个大问题，所以…最好就不要用了。</p>\n<p><a class=\"fancybox\" href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Estimate.jpg\" rel=\"fancybox\"><img class=\"aligncenter size-large wp-image-6212\" src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Estimate-1024x512.jpg\" alt=\"\" width=\"700\" height=\"350\"></a></p>\n<p><strong>2. 故事点法</strong></p>\n<p>故事点法就是按照故事卡的规模和难度，给予每张故事卡一个点数。注意，这里的点数代表的不是所需的人天，而更多的是难度系数。</p>\n<p>开发人员因为自己技能、经验、能力的不同，解决同样的问题，所花的时间差别是很大的，但对规模的估计却是一样的。就好比从北京到上海，坐飞机1个多小时，高铁5个小时，步行要…一个月左右吧，距离是一样的，根据不同的速度，会花费不同的时间。</p>\n<p>同时，人们一般很难对一个规模进行准确的估计，比如从北京到上海的绝对距离是多少，估计没几个人知道。但是，人们能够比较容易的比较两件事物的差距或者说倍数关系，比如：北京到上海的距离跟从上海到香港的距离是差不多的，这个距离是北京到郑州距离的两倍。所以我们在做估计的时候，可以按照难度系数分成几波，然后在内部在进行一些比较和排序，然后按照比较的差距分配一个规模点数，比如1、2、3、5、8、13。</p>\n<p>大家可以看到，这个规模点数并不是连续的数字，而是采用了菲波那切这一个神奇的数列。这样的数列有2个好处，一个是不会出现连续的倍数关系，比如4点的故事卡片是2点故事卡片的2倍；其次是表明出规模越大的卡片，其不确定性也承递增趋势，所以会给更高的点数。</p>\n<p>有了故事点数，我们仍然无法判定项目什么时间能够交付，因为缺少一个“速度”，也就是团队的开发速度。如果面对的是一个成熟的团队，并且使用类似的技术栈，且与客户的合作模式基本相同的话，那么可以参考前一个项目的速度，来进行交付时间的计算。但如果面对的是全新的客户、不同的技术栈，以及完全重新配置的团队，那么速度基本是不可估的。这时候，有时候会根据 Tech Lead 和 PM 的（Pai）经（Nao）验（Dai），进行硬估：把每个点数转化成N个人天。比如1个点数需要2个人天，那么100个点数的项目就是200个人天。当然，这种方法…说多了会掉泪。</p>\n<h4>最后，给项目加些缓冲（Buffer）</h4>\n<p>一般来说，面对这种情况，本着对客户和我们自己负责的态度，需要给项目加一些缓冲区（Buffer）。Buffer 分两种，一种是功能Buffer，一种是进度 Buffer。</p>\n<p><strong>功能缓冲</strong></p>\n<p>增加功能 Buffer，简单来说，就是把全部的故事列表进行估计，假设得到总点数是100点；然后按照优先级进行排序，挑出其中的MVP，要少于总量的 70%，作为必须要做（Must Have）的部分。剩下的 30% 作为做了更好、不做也不影响主要功能（Nice To Have）的部分，通过这种方式来缓冲项目里程碑的风险。</p>\n<p><strong>进度缓冲</strong></p>\n<p>进度 Buffer，是用来缓冲估计之外的异常情况引发的项目时间的拉长。进度 Buffer 根据项目的不确定性的差异，计算的方法和结果会有较大差异，有兴趣可以参考《敏捷规划与估计》，这里就不赘述了。不过根据 Leach(2000)准则提出的建议，至少要保持整个项目的20%以上，否则也许不能为整个项目提供足够的保护。</p>\n<h3>不是总结的总结</h3>\n<p>上面的这些方法能一定程度的规避风险，给开发团队带来一定的空间，但过分的强调估计和交付计划的准确性，会带来更深层级的问题：</p>\n<ol>\n<li>output over outcome。客户更关注功能列表的完成，而不是产生的业务价值。</li>\n<li>开发团队会倾向于裁剪用户故事的功能，3个点的故事卡，尽量控制在规定时间内完成，即使可以花更多时间把事情做的更好。</li>\n<li>控制需求变更。可以进行需求变更，但这个过程更像是一个异常的情况，而不是喜闻乐见的。</li>\n<li>当我们发现了更好的业务点、idea时候，会倾向于隐瞒，以免额外的业务功能会增加工作量。需求变更往往会涉及客户谈判的事情，尤其是当客户观念是传统的供应商管理策略：我来控制需求的全景，能多做点就多做点。</li>\n<li>在客户合作和谈判的天平上，客户关系会向谈判的方向倾斜。</li>\n</ol>\n<p>估计和计划会使团队和客户更多的聚焦在工作量，而不是工作的价值上。如果能够引导客户从 output 导向的思维转变到 outcome 导向上，那么团队就不用再疲于奔命的完成那些并不会用到的feature上，而是可以有更多的时间去提升产品质量，进一步提升业务价值。</p>\n<p class=\"p1\"><span class=\"s1\">文／ThoughtWorks张久坤</span></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113169\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113169votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113169\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 78</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "开发,软件开发", "front_image_path": "full/c9f125038e5d310ae300941c495b188be503ee72.jpg"}
{"url_object_id": "81659ccadebd3390ce4d7edbf5b6047d", "title": "多线程编程基础知识", "url": "http://blog.jobbole.com/113186/", "create_date": "2017/12/05", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/05/2b6a906c5f04bf387ccf049e4a20b855.png"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/cy163/archive/2006/11/02/547428.html\">cy163</a>   </div><p>当前流行的Windows操作系统能同时运行几个程序(独立运行的程序又称之为进程)，对于同一个程序，它又可以分成若干个独立的执行流，我们称之为线程，线程提供了多任务处理的能力。用进程和线程的观点来研究软件是当今普遍采用的方法，进程和线程的概念的出现，对提高软件的并行性有着重要的意义。现在的大型应用软件无一不是多线程多任务处理，单线程的软件是不可想象的。因此掌握多线程多任务设计方法对每个程序员都是必需要掌握的。本实例针对多线程技术在应用中经常遇到的问题，如线程间的通信、同步等，分别进行探讨，并利用多线程技术进行线程之间的通信，实现了数字的简单排序。</p>\n<h1>一、 实现方法</h1>\n<h2>1、理解线程</h2>\n<p>要讲解线程，不得不说一下进程，进程是应用程序的执行实例，每个进程是由私有的虚拟地址空间、代码、数据和其它系统资源组成。进程在运行时创建的资源随着进程的终止而死亡。线程的基本思想很简单，它是一个独立的执行流，是进程内部的一个独立的执行单元，相当于一个子程序，它对应于Visual C++中的CwinThread类对象。单独一个执行程序运行时，缺省地包含的一个主线程，主线程以函数地址的形式出现，提供程序的启动点，如main（）或WinMain（）函数等。当主线程终止时，进程也随之终止。根据实际需要，应用程序可以分解成许多独立执行的线程，每个线程并行的运行在同一进程中。</p>\n<p>一个进程中的所有线程都在该进程的虚拟地址空间中，使用该进程的全局变量和系统资源。操作系统给每个线程分配不同的CPU时间片，在某一个时刻，CPU只执行一个时间片内的线程，多个时间片中的相应线程在CPU内轮流执行，由于每个时间片时间很短，所以对用户来说，仿佛各个线程在计算机中是并行处理的。操作系统是根据线程的优先级来安排CPU的时间，优先级高的线程优先运行，优先级低的线程则继续等待。</p>\n<p>线程被分为两种：用户界面线程和工作线程（又称为后台线程）。用户界面线程通常用来处理用户的输入并响应各种事件和消息，其实，应用程序的主执行线程CWinAPP对象就是一个用户界面线程，当应用程序启动时自动创建和启动，同样它的终止也意味着该程序的结束，进程终止。工作线程用来执行程序的后台处理任务，比如计算、调度、对串口的读写操作等，它和用户界面线程的区别是它不用从CWinThread类派生来创建，对它来说最重要的是如何实现工作线程任务的运行控制函数。工作线程和用户界面线程启动时要调用同一个函数的不同版本；最后需要读者明白的是，一个进程中的所有线程共享它们父进程的变量，但同时每个线程可以拥有自己的变量。</p>\n<h2>2、线程的管理和操作</h2>\n<h3>（一）线程的启动</h3>\n<p>创建一个用户界面线程，首先要从类CwinThread产生一个派生类，同时必须使用DECLARE_DYNCREATE和IMPLEMENT_DYNCREATE来声明和实现这个CwinThread派生类。第二步是根据需要重载该派生类的一些成员函数如：ExitInstance（）、InitInstance（）、OnIdle（）、PreTranslateMessage（）等函数。最后调用AfxBeginThread()函数的一个版本：CWinThread* AfxBeginThread( CRuntimeClass* pThreadClass, int nPriority = THREAD_PRIORITY_NORMAL, UINT nStackSize = 0, DWORD dwCreateFlags = 0, LPSECURITY_ATTRIBUTES lpSecurityAttrs = NULL ) 启动该用户界面线程，其中第一个参数为指向定义的用户界面线程类指针变量，第二个参数为线程的优先级，第三个参数为线程所对应的堆栈大小，第四个参数为线程创建时的附加标志，缺省为正常状态，如为CREATE_SUSPENDED则线程启动后为挂起状态。</p>\n<p>对于工作线程来说，启动一个线程，首先需要编写一个希望与应用程序的其余部分并行运行的函数如Fun1()，接着定义一个指向CwinThread对象的指针变量*pThread,调用AfxBeginThread(Fun1,param,priority)函数，返回值赋给pThread变量的同时一并启动该线程来执行上面的Fun1（）函数，其中Fun1是线程要运行的函数的名字，也既是上面所说的控制函数的名字，param是准备传送给线程函数Fun1的任意32位值，priority则是定义该线程的优先级别，它是预定义的常数，读者可参考MSDN。</p>\n<h3>（二）线程的优先级</h3>\n<p>以下的CwinThread类的成员函数用于线程优先级的操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edebf629819491\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint GetThreadPriority（）；\r\nBOOL SetThradPriority（）(int nPriority)；</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edebf629819491-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edebf629819491-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edebf629819491-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">GetThreadPriority</span>（）；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edebf629819491-2\"><span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SetThradPriority</span>（）<span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nPriority</span><span class=\"crayon-sy\">)</span>；</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>上述的二个函数分别用来获取和设置线程的优先级，这里的优先级，是相对于该线程所处的优先权层次而言的，处于同一优先权层次的线程，优先级高的线程先运行；处于不同优先权层次上的线程，谁的优先权层次高，谁先运行。至于优先级设置所需的常数，自己参考MSDN就可以了，要注意的是要想设置线程的优先级，这个线程在创建时必须具有THREAD_SET_INFORMATION访问权限。对于线程的优先权层次的设置，CwinThread类没有提供相应的函数，但是可以通过Win32 SDK函数GetPriorityClass（）和SetPriorityClass（）来实现。</p>\n<h3>（三）线程的悬挂和恢复</h3>\n<p>CWinThread类中包含了应用程序悬挂和恢复它所创建的线程的函数，其中SuspendThread（）用来悬挂线程，暂停线程的执行；ResumeThread（）用来恢复线程的执行。如果你对一个线程连续若干次执行SuspendThread（），则需要连续执行相应次的ResumeThread（）来恢复线程的运行。</p>\n<h3>（四）结束线程</h3>\n<p>终止线程有三种途径，线程可以在自身内部调用AfxEndThread()来终止自身的运行；可以在线程的外部调用BOOL TerminateThread( HANDLE hThread, DWORD dwExitCode )来强行终止一个线程的运行，然后调用CloseHandle（）函数释放线程所占用的堆栈；第三种方法是改变全局变量，使线程的执行函数返回，则该线程终止。下面以第三种方法为例，给出部分代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edeca645358637\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//////CtestView message handlers\r\n/////Set to True to end thread\r\nBool bend=FALSE;//定义的全局变量，用于控制线程的运行；\r\n//The Thread Function；\r\nUINT ThreadFunction(LPVOID pParam)//线程函数\r\n{\r\n　while(!bend)\r\n　{\r\n　　Beep(100,100);\r\n　　Sleep(1000);\r\n　}\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeca645358637-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeca645358637-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeca645358637-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeca645358637-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeca645358637-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeca645358637-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeca645358637-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeca645358637-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeca645358637-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeca645358637-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeca645358637-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeca645358637-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeca645358637-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edeca645358637-1\"><span class=\"crayon-c\">//////CtestView message handlers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeca645358637-2\"><span class=\"crayon-c\">/////Set to True to end thread</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeca645358637-3\"><span class=\"crayon-t\">Bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bend</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//定义的全局变量，用于控制线程的运行；</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeca645358637-4\"><span class=\"crayon-c\">//The Thread Function；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeca645358637-5\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//线程函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeca645358637-6\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeca645358637-7\">　<span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bend</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeca645358637-8\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeca645358637-9\">　　<span class=\"crayon-e\">Beep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeca645358637-10\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeca645358637-11\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeca645358637-12\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeca645358637-13\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edece028470051\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCwinThread *pThread;\r\nHWND hWnd;\r\nVoid CtestView::OninitialUpdate()\r\n{ \r\n　hWnd=GetSafeHwnd();\r\n　pThread=AfxBeginThread(ThradFunction,hWnd);//启动线程\r\n　pThread-&gt;m_bAutoDelete=FALSE;//线程为手动删除\r\n　Cview::OnInitialUpdate();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edece028470051-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edece028470051-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edece028470051-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edece028470051-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edece028470051-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edece028470051-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edece028470051-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edece028470051-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edece028470051-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edece028470051-1\"><span class=\"crayon-e \">CwinThread *</span><span class=\"crayon-v\">pThread</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edece028470051-2\"><span class=\"crayon-e\">HWND </span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edece028470051-3\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OninitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edece028470051-4\"><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edece028470051-5\">　<span class=\"crayon-v\">hWnd</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">GetSafeHwnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edece028470051-6\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThradFunction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//启动线程</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edece028470051-7\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_bAutoDelete</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//线程为手动删除</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edece028470051-8\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnInitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edece028470051-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76eded2670925810\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nVoid CtestView::OnDestroy()\r\n{\r\n　bend=TRUE;//改变变量，线程结束\r\n　WaitForSingleObject(pThread-&gt;m_hThread,INFINITE);//等待线程结束\r\n　delete pThread;//删除线程\r\n　Cview::OnDestroy();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded2670925810-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded2670925810-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded2670925810-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded2670925810-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded2670925810-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded2670925810-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded2670925810-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76eded2670925810-1\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded2670925810-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded2670925810-3\">　<span class=\"crayon-v\">bend</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">TRUE</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//改变变量，线程结束</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded2670925810-4\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_hThread</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//等待线程结束</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded2670925810-5\">　<span class=\"crayon-e\">delete </span><span class=\"crayon-v\">pThread</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//删除线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded2670925810-6\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded2670925810-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h2>3、线程之间的通信</h2>\n<p>通常情况下，一个次级线程要为主线程完成某种特定类型的任务，这就隐含着表示在主线程和次级线程之间需要建立一个通信的通道。一般情况下，有下面的几种方法实现这种通信任务：使用全局变量（上一节的例子其实使用的就是这种方法）、使用事件对象、使用消息。这里我们主要介绍后两种方法。</p>\n<h3>（一） 利用用户定义的消息通信</h3>\n<p>在Windows程序设计中，应用程序的每一个线程都拥有自己的消息队列，甚至工作线程也不例外，这样一来，就使得线程之间利用消息来传递信息就变的非常简单。首先用户要定义一个用户消息，如下所示：#define WM_USERMSG WMUSER+100；在需要的时候，在一个线程中调用：：PostMessage((HWND)param,WM_USERMSG,0,0)或CwinThread::PostThradMessage（）来向另外一个线程发送这个消息，上述函数的四个参数分别是消息将要发送到的目的窗口的句柄、要发送的消息标志符、消息的参数WPARAM和LPARAM。下面的代码是对上节代码的修改，修改后的结果是在线程结束时显示一个对话框，提示线程结束：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76eded6855186481\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nUINT ThreadFunction(LPVOID pParam)\r\n{\r\n　while(!bend)\r\n　{\r\n　　Beep(100,100);\r\n　　Sleep(1000);\r\n　}\r\n　：：PostMessage(hWnd,WM_USERMSG,0,0)；\r\n　return 0;\r\n}\r\n////////WM_USERMSG消息的响应函数为OnThreadended(WPARAM wParam,\r\nLPARAM lParam)\r\nLONG CTestView::OnThreadended(WPARAM wParam,LPARAM lParam)\r\n{\r\n　AfxMessageBox(\"Thread ended.\");\r\n　Retrun 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76eded6855186481-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76eded6855186481-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-1\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-3\">　<span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bend</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-4\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-5\">　　<span class=\"crayon-e\">Beep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-6\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-7\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-8\">　：：<span class=\"crayon-e\">PostMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">WM_USERMSG</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span>；</div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-9\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-10\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-11\"><span class=\"crayon-c\">////////WM_USERMSG消息的响应函数为OnThreadended(WPARAM wParam,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-12\"><span class=\"crayon-e\">LPARAM </span><span class=\"crayon-v\">lParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-13\"><span class=\"crayon-t\">LONG</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CTestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnThreadended</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">WPARAM </span><span class=\"crayon-v\">wParam</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">LPARAM </span><span class=\"crayon-v\">lParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-14\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-15\">　<span class=\"crayon-e\">AfxMessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Thread ended.\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76eded6855186481-16\">　<span class=\"crayon-i\">Retrun</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76eded6855186481-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>上面的例子是工作者线程向用户界面线程发送消息，对于工作者线程，如果它的设计模式也是消息驱动的，那么调用者可以向它发送初始化、退出、执行某种特定的处理等消息，让它在后台完成。在控制函数中可以直接使用：：GetMessage()这个SDK函数进行消息分检和处理，自己实现一个消息循环。GetMessage()函数在判断该线程的消息队列为空时，线程将系统分配给它的时间片让给其它线程，不无效的占用CPU的时间，如果消息队列不为空，就获取这个消息，判断这个消息的内容并进行相应的处理。</p>\n<h3>（二）用事件对象实现通信</h3>\n<p>在线程之间传递信号进行通信比较复杂的方法是使用事件对象，用MFC的Cevent类的对象来表示。事件对象处于两种状态之一：有信号和无信号，线程可以监视处于有信号状态的事件，以便在适当的时候执行对事件的操作。上述例子代码修改如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76ededa591832331\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCevent threadStart ,threadEnd;\r\nUINT ThreadFunction(LPVOID pParam)\r\n{\r\n　：：WaitForSingleObject(threadStart.m_hObject,INFINITE);\r\n　AfxMessageBox(\"Thread start.\");\r\n　while(!bend)\r\n　{\r\n　　Beep(100,100);\r\n　　Sleep(1000);\r\n　　Int result=::WaitforSingleObject(threadEnd.m_hObject,0);\r\n　　//等待threadEnd事件有信号，无信号时线程在这里悬停\r\n　　If(result==Wait_OBJECT_0)\r\n　　　Bend=TRUE;\r\n　}\r\n　：：PostMessage(hWnd,WM_USERMSG,0,0)；\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededa591832331-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededa591832331-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-1\"><span class=\"crayon-e\">Cevent </span><span class=\"crayon-i\">threadStart</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">threadEnd</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-2\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-4\">　：：<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadStart</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">m_hObject</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-5\">　<span class=\"crayon-e\">AfxMessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Thread start.\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-6\">　<span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bend</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-7\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-8\">　　<span class=\"crayon-e\">Beep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-9\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-10\">　　<span class=\"crayon-t\">Int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">WaitforSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadEnd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">m_hObject</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-11\">　　<span class=\"crayon-c\">//等待threadEnd事件有信号，无信号时线程在这里悬停</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-12\">　　<span class=\"crayon-st\">If</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">result</span><span class=\"crayon-o\">==</span><span class=\"crayon-v\">Wait_OBJECT_0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-13\">　　　<span class=\"crayon-v\">Bend</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">TRUE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-14\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-15\">　：：<span class=\"crayon-e\">PostMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">WM_USERMSG</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span>；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededa591832331-16\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededa591832331-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76ededd128215006\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nVoid CtestView::OninitialUpdate()\r\n{ \r\n　hWnd=GetSafeHwnd();\r\n　threadStart.SetEvent();//threadStart事件有信号\r\n　pThread=AfxBeginThread(ThreadFunction,hWnd);//启动线程\r\n　pThread-&gt;m_bAutoDelete=FALSE;\r\n　Cview::OnInitialUpdate();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededd128215006-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededd128215006-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededd128215006-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededd128215006-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededd128215006-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededd128215006-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76ededd128215006-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76ededd128215006-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76ededd128215006-1\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OninitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededd128215006-2\"><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededd128215006-3\">　<span class=\"crayon-v\">hWnd</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">GetSafeHwnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededd128215006-4\">　<span class=\"crayon-v\">threadStart</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//threadStart事件有信号</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededd128215006-5\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadFunction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//启动线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededd128215006-6\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_bAutoDelete</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76ededd128215006-7\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnInitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76ededd128215006-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edee1091652426\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nVoid CtestView::OnDestroy()\r\n{\r\n　threadEnd.SetEvent();\r\n　WaitForSingleObject(pThread-&gt;m_hThread,INFINITE);\r\n　delete pThread;\r\n　Cview::OnDestroy();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee1091652426-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee1091652426-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee1091652426-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee1091652426-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee1091652426-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee1091652426-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee1091652426-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edee1091652426-1\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee1091652426-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee1091652426-3\">　<span class=\"crayon-v\">threadEnd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee1091652426-4\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_hThread</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee1091652426-5\">　<span class=\"crayon-e\">delete </span><span class=\"crayon-v\">pThread</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee1091652426-6\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee1091652426-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>运行这个程序，当关闭程序时，才显示提示框，显示”Thread ended”。</p>\n<h2>4、线程之间的同步</h2>\n<p>前面我们讲过，各个线程可以访问进程中的公共变量，所以使用多线程的过程中需要注意的问题是如何防止两个或两个以上的线程同时访问同一个数据，以免破坏数据的完整性。保证各个线程可以在一起适当的协调工作称为线程之间的同步。前面一节介绍的事件对象实际上就是一种同步形式。Visual C++中使用同步类来解决操作系统的并行性而引起的数据不安全的问题，MFC支持的七个多线程的同步类可以分成两大类：同步对象（CsyncObject、Csemaphore、Cmutex、CcriticalSection和Cevent）和同步访问对象（CmultiLock和CsingleLock）。本节主要介绍临界区（critical section）、互斥（mutexe）、信号量（semaphore），这些同步对象使各个线程协调工作，程序运行起来更安全。</p>\n<h3>（一） 临界区</h3>\n<p>临界区是保证在某一个时间只有一个线程可以访问数据的方法。使用它的过程中，需要给各个线程提供一个共享的临界区对象，无论哪个线程占有临界区对象，都可以访问受到保护的数据，这时候其它的线程需要等待，直到该线程释放临界区对象为止，临界区被释放后，另外的线程可以强占这个临界区，以便访问共享的数据。临界区对应着一个CcriticalSection对象，当线程需要访问保护数据时，调用临界区对象的Lock()成员函数；当对保护数据的操作完成之后，调用临界区对象的Unlock()成员函数释放对临界区对象的拥有权，以使另一个线程可以夺取临界区对象并访问受保护的数据。同时启动两个线程，它们对应的函数分别为WriteThread()和ReadThread()，用以对公共数组组array[]操作，下面的代码说明了如何使用临界区对象：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edee5304569042\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include \"afxmt.h\"\r\nint array[10],destarray[10];\r\nCCriticalSection Section;\r\nUINT WriteThread(LPVOID param)\r\n{\r\n　Section.Lock();\r\n　for(int x=0;x&lt;10;x++)\r\n　　array[x]=x;\r\n　Section.Unlock();\r\n}\r\nUINT ReadThread(LPVOID param)\r\n{\r\n　Section.Lock();\r\n　For(int x=0;x&lt;10;x++)\r\n　　Destarray[x]=array[x];\r\n　　Section.Unlock();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee5304569042-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee5304569042-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-1\"><span class=\"crayon-p\">#include \"afxmt.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-2\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-3\"><span class=\"crayon-e\">CCriticalSection </span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-4\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">WriteThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-5\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-6\">　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-8\">　　<span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-9\">　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-10\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-11\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ReadThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-13\">　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-14\">　<span class=\"crayon-st\">For</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-15\">　　<span class=\"crayon-v\">Destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee5304569042-16\">　　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee5304569042-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>上述代码运行的结果应该是Destarray数组中的元素分别为1-9，而不是杂乱无章的数，如果不使用同步，则不是这个结果，有兴趣的读者可以实验一下。</p>\n<h3>（二）互斥</h3>\n<p>互斥与临界区很相似，但是使用时相对复杂一些，它不仅可以在同一应用程序的线程间实现同步，还可以在不同的进程间实现同步，从而实现资源的安全共享。互斥与Cmutex类的对象相对应，使用互斥对象时，必须创建一个CSingleLock或CMultiLock对象，用于实际的访问控制，因为这里的例子只处理单个互斥，所以我们可以使用CSingleLock对象，该对象的Lock()函数用于占有互斥，Unlock()用于释放互斥。实现代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edee9470778340\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include \"afxmt.h\"\r\nint array[10],destarray[10];\r\nCMutex Section;\r\n\r\nUINT WriteThread(LPVOID param)\r\n{\r\n　CsingleLock singlelock;\r\n　singlelock (&amp;Section);\r\n　singlelock.Lock();\r\n　for(int x=0;x&lt;10;x++)\r\n　　array[x]=x;\r\n　singlelock.Unlock();\r\n}\r\n\r\nUINT ReadThread(LPVOID param)\r\n{\r\n　CsingleLock singlelock;\r\n　singlelock (&amp;Section);\r\n　singlelock.Lock();\r\n　For(int x=0;x&lt;10;x++)\r\n　　Destarray[x]=array[x];\r\n　　singlelock.Unlock();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edee9470778340-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edee9470778340-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-1\"><span class=\"crayon-p\">#include \"afxmt.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-2\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-3\"><span class=\"crayon-e\">CMutex </span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-5\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">WriteThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-6\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-7\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-8\">　<span class=\"crayon-e\">singlelock</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-9\">　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-10\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-11\">　　<span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-12\">　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-13\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-15\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ReadThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-17\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-18\">　<span class=\"crayon-e\">singlelock</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-19\">　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-20\">　<span class=\"crayon-st\">For</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-21\">　　<span class=\"crayon-v\">Destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edee9470778340-22\">　　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edee9470778340-23\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p></p>\n<h3>（三）信号量</h3>\n<p>信号量的用法和互斥的用法很相似，不同的是它可以同一时刻允许多个线程访问同一个资源，创建一个信号量需要用Csemaphore类声明一个对象，一旦创建了一个信号量对象，就可以用它来对资源的访问技术。要实现计数处理，先创建一个CsingleLock或CmltiLock对象，然后用该对象的Lock()函数减少这个信号量的计数值，Unlock()反之。下面的代码分别启动三个线程，执行时同时显示二个消息框，然后10秒后第三个消息框才得以显示。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edeed074787390\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCsemaphore *semaphore;\r\nSemaphore=new Csemaphore(2,2);\r\nHWND hWnd=GetSafeHwnd();\r\nAfxBeginThread(threadProc1,hWnd);\r\nAfxBeginThread(threadProc2,hWnd);\r\nAfxBeginThread(threadProc3,hWnd);\r\nUINT ThreadProc1(LPVOID param)\r\n{\r\n　CsingleLock singelLock(semaphore);\r\n　singleLock.Lock();\r\n　Sleep(10000);\r\n　::MessageBox((HWND)param,\"Thread1 had access\",\"Thread1\",MB_OK);\r\n　return 0;\r\n}\r\nUINT ThreadProc2(LPVOID param)\r\n{\r\n　CSingleLock singelLock(semaphore);\r\n　singleLock.Lock();\r\n　Sleep(10000);\r\n　::MessageBox((HWND)param,\"Thread2 had access\",\"Thread2\",MB_OK);\r\n　return 0;\r\n}\r\n\r\nUINT ThreadProc3(LPVOID param)\r\n{\r\n　CsingleLock singelLock(semaphore);\r\n　singleLock.Lock();\r\n　Sleep(10000);\r\n　::MessageBox((HWND)param,\"Thread3 had access\",\"Thread3\",MB_OK);\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edeed074787390-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edeed074787390-31\">31</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-1\"><span class=\"crayon-e \">Csemaphore *</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-2\"><span class=\"crayon-v\">Semaphore</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Csemaphore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-3\"><span class=\"crayon-e\">HWND </span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">GetSafeHwnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-4\"><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadProc1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-5\"><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadProc2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-6\"><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadProc3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-7\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadProc1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-8\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-9\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-e\">singelLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-10\">　<span class=\"crayon-v\">singleLock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-11\">　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-12\">　<span class=\"crayon-o\">::</span><span class=\"crayon-e\">MessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HWND</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread1 had access\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread1\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">MB_OK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-13\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-14\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-15\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadProc2</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-17\">　<span class=\"crayon-e\">CSingleLock </span><span class=\"crayon-e\">singelLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-18\">　<span class=\"crayon-v\">singleLock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-19\">　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-20\">　<span class=\"crayon-o\">::</span><span class=\"crayon-e\">MessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HWND</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread2 had access\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread2\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">MB_OK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-21\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-22\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-24\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadProc3</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-25\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-26\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-e\">singelLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-27\">　<span class=\"crayon-v\">singleLock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-28\">　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-29\">　<span class=\"crayon-o\">::</span><span class=\"crayon-e\">MessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HWND</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread3 had access\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread3\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">MB_OK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edeed074787390-30\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edeed074787390-31\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p></p>\n<h1>二、 编程步骤</h1>\n<ol>\n<li>启动Visual C++6.0，生成一个32位的控制台程序，将该程序命名为”sequence”</li>\n<li>输入要排续的数字，声明四个子线程；</li>\n<li>输入代码，编译运行程序。</li>\n</ol>\n<h1>三、 程序代码</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edef1946954720\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsequence.cpp : Defines the entry point for the console application.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef1946954720-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edef1946954720-1\"><span class=\"crayon-v\">sequence</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cpp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Defines </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">entry </span><span class=\"crayon-e\">point </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">console </span><span class=\"crayon-v\">application</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>主要用到的WINAPI线程控制函数，有关详细说明请查看MSDN；</p>\n<p>线程建立函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edef5626604633\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nHANDLE CreateThread(\r\n　LPSECURITY_ATTRIBUTES lpThreadAttributes, // 安全属性结构指针，可为NULL；\r\n　DWORD dwStackSize, // 线程栈大小，若为0表示使用默认值； \r\n　LPTHREAD_START_ROUTINE lpStartAddress, // 指向线程函数的指针；\r\n　LPVOID lpParameter, // 传递给线程函数的参数，可以保存一个指针值； \r\n　DWORD dwCreationFlags, // 线程建立是的初始标记，运行或挂起； \r\n　LPDWORD lpThreadId // 指向接收线程号的DWORD变量； \r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef5626604633-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef5626604633-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef5626604633-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef5626604633-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef5626604633-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef5626604633-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef5626604633-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef5626604633-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edef5626604633-1\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef5626604633-2\">　<span class=\"crayon-e\">LPSECURITY_ATTRIBUTES </span><span class=\"crayon-v\">lpThreadAttributes</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 安全属性结构指针，可为NULL；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef5626604633-3\">　<span class=\"crayon-e\">DWORD </span><span class=\"crayon-v\">dwStackSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 线程栈大小，若为0表示使用默认值； </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef5626604633-4\">　<span class=\"crayon-e\">LPTHREAD_START_ROUTINE </span><span class=\"crayon-v\">lpStartAddress</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 指向线程函数的指针；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef5626604633-5\">　<span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">lpParameter</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 传递给线程函数的参数，可以保存一个指针值； </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef5626604633-6\">　<span class=\"crayon-e\">DWORD </span><span class=\"crayon-v\">dwCreationFlags</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 线程建立是的初始标记，运行或挂起； </span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef5626604633-7\">　<span class=\"crayon-e\">LPDWORD </span><span class=\"crayon-v\">lpThreadId</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 指向接收线程号的DWORD变量； </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef5626604633-8\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>对临界资源控制的多线程控制的信号函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edef8844737894\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nHANDLE CreateEvent(\r\n　LPSECURITY_ATTRIBUTES lpEventAttributes, // 安全属性结构指针，可为NULL；\r\n　BOOL bManualReset, // 手动清除信号标记，TRUE在WaitForSingleObject后必须手动//调用RetEvent清除信号。若为　FALSE则在WaitForSingleObject\r\n　//后，系统自动清除事件信号；\r\n　BOOL bInitialState, // 初始状态，TRUE有信号，FALSE无信号；\r\n　LPCTSTR lpName // 信号量的名称，字符数不可多于MAX_PATH；\r\n　//如果遇到同名的其他信号量函数就会失败，如果遇\r\n　//到同类信号同名也要注意变化；\r\n);\r\n\r\nHANDLE CreateMutex(\r\n　LPSECURITY_ATTRIBUTES lpMutexAttributes, // 安全属性结构指针，可为NULL\r\n　BOOL bInitialOwner, // 当前建立互斥量是否占有该互斥量TRUE表示占有，\r\n　//这样其他线程就不能获得此互斥量也就无法进入由\r\n　//该互斥量控制的临界区。FALSE表示不占有该互斥量 \r\n　LPCTSTR lpName // 信号量的名称，字符数不可多于MAX_PATH如果\r\n　//遇到同名的其他信号量函数就会失败，\r\n　//如果遇到同类信号同名也要注意变化；\r\n);\r\n\r\n//初始化临界区信号，使用前必须先初始化\r\nVOID InitializeCriticalSection(\r\n　LPCRITICAL_SECTION lpCriticalSection // 临界区变量指针\r\n);\r\n\r\n//阻塞函数\r\n//如果等待的信号量不可用，那么线程就会挂起，直到信号可用\r\n//线程才会被唤醒，该函数会自动修改信号，如Event，线程被唤醒之后\r\n//Event信号会变得无信号，Mutex、Semaphore等也会变。\r\nDWORD WaitForSingleObject(\r\n　HANDLE hHandle, // 等待对象的句柄\r\n　DWORD dwMilliseconds // 等待毫秒数，INFINITE表示无限等待\r\n);\r\n//如果要等待多个信号可以使用WaitForMutipleObject函数\r\n*/</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edef8844737894-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edef8844737894-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-1\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-e\">CreateEvent</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-2\">　<span class=\"crayon-e\">LPSECURITY_ATTRIBUTES </span><span class=\"crayon-v\">lpEventAttributes</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 安全属性结构指针，可为NULL；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-3\">　<span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bManualReset</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 手动清除信号标记，TRUE在WaitForSingleObject后必须手动//调用RetEvent清除信号。若为　FALSE则在WaitForSingleObject</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-4\">　<span class=\"crayon-c\">//后，系统自动清除事件信号；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-5\">　<span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bInitialState</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 初始状态，TRUE有信号，FALSE无信号；</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-6\">　<span class=\"crayon-e\">LPCTSTR </span><span class=\"crayon-v\">lpName</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 信号量的名称，字符数不可多于MAX_PATH；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-7\">　<span class=\"crayon-c\">//如果遇到同名的其他信号量函数就会失败，如果遇</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-8\">　<span class=\"crayon-c\">//到同类信号同名也要注意变化；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-9\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-11\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-e\">CreateMutex</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-12\">　<span class=\"crayon-e\">LPSECURITY_ATTRIBUTES </span><span class=\"crayon-v\">lpMutexAttributes</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 安全属性结构指针，可为NULL</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-13\">　<span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bInitialOwner</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 当前建立互斥量是否占有该互斥量TRUE表示占有，</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-14\">　<span class=\"crayon-c\">//这样其他线程就不能获得此互斥量也就无法进入由</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-15\">　<span class=\"crayon-c\">//该互斥量控制的临界区。FALSE表示不占有该互斥量 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-16\">　<span class=\"crayon-e\">LPCTSTR </span><span class=\"crayon-v\">lpName</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 信号量的名称，字符数不可多于MAX_PATH如果</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-17\">　<span class=\"crayon-c\">//遇到同名的其他信号量函数就会失败，</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-18\">　<span class=\"crayon-c\">//如果遇到同类信号同名也要注意变化；</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-19\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-20\"> </div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-21\"><span class=\"crayon-c\">//初始化临界区信号，使用前必须先初始化</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-22\"><span class=\"crayon-t\">VOID</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InitializeCriticalSection</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-23\">　<span class=\"crayon-e\">LPCRITICAL_SECTION </span><span class=\"crayon-v\">lpCriticalSection</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 临界区变量指针</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-24\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-26\"><span class=\"crayon-c\">//阻塞函数</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-27\"><span class=\"crayon-c\">//如果等待的信号量不可用，那么线程就会挂起，直到信号可用</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-28\"><span class=\"crayon-c\">//线程才会被唤醒，该函数会自动修改信号，如Event，线程被唤醒之后</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-29\"><span class=\"crayon-c\">//Event信号会变得无信号，Mutex、Semaphore等也会变。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-30\"><span class=\"crayon-e\">DWORD </span><span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-31\">　<span class=\"crayon-e\">HANDLE </span><span class=\"crayon-v\">hHandle</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 等待对象的句柄</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-32\">　<span class=\"crayon-e\">DWORD </span><span class=\"crayon-v\">dwMilliseconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 等待毫秒数，INFINITE表示无限等待</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-33\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edef8844737894-34\"><span class=\"crayon-c\">//如果要等待多个信号可以使用WaitForMutipleObject函数</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edef8844737894-35\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">/</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edefc210355627\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include \"stdafx.h\"\r\n#include \"stdlib.h\"\r\n#include \"memory.h\"\r\nHANDLE evtTerminate; //事件信号,标记是否所有子线程都执行完\r\n/*\r\n下面使用了三种控制方法，你可以注释其中两种，使用其中一种。\r\n注意修改时要连带修改临界区PrintResult里的相应控制语句\r\n*/\r\nHANDLE evtPrint; //事件信号,标记事件是否已发生\r\n//CRITICAL_SECTION csPrint; //临界区\r\n//HANDLE mtxPrint; //互斥信号,如有信号表明已经有线程进入临界区并拥有此信号\r\nstatic long ThreadCompleted = 0; \r\n/*用来标记四个子线程中已完成线程的个数,当一个子线程完成时就对ThreadCompleted进行加一操作, 要使用InterlockedIncrement(long* lpAddend)和InterlockedDecrement(long* lpAddend)进行加减操作*/</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edefc210355627-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edefc210355627-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edefc210355627-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edefc210355627-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edefc210355627-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edefc210355627-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edefc210355627-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edefc210355627-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edefc210355627-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edefc210355627-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edefc210355627-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edefc210355627-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edefc210355627-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edefc210355627-1\"><span class=\"crayon-p\">#include \"stdafx.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edefc210355627-2\"><span class=\"crayon-p\">#include \"stdlib.h\"</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edefc210355627-3\"><span class=\"crayon-p\">#include \"memory.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edefc210355627-4\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//事件信号,标记是否所有子线程都执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edefc210355627-5\"><span class=\"crayon-c\">/*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edefc210355627-6\"><span class=\"crayon-c\">下面使用了三种控制方法，你可以注释其中两种，使用其中一种。</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edefc210355627-7\"><span class=\"crayon-c\">注意修改时要连带修改临界区PrintResult里的相应控制语句</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edefc210355627-8\"><span class=\"crayon-c\">*/</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edefc210355627-9\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//事件信号,标记事件是否已发生</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edefc210355627-10\"><span class=\"crayon-c\">//CRITICAL_SECTION csPrint; //临界区</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edefc210355627-11\"><span class=\"crayon-c\">//HANDLE mtxPrint; //互斥信号,如有信号表明已经有线程进入临界区并拥有此信号</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edefc210355627-12\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edefc210355627-13\"><span class=\"crayon-c\">/*用来标记四个子线程中已完成线程的个数,当一个子线程完成时就对ThreadCompleted进行加一操作, 要使用InterlockedIncrement(long* lpAddend)和InterlockedDecrement(long* lpAddend)进行加减操作*/</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf00846958128\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//下面的结构是用于传送排序的数据给各个排序子线程\r\nstruct MySafeArray\r\n{\r\n　long* data;\r\n　int iLength;\r\n};</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf00846958128-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf00846958128-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf00846958128-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf00846958128-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf00846958128-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf00846958128-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf00846958128-1\"><span class=\"crayon-c\">//下面的结构是用于传送排序的数据给各个排序子线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf00846958128-2\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MySafeArray</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf00846958128-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf00846958128-4\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf00846958128-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf00846958128-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf03655008820\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//打印每一个线程的排序结果\r\nvoid PrintResult(long* Array, int iLength, const char* HeadStr = \"sort\");</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf03655008820-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf03655008820-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf03655008820-1\"><span class=\"crayon-c\">//打印每一个线程的排序结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf03655008820-2\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HeadStr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf06896022384\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//排序函数\r\nunsigned long __stdcall BubbleSort(void* theArray); //冒泡排序\r\nunsigned long __stdcall SelectSort(void* theArray); //选择排序\r\nunsigned long __stdcall HeapSort(void* theArray); //堆排序\r\nunsigned long __stdcall InsertSort(void* theArray); //插入排序</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf06896022384-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf06896022384-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf06896022384-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf06896022384-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf06896022384-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf06896022384-1\"><span class=\"crayon-c\">//排序函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf06896022384-2\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">BubbleSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//冒泡排序</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf06896022384-3\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">SelectSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//选择排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf06896022384-4\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">HeapSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//堆排序</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf06896022384-5\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//插入排序</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>以上四个函数的声明必须适合作为一个线程函数的必要条件才可以使用CreateThread建立一个线程。</p>\n<ol>\n<li>调用方法必须是__stdcall，即函数参数压栈顺序由右到左，而且由函数本身负责<br>\n栈的恢复, C和C++默认是__cdecl, 所以要显式声明是__stdcall</li>\n<li>返回值必须是unsigned long</li>\n<li>参数必须是一个32位值，如一个指针值或long类型</li>\n<li>如果函数是类成员函数，必须声明为static函数，在CreateThread时函数指针有特殊的写法。如下(函数是类CThreadTest的成员函数中)：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf0a846257711\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstatic unsigned long _stdcall MyThreadFun(void* pParam);\r\nhandleRet = CreateThread(NULL, 0, &amp;CThreadTestDlg::MyThreadFun, NULL, 0, &amp;ThreadID);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0a846257711-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0a846257711-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf0a846257711-1\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_stdcall </span><span class=\"crayon-e\">MyThreadFun</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0a846257711-2\"><span class=\"crayon-v\">handleRet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">CThreadTestDlg</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">MyThreadFun</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadID</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<br>\n之所以要声明为static是由于，该函数必须要独立于对象实例来使用，即使没有声明实例也可以使用。</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf0d173457042\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint QuickSort(long* Array, int iLow, int iHigh); //快速排序\r\n\r\nint main(int argc, char* argv[])\r\n{\r\n　long data[] = {123,34,546,754,34,74,3,56};\r\n　int iDataLen = 8;\r\n　//为了对各个子线程分别对原始数据进行排序和保存排序结果\r\n　//分别分配内存对data数组的数据进行复制\r\n　long *data1, *data2, *data3, *data4, *data5;\r\n　MySafeArray StructData1, StructData2, StructData3, StructData4;\r\n　data1 = new long[iDataLen];\r\n　memcpy(data1, data, iDataLen &lt;&lt; 2); //把data中的数据复制到data1中\r\n　//内存复制 memcpy(目标内存指针, 源内存指针, 复制字节数), 因为long的长度\r\n　//为4字节,所以复制的字节数为iDataLen &lt;&lt; 2, 即等于iDataLen*4\r\n　StructData1.data = data1;\r\n　StructData1.iLength = iDataLen;\r\n　data2 = new long[iDataLen];\r\n　memcpy(data2, data, iDataLen &lt;&lt; 2);\r\n　StructData2.data = data2;\r\n　StructData2.iLength = iDataLen;\r\n　data3 = new long[iDataLen];\r\n　memcpy(data3, data, iDataLen &lt;&lt; 2);\r\n　StructData3.data = data3;\r\n　StructData3.iLength = iDataLen;\r\n　data4 = new long[iDataLen];\r\n　memcpy(data4, data, iDataLen &lt;&lt; 2);\r\n　StructData4.data = data4;\r\n　StructData4.iLength = iDataLen;\r\n　data5 = new long[iDataLen];\r\n　memcpy(data5, data, iDataLen &lt;&lt; 2);\r\n　unsigned long TID1, TID2, TID3, TID4; \r\n　//对信号量进行初始化\r\n　evtTerminate = CreateEvent(NULL, FALSE, FALSE, \"Terminate\");\r\n　evtPrint = CreateEvent(NULL, FALSE, TRUE, \"PrintResult\");\r\n　//分别建立各个子线程\r\n　CreateThread(NULL, 0, &amp;BubbleSort, &amp;StructData1, NULL, &amp;TID1);\r\n　CreateThread(NULL, 0, &amp;SelectSort, &amp;StructData2, NULL, &amp;TID2);\r\n　CreateThread(NULL, 0, &amp;HeapSort, &amp;StructData3, NULL, &amp;TID3);\r\n　CreateThread(NULL, 0, &amp;InsertSort, &amp;StructData4, NULL, &amp;TID4);\r\n　//在主线程中执行行快速排序，其他排序在子线程中执行 \r\n　QuickSort(data5, 0, iDataLen - 1);\r\n　PrintResult(data5, iDataLen, \"Quick Sort\");\r\n　WaitForSingleObject(evtTerminate, INFINITE); //等待所有的子线程结束\r\n　//所有的子线程结束后，主线程才可以结束\r\n　delete[] data1;\r\n　delete[] data2;\r\n　delete[] data3;\r\n　delete[] data4;\r\n　CloseHandle(evtPrint);\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf0d173457042-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf0d173457042-51\">51</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//快速排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-3\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argc</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argv</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-5\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">123</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">34</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">546</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">754</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">34</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">74</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">56</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-6\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-7\">　<span class=\"crayon-c\">//为了对各个子线程分别对原始数据进行排序和保存排序结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-8\">　<span class=\"crayon-c\">//分别分配内存对data数组的数据进行复制</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-9\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-10\">　<span class=\"crayon-e\">MySafeArray </span><span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-11\">　<span class=\"crayon-v\">data1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-12\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把data中的数据复制到data1中</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-13\">　<span class=\"crayon-c\">//内存复制 memcpy(目标内存指针, 源内存指针, 复制字节数), 因为long的长度</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-14\">　<span class=\"crayon-c\">//为4字节,所以复制的字节数为iDataLen &lt;&lt; 2, 即等于iDataLen*4</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-15\">　<span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-16\">　<span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-17\">　<span class=\"crayon-v\">data2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-18\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-19\">　<span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-20\">　<span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-21\">　<span class=\"crayon-v\">data3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-22\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-23\">　<span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-24\">　<span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-25\">　<span class=\"crayon-v\">data4</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-26\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-27\">　<span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-28\">　<span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-29\">　<span class=\"crayon-v\">data5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-30\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-31\">　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-32\">　<span class=\"crayon-c\">//对信号量进行初始化</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-33\">　<span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CreateEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Terminate\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-34\">　<span class=\"crayon-v\">evtPrint</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CreateEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">TRUE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"PrintResult\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-35\">　<span class=\"crayon-c\">//分别建立各个子线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-36\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">BubbleSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-37\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">SelectSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-38\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">HeapSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-39\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">InsertSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-40\">　<span class=\"crayon-c\">//在主线程中执行行快速排序，其他排序在子线程中执行 </span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-41\">　<span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-42\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Quick Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-43\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//等待所有的子线程结束</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-44\">　<span class=\"crayon-c\">//所有的子线程结束后，主线程才可以结束</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-45\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-46\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-47\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-48\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-49\">　<span class=\"crayon-e\">CloseHandle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf0d173457042-50\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf0d173457042-51\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0108 seconds] -->\r\n<p>冒泡排序思想(升序，降序同理，后面的算法一样都是升序):从头到尾对数据进行两两比较进行交换,小的放前大的放后。这样一次下来，最大的元素就会被交换的最后，然后下一次<br>\n循环就不用对最后一个元素进行比较交换了，所以呢每一次比较交换的次数都比上一次循环的次数少一，这样N次之后数据就变得升序排列了</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf12667399554\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall BubbleSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　int i, j=0;\r\n　long swap;\r\n　for (i = iLength-1; i &gt;0; i--)\r\n　{\r\n　　for(j = 0; j &lt; i; j++)\r\n　　{\r\n　　　if(Array[j] &gt;Array[j+1]) //前比后大，交换\r\n　　　{\r\n　　　　swap = Array[j];\r\n　　　　Array[j] = Array[j+1];\r\n　　　　Array[j+1] = swap;\r\n　　　}\r\n　　}\r\n　}\r\n　PrintResult(Array, iLength, \"Bubble Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate); //检查是否其他线程都已执行完\r\n　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf12667399554-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf12667399554-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">BubbleSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-6\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-8\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-9\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-10\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-11\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//前比后大，交换</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-12\">　　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-13\">　　　　<span class=\"crayon-v\">swap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-14\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-15\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-16\">　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-17\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-18\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-19\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Bubble Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-20\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-21\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-22\">　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf12667399554-23\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf12667399554-24\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p>选择排序思想:每一次都从无序的数据中找出最小的元素，然后和前面已经有序的元素序列的后一个元素进行交换，这样整个源序列就会分成两部分，前面一部分是已经排好序的有序序列，后面一部分是无序的，用于选出最小的元素。循环N次之后，前面的有序序列加长到跟源序列一样长，后面的无序部分长度变为0，排序就完成了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf17312177224\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall SelectSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　long lMin, lSwap;\r\n　int i, j, iMinPos;\r\n　for(i=0; i &lt; iLength-1; i++)\r\n　{\r\n　　lMin = Array[i];\r\n　　iMinPos = i;\r\n　　for(j=i + 1; j &lt;= iLength-1; j++) //从无序的元素中找出最小的元素\r\n　　{\r\n　　　if(Array[j] &lt; lMin)\r\n　　　{\r\n　　　　iMinPos = j;\r\n　　　　lMin = Array[j];\r\n　　　}\r\n　　}\r\n　　//把选出的元素交换拼接到有序序列的最后\r\n　　lSwap = Array[i];\r\n　　Array[i] = Array[iMinPos];\r\n　　Array[iMinPos] = lSwap;\r\n　}\r\n　PrintResult(Array, iLength, \"Select Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate);//检查是否其他线程都已执行完\r\n　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf17312177224-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf17312177224-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">SelectSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-5\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lMin</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lSwap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-6\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iMinPos</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-8\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-9\">　　<span class=\"crayon-v\">lMin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-10\">　　<span class=\"crayon-v\">iMinPos</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-11\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//从无序的元素中找出最小的元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-12\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-13\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lMin</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-14\">　　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-15\">　　　　<span class=\"crayon-v\">iMinPos</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-16\">　　　　<span class=\"crayon-v\">lMin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-17\">　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-18\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-19\">　　<span class=\"crayon-c\">//把选出的元素交换拼接到有序序列的最后</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-20\">　　<span class=\"crayon-v\">lSwap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-21\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iMinPos</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-22\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iMinPos</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lSwap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-23\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-24\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Select Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-25\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-26\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-27\">　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf17312177224-28\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf17312177224-29\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p>堆排序思想：堆：数据元素从1到N排列成一棵二叉树，而且这棵树的每一个子树的根都是该树中的元素的最小或最大的元素这样如果一个无序数据集合是一个堆那么，根元素就是最小或最大的元素堆排序就是不断对剩下的数据建堆，把最小或最大的元素析透出来。下面的算法，就是从最后一个元素开始，依据一个节点比父节点数值大的原则对所有元素进行调整，这样调整一次就形成一个堆，第一个元素就是最小的元素。然后再对剩下的无序数据再进行建堆，注意这时后面的无序数据元素的序数都要改变，如第一次建堆后，第二个元素就会变成堆的第一个元素。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf1b708543777\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall HeapSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　int i, j, p;\r\n　long swap;\r\n　for(i=0; i　{\r\n　　for(j = iLength - 1; j&gt;i; j--) //从最后倒数上去比较字节点和父节点\r\n　　{\r\n　　　p = (j - i - 1)/2 + i; //计算父节点数组下标\r\n　　　//注意到树节点序数跟数组下标不是等同的，因为建堆的元素个数逐个递减\r\n　　　if(Array[j] &lt; Array[p]) //如果父节点数值大则交换父节点和字节点\r\n　　　{\r\n　　　　swap = Array[j];\r\n　　　　Array[j] = Array[p];\r\n　　　　Array[p] = swap;\r\n　　　}\r\n　　}\r\n　}\r\n　PrintResult(Array, iLength, \"Heap Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate); //检查是否其他线程都已执行完\r\n　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf1b708543777-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf1b708543777-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">HeapSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-6\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">i</span>　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-8\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//从最后倒数上去比较字节点和父节点</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-9\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-10\">　　　<span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//计算父节点数组下标</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-11\">　　　<span class=\"crayon-c\">//注意到树节点序数跟数组下标不是等同的，因为建堆的元素个数逐个递减</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-12\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//如果父节点数值大则交换父节点和字节点</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-13\">　　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-14\">　　　　<span class=\"crayon-v\">swap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-15\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-16\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-17\">　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-18\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-19\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-20\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Heap Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-21\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-22\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-23\">　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf1b708543777-24\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf1b708543777-25\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0047 seconds] -->\r\n<p>插入排序思想：把源数据序列看成两半，前面一半是有序的，后面一半是无序的，把无序的数据从头到尾逐个逐个的插入到前面的有序数据中，使得有序的数据的个数不断增大，同时无序的数据个数就越来越少，最后所有元素都会变得有序。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf20011022982\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall InsertSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　int i=1, j=0;\r\n　long temp;\r\n　for(i=1; i　{\r\n　　temp = Array[i]; //取出序列后面无序数据的第一个元素值\r\n　　for(j=i; j&gt;0; j--) //和前面的有序数据逐个进行比较找出合适的插入位置\r\n　　{\r\n　　　if(Array[j - 1] &gt;temp) //如果该元素比插入值大则后移\r\n　　　　Array[j] = Array[j - 1];\r\n　　　else //如果该元素比插入值小，那么该位置的后一位就是插入元素的位置\r\n　　　　break; \r\n　　}\r\n　　Array[j] = temp;\r\n　}\r\n　PrintResult(Array, iLength, \"Insert Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate); //检查是否其他线程都已执行完\r\n　　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf20011022982-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf20011022982-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-6\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">i</span>　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-8\">　　<span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//取出序列后面无序数据的第一个元素值</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-9\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//和前面的有序数据逐个进行比较找出合适的插入位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-10\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-11\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//如果该元素比插入值大则后移</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-12\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-13\">　　　<span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//如果该元素比插入值小，那么该位置的后一位就是插入元素的位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-14\">　　　　<span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-15\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-16\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-17\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-18\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Insert Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-19\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-20\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-21\">　　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf20011022982-22\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf20011022982-23\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>快速排序思想：快速排序是分治思想的一种应用，它先选取一个支点，然后把小于支点的元素交换到支点的前边，把大于支点的元素交换到支点的右边。然后再对支点左边部分和右边部分进行同样的处理，这样若干次之后，数据就会变得有序。下面的实现使用了递归建立两个游标：iLow，iHigh；iLow指向序列的第一个元素，iHigh指向最后一个先选第一个元素作为支点，并把它的值存贮在一个辅助变量里。那么第一个位置就变为空并可以放置其他的元素。 这样从iHigh指向的元素开始向前移动游标，iHigh查找比支点小的元素，如果找到，则把它放置到空置了的位置（现在是第一个位置），然后iHigh游标停止移动，这时iHigh指向的位置被空置，然后移动iLow游标寻找比支点大的元素放置到iHigh指向的空置的位置，如此往复直到iLow与iHigh相等。最后使用递归对左右两部分进行同样处理</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a76edf25887255575\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint QuickSort(long* Array, int iLow, int iHigh)\r\n{\r\n　if(iLow &gt;= iHigh) return 1; //递归结束条件\r\n　long pivot = Array[iLow];\r\n　int iLowSaved = iLow, iHighSaved = iHigh; //保未改变的iLow，iHigh值保存起来\r\n　while (iLow &lt; iHigh)\r\n　{\r\n　　while (Array[iHigh] &gt;= pivot &amp;&amp; iHigh &gt;iLow) //寻找比支点大的元素\r\n　　　iHigh -- ;\r\n　　Array[iLow] = Array[iHigh]; //把找到的元素放置到空置的位置\r\n　　while (Array[iLow] &lt; pivot &amp;&amp; iLow &lt; iHigh) //寻找比支点小的元素\r\n　　　iLow ++ ;\r\n　　Array[iHigh] = Array[iLow]; //把找到的元素放置到空置的位置\r\n　}\r\n　Array[iLow] = pivot; //把支点值放置到支点位置，这时支点位置是空置的\r\n　//对左右部分分别进行递归处理\r\n　QuickSort(Array, iLowSaved, iHigh-1);\r\n　QuickSort(Array, iLow+1, iHighSaved);\r\n　return 0;\r\n}\r\n\r\n//每一个线程都要使用这个函数进行输出，而且只有一个显示器，产生多个线程\r\n//竞争对控制台的使用权。\r\nvoid PrintResult(long* Array, int iLength, const char* HeadStr)\r\n{\r\n　WaitForSingleObject(evtPrint, INFINITE); //等待事件有信号\r\n　//EnterCriticalSection(&amp;csPrint); //标记有线程进入临界区\r\n　//WaitForSingleObject(mtxPrint, INFINITE); //等待互斥量空置（没有线程拥有它）\r\n　int i;\r\n　printf(\"%s: \", HeadStr);\r\n　for (i=0; i　{\r\n　　printf(\"%d,\", Array[i]);\r\n　　Sleep(100); //延时（可以去掉）\r\n/*只是使得多线程对临界区访问的问题比较容易看得到\r\n如果你把临界控制的语句注释掉，输出就会变得很凌乱，各个排序的结果会\r\n分插间隔着输出，如果不延时就不容易看到这种不对临界区控制的结果\r\n*/\r\n　}\r\n　printf(\"%d\\n\", Array[i]);\r\n　SetEvent(evtPrint); //把事件信号量恢复，变为有信号\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a76edf25887255575-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a294a76edf25887255575-41\">41</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-3\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//递归结束条件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-4\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLowSaved</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHighSaved</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//保未改变的iLow，iHigh值保存起来</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-6\">　<span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-7\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-8\">　　<span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//寻找比支点大的元素</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-9\">　　　<span class=\"crayon-v\">iHigh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-10\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把找到的元素放置到空置的位置</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-11\">　　<span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//寻找比支点小的元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-12\">　　　<span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-13\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把找到的元素放置到空置的位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-14\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-15\">　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把支点值放置到支点位置，这时支点位置是空置的</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-16\">　<span class=\"crayon-c\">//对左右部分分别进行递归处理</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-17\">　<span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLowSaved</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-18\">　<span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHighSaved</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-19\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-20\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-22\"><span class=\"crayon-c\">//每一个线程都要使用这个函数进行输出，而且只有一个显示器，产生多个线程</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-23\"><span class=\"crayon-c\">//竞争对控制台的使用权。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-24\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HeadStr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-25\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-26\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//等待事件有信号</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-27\">　<span class=\"crayon-c\">//EnterCriticalSection(&amp;csPrint); //标记有线程进入临界区</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-28\">　<span class=\"crayon-c\">//WaitForSingleObject(mtxPrint, INFINITE); //等待互斥量空置（没有线程拥有它）</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-29\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-30\">　<span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%s: \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HeadStr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-31\">　<span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">i</span>　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-32\">　　<span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d,\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-33\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//延时（可以去掉）</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-34\"><span class=\"crayon-c\">/*只是使得多线程对临界区访问的问题比较容易看得到</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-35\"><span class=\"crayon-c\">如果你把临界控制的语句注释掉，输出就会变得很凌乱，各个排序的结果会</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-36\"><span class=\"crayon-c\">分插间隔着输出，如果不延时就不容易看到这种不对临界区控制的结果</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-37\"><span class=\"crayon-c\">*/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-38\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-39\">　<span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d\\n\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a76edf25887255575-40\">　<span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把事件信号量恢复，变为有信号</span></div><div class=\"crayon-line\" id=\"crayon-5a294a76edf25887255575-41\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p></p>\n<h1>四、 小结</h1>\n<p>对复杂的应用程序来说，线程的应用给应用程序提供了高效、快速、安全的数据处理能力。本实例讲述了线程处理中经常遇到的问题，希望对读者朋友有一定的帮助，起到抛砖引玉的作用。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113186\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113186votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113186\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "C/C++,多线程", "front_image_path": "full/b7ccda3a3b2f793882325f528f2211d69c7b4f95.jpg"}
{"url_object_id": "876ee85ca3eab93b154bc72080cb1d99", "title": "如何判断 Linux 服务器是否被入侵？", "url": "http://blog.jobbole.com/113205/", "create_date": "2017/12/06", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/05/1389f92e6bd3378cb6e4522971b7db35.jpg"], "praise_nums": "1", "fav_nums": 4, "comment_nums": 2, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://bash-prompt.net/guides/server-hacked/\">Elliot Cooper</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9116-1.html\">Linux中国/DarkSun</a>   </div><p>本指南中所谓的服务器被入侵或者说被黑了的意思，是指未经授权的人或程序为了自己的目的登录到服务器上去并使用其计算资源，通常会产生不好的影响。</p>\n<p>免责声明：若你的服务器被类似 NSA 这样的国家机关或者某个犯罪集团入侵，那么你并不会注意到有任何问题，这些技术也无法发觉他们的存在。</p>\n<p>然而，大多数被攻破的服务器都是被类似自动攻击程序这样的程序或者类似“脚本小子”这样的廉价攻击者，以及蠢蛋罪犯所入侵的。</p>\n<p>这类攻击者会在访问服务器的同时滥用服务器资源，并且不怎么会采取措施来隐藏他们正在做的事情。</p>\n<h3 id=\"toc_1\">被入侵服务器的症状</h3>\n<p>当服务器被没有经验攻击者或者自动攻击程序入侵了的话，他们往往会消耗 100% 的资源。他们可能消耗 CPU 资源来进行数字货币的采矿或者发送垃圾邮件，也可能消耗带宽来发动 DoS 攻击。</p>\n<p>因此出现问题的第一个表现就是服务器 “变慢了”。这可能表现在网站的页面打开的很慢，或者电子邮件要花很长时间才能发送出去。</p>\n<p>那么你应该查看那些东西呢?</p>\n<h4 id=\"toc_2\">检查 1 – 当前都有谁在登录?</h4>\n<p>你首先要查看当前都有谁登录在服务器上。发现攻击者登录到服务器上进行操作并不复杂。</p>\n<p>其对应的命令是 <code>w</code>。运行 <code>w</code> 会输出如下结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a3feffab363698052\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n 08:32:55 up 98 days,  5:43,  2 users,  load average: 0.05, 0.03, 0.00\r\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\r\nroot     pts/0    113.174.161.1    08:26    0.00s  0.03s  0.02s ssh root@coopeaa12\r\nroot     pts/1    78.31.109.1      08:26    0.00s  0.01s  0.00s w\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffab363698052-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffab363698052-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffab363698052-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffab363698052-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffab363698052-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a3feffab363698052-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">98</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">users</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.05</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffab363698052-2\"><span class=\"crayon-e\">USER     </span><span class=\"crayon-e\">TTY      </span><span class=\"crayon-e\">FROM             </span><span class=\"crayon-v\">LOGIN</span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">IDLE   </span><span class=\"crayon-e\">JCPU   </span><span class=\"crayon-e\">PCPU </span><span class=\"crayon-e\">WHAT</span></div><div class=\"crayon-line\" id=\"crayon-5a294a3feffab363698052-3\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">113.174.161.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.03s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ssh </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">coopeaa12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffab363698052-4\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">78.31.109.1</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">w</span></div><div class=\"crayon-line\" id=\"crayon-5a294a3feffab363698052-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>第一个 IP 是英国 IP，而第二个 IP 是越南 IP。这个不是个好兆头。</p>\n<p>停下来做个深呼吸, 不要恐慌之下只是干掉他们的 SSH 连接。除非你能够防止他们再次进入服务器，否则他们会很快进来并踢掉你，以防你再次回去。</p>\n<p>请参阅本文最后的“被入侵之后怎么办”这一章节来看找到了被入侵的证据后应该怎么办。</p>\n<p><code>whois</code> 命令可以接一个 IP 地址然后告诉你该 IP 所注册的组织的所有信息，当然就包括所在国家的信息。</p>\n<h4 id=\"toc_3\">检查 2 – 谁曾经登录过?</h4>\n<p>Linux 服务器会记录下哪些用户，从哪个 IP，在什么时候登录的以及登录了多长时间这些信息。使用 <code>last</code> 命令可以查看这些信息。</p>\n<p>输出类似这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a3feffb7509278295\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot     pts/1        78.31.109.1      Thu Nov 30 08:26   still logged in\r\nroot     pts/0        113.174.161.1    Thu Nov 30 08:26   still logged in\r\nroot     pts/1        78.31.109.1      Thu Nov 30 08:24 - 08:26  (00:01)\r\nroot     pts/0        113.174.161.1    Wed Nov 29 12:34 - 12:52  (00:18)\r\nroot     pts/0        14.176.196.1     Mon Nov 27 13:32 - 13:53  (00:21)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffb7509278295-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffb7509278295-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffb7509278295-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffb7509278295-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffb7509278295-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffb7509278295-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a3feffb7509278295-1\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">78.31.109.1</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">still </span><span class=\"crayon-e\">logged </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffb7509278295-2\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">113.174.161.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">still </span><span class=\"crayon-e\">logged </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line\" id=\"crayon-5a294a3feffb7509278295-3\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">78.31.109.1</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffb7509278295-4\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">113.174.161.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Wed </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">52</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a3feffb7509278295-5\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">14.176.196.1</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Mon </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">53</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffb7509278295-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>这里可以看到英国 IP 和越南 IP 交替出现，而且最上面两个 IP 现在还处于登录状态。如果你看到任何未经授权的 IP，那么请参阅最后章节。</p>\n<p>登录后的历史记录会记录到二进制的 <code>/var/log/wtmp</code> 文件中（LCTT 译注：这里作者应该写错了，根据实际情况修改），因此很容易被删除。通常攻击者会直接把这个文件删掉，以掩盖他们的攻击行为。 因此, 若你运行了 <code>last</code> 命令却只看得见你的当前登录，那么这就是个不妙的信号。</p>\n<p>如果没有登录历史的话，请一定小心，继续留意入侵的其他线索。</p>\n<h4 id=\"toc_4\">检查 3 – 回顾命令历史</h4>\n<p>这个层次的攻击者通常不会注意掩盖命令的历史记录，因此运行 <code>history</code> 命令会显示出他们曾经做过的所有事情。 一定留意有没有用 <code>wget</code> 或 <code>curl</code> 命令来下载类似垃圾邮件机器人或者挖矿程序之类的非常规软件。</p>\n<p>命令历史存储在 <code>~/.bash_history</code> 文件中，因此有些攻击者会删除该文件以掩盖他们的所作所为。跟登录历史一样，若你运行 <code>history</code> 命令却没有输出任何东西那就表示历史文件被删掉了。这也是个不妙的信号，你需要很小心地检查一下服务器了。（LCTT 译注，如果没有命令历史，也有可能是你的配置错误。）</p>\n<h4 id=\"toc_5\">检查 4 – 哪些进程在消耗 CPU？</h4>\n<p>你常遇到的这类攻击者通常不怎么会去掩盖他们做的事情。他们会运行一些特别消耗 CPU 的进程。这就很容易发现这些进程了。只需要运行 <code>top</code> 然后看最前的那几个进程就行了。</p>\n<p>这也能显示出那些未登录进来的攻击者。比如，可能有人在用未受保护的邮件脚本来发送垃圾邮件。</p>\n<p>如果你最上面的进程对不了解，那么你可以 Google 一下进程名称，或者通过 <code>losf</code> 和 <code>strace</code> 来看看它做的事情是什么。</p>\n<p>使用这些工具，第一步从 <code>top</code> 中拷贝出进程的 PID，然后运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a3feffbd444836017\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstrace -p PID\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffbd444836017-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffbd444836017-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a3feffbd444836017-1\"><span class=\"crayon-v\">strace</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffbd444836017-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这会显示出该进程调用的所有系统调用。它产生的内容会很多，但这些信息能告诉你这个进程在做什么。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a3feffc1757266485\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlsof  -p PID\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffc1757266485-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffc1757266485-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a3feffc1757266485-1\"><span class=\"crayon-v\">lsof</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffc1757266485-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这个程序会列出该进程打开的文件。通过查看它访问的文件可以很好的理解它在做的事情。</p>\n<h4 id=\"toc_6\">检查 5 – 检查所有的系统进程</h4>\n<p>消耗 CPU 不严重的未授权进程可能不会在 <code>top</code> 中显露出来，不过它依然可以通过 <code>ps</code> 列出来。命令 <code>ps auxf</code> 就能显示足够清晰的信息了。</p>\n<p>你需要检查一下每个不认识的进程。经常运行 <code>ps</code> （这是个好习惯）能帮助你发现奇怪的进程。</p>\n<h4 id=\"toc_7\">检查 6 – 检查进程的网络使用情况</h4>\n<p><code>iftop</code> 的功能类似 <code>top</code>，它会排列显示收发网络数据的进程以及它们的源地址和目的地址。类似 DoS 攻击或垃圾机器人这样的进程很容易显示在列表的最顶端。</p>\n<h4 id=\"toc_8\">检查 7 – 哪些进程在监听网络连接?</h4>\n<p>通常攻击者会安装一个后门程序专门监听网络端口接受指令。该进程等待期间是不会消耗 CPU 和带宽的，因此也就不容易通过 <code>top</code> 之类的命令发现。</p>\n<p><code>lsof</code> 和 <code>netstat</code> 命令都会列出所有的联网进程。我通常会让它们带上下面这些参数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a3feffc5373020315\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlsof -i\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffc5373020315-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffc5373020315-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a3feffc5373020315-1\"><span class=\"crayon-v\">lsof</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffc5373020315-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a3feffc8406079628\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnetstat -plunt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a3feffc8406079628-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a3feffc8406079628-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a3feffc8406079628-1\"><span class=\"crayon-v\">netstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">plunt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a3feffc8406079628-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>你需要留意那些处于 <code>LISTEN</code> 和 <code>ESTABLISHED</code> 状态的进程，这些进程要么正在等待连接（LISTEN），要么已经连接（ESTABLISHED）。如果遇到不认识的进程，使用 <code>strace</code> 和 <code>lsof</code> 来看看它们在做什么东西。</p>\n<h3 id=\"toc_9\">被入侵之后该怎么办呢?</h3>\n<p>首先，不要紧张，尤其当攻击者正处于登录状态时更不能紧张。<strong>你需要在攻击者警觉到你已经发现他之前夺回机器的控制权。</strong>如果他发现你已经发觉到他了，那么他可能会锁死你不让你登陆服务器，然后开始毁尸灭迹。</p>\n<p>如果你技术不太好那么就直接关机吧。你可以在服务器上运行 <code>shutdown -h now</code> 或者 <code>systemctl poweroff</code> 这两条命令之一。也可以登录主机提供商的控制面板中关闭服务器。关机后，你就可以开始配置防火墙或者咨询一下供应商的意见。</p>\n<p>如果你对自己颇有自信，而你的主机提供商也有提供上游防火墙，那么你只需要以此创建并启用下面两条规则就行了：</p>\n<ol>\n<li>只允许从你的 IP 地址登录 SSH。</li>\n<li>封禁除此之外的任何东西，不仅仅是 SSH，还包括任何端口上的任何协议。</li>\n</ol>\n<p>这样会立即关闭攻击者的 SSH 会话，而只留下你可以访问服务器。</p>\n<p>如果你无法访问上游防火墙，那么你就需要在服务器本身创建并启用这些防火墙策略，然后在防火墙规则起效后使用 <code>kill</code> 命令关闭攻击者的 SSH 会话。（LCTT 译注：本地防火墙规则 有可能不会阻止已经建立的 SSH 会话，所以保险起见，你需要手工杀死该会话。）</p>\n<p>最后还有一种方法，如果支持的话，就是通过诸如串行控制台之类的带外连接登录服务器，然后通过 <code>systemctl stop network.service</code> 停止网络功能。这会关闭所有服务器上的网络连接，这样你就可以慢慢的配置那些防火墙规则了。</p>\n<p>重夺服务器的控制权后，也不要以为就万事大吉了。</p>\n<p>不要试着修复这台服务器，然后接着用。你永远不知道攻击者做过什么，因此你也永远无法保证这台服务器还是安全的。</p>\n<p>最好的方法就是拷贝出所有的数据，然后重装系统。（LCTT 译注：你的程序这时已经不可信了，但是数据一般来说没问题。）</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113205\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113205votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113205\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "front_image_path": "full/0d4192df99abd0f294a9eade3688a9b7ce6caa0e.jpg"}
{"url_object_id": "3df441752a08d89bbdb7dfb4db4c0e45", "title": "如何自动唤醒和关闭 Linux", "url": "http://blog.jobbole.com/113203/", "create_date": "2017/12/06", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/8532c70a7858309142e35612babf5b09.png"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/11/wake-and-shut-down-linux-automatically\">Carla Schroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9115-1.html\">Linux中国/魑魅魍魉</a>   </div><blockquote><p>了解如何通过配置 Linux 计算机来根据时间自动唤醒和关闭。</p></blockquote>\n<p>不要成为一个电能浪费者。如果你的电脑不需要开机就请把它们关机。出于方便和计算机宅的考虑，你可以通过配置你的 Linux 计算机实现自动唤醒和关闭。</p>\n<h3 id=\"toc_1\">宝贵的系统运行时间</h3>\n<p>有时候有些电脑需要一直处在开机状态，在不超过电脑运行时间的限制下这种情况是被允许的。有些人为他们的计算机可以长时间的正常运行而感到自豪，且现在我们有内核热补丁能够实现只有在硬件发生故障时才需要机器关机。我认为比较实际可行的是，像减少移动部件磨损一样节省电能，且在不需要机器运行的情况下将其关机。比如，你可以在规定的时间内唤醒备份服务器，执行备份，然后关闭它直到它要进行下一次备份。或者，你可以设置你的互联网网关只在特定的时间运行。任何不需要一直运行的东西都可以将其配置成在其需要工作的时候打开，待其完成工作后将其关闭。</p>\n<h3 id=\"toc_2\">系统休眠</h3>\n<p>对于不需要一直运行的电脑，使用 root 的 cron 定时任务（即 <code>/etc/crontab</code>）可以可靠地关闭电脑。这个例子创建一个 root 定时任务实现每天晚上 11 点 15 分定时关机。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2958a7d18a3185566698\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# crontab -e -u root\r\n# m h  dom mon dow   command\r\n15 23 * * * /sbin/shutdown -h now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18a3185566698-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18a3185566698-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18a3185566698-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18a3185566698-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2958a7d18a3185566698-1\"><span class=\"crayon-p\"># crontab -e -u root</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18a3185566698-2\"><span class=\"crayon-p\"># m h  dom mon dow   command</span></div><div class=\"crayon-line\" id=\"crayon-5a2958a7d18a3185566698-3\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">shutdown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18a3185566698-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>以下示例仅在周一至周五运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2958a7d18ad859252908\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n15 23 * * 1-5 /sbin/shutdown -h now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18ad859252908-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18ad859252908-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2958a7d18ad859252908-1\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">shutdown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18ad859252908-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>您可以为不同的日期和时间创建多个 cron 作业。 通过命令 <code>man 5 crontab</code> 可以了解所有时间和日期的字段。</p>\n<p>一个快速、容易的方式是，使用 <code>/etc/crontab</code> 文件。但这样你必须指定用户：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2958a7d18b1781006649\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n15 23 * * 1-5 root shutdown -h now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18b1781006649-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18b1781006649-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2958a7d18b1781006649-1\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-v\">shutdown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18b1781006649-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">自动唤醒</h3>\n<p>实现自动唤醒是一件很酷的事情；我大多数 SUSE （SUSE Linux）的同事都在纽伦堡，因此，因此为了跟同事能有几小时一起工作的时间，我不得不需要在凌晨五点起床。我的计算机早上 5 点半自动开始工作，而我只需要将自己和咖啡拖到我的桌子上就可以开始工作了。按下电源按钮看起来好像并不是什么大事，但是在每天的那个时候每件小事都会变得很大。</p>\n<p>唤醒 Linux 计算机可能不如关闭它可靠，因此你可能需要尝试不同的办法。你可以使用远程唤醒（Wake-On-LAN）、RTC 唤醒或者个人电脑的 BIOS 设置预定的唤醒这些方式。这些方式可行的原因是，当你关闭电脑时，这并不是真正关闭了计算机；此时计算机处在极低功耗状态且还可以接受和响应信号。只有在你拔掉电源开关时其才彻底关闭。</p>\n<h3 id=\"toc_4\">BIOS 唤醒</h3>\n<p>BIOS 唤醒是最可靠的。我的系统主板 BIOS 有一个易于使用的唤醒调度程序 (图 1)。对你来说也是一样的容易。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/8532c70a7858309142e35612babf5b09.png\" alt=\"wakeup\"></p>\n<p style=\"text-align: center\"><em>图 1：我的系统 BIOS 有个易用的唤醒定时器。</em></p>\n<h3 id=\"toc_5\">主机远程唤醒（Wake-On-LAN）</h3>\n<p>远程唤醒是仅次于 BIOS 唤醒的又一种可靠的唤醒方法。这需要你从第二台计算机发送信号到所要打开的计算机。可以使用 Arduino 或树莓派Raspberry Pi发送给基于 Linux 的路由器或者任何 Linux 计算机的唤醒信号。首先，查看系统主板 BIOS 是否支持 Wake-On-LAN ，要是支持的话，必须先启动它，因为它被默认为禁用。</p>\n<p>然后，需要一个支持 Wake-On-LAN 的网卡；无线网卡并不支持。你需要运行 <code>ethtool</code> 命令查看网卡是否支持 Wake-On-LAN ：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2958a7d18b6098367059\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ethtool eth0 | grep -i wake-on\r\n        Supports Wake-on: pumbg\r\n        Wake-on: g\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18b6098367059-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18b6098367059-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18b6098367059-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18b6098367059-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2958a7d18b6098367059-1\"><span class=\"crayon-p\"># ethtool eth0 | grep -i wake-on</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18b6098367059-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Supports </span><span class=\"crayon-v\">Wake</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pumbg</span></div><div class=\"crayon-line\" id=\"crayon-5a2958a7d18b6098367059-3\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">Wake</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18b6098367059-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这条命令输出的 “Supports Wake-on” 字段会告诉你你的网卡现在开启了哪些功能：</p>\n<ul>\n<li>d — 禁用</li>\n<li>p — 物理活动唤醒</li>\n<li>u — 单播消息唤醒</li>\n<li>m — 多播（组播）消息唤醒</li>\n<li>b — 广播消息唤醒</li>\n<li>a — ARP 唤醒</li>\n<li>g — 特定数据包magic packet唤醒</li>\n<li>s — 设有密码的特定数据包magic packet唤醒</li>\n</ul>\n<p><code>ethtool</code> 命令的 man 手册并没说清楚 <code>p</code> 选项的作用；这表明任何信号都会导致唤醒。然而，在我的测试中它并没有这么做。想要实现远程唤醒主机，必须支持的功能是 <code>g</code> —— 特定数据包magic packet唤醒，而且下面的“Wake-on” 行显示这个功能已经在启用了。如果它没有被启用，你可以通过 <code>ethtool</code> 命令来启用它。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2958a7d18ba837098268\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ethtool -s eth0 wol g\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18ba837098268-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18ba837098268-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2958a7d18ba837098268-1\"><span class=\"crayon-p\"># ethtool -s eth0 wol g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18ba837098268-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这条命令可能会在重启后失效，所以为了确保万无一失，你可以创建个 root 用户的定时任务（cron）在每次重启的时候来执行这条命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2958a7d18bd464515498\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;a href=\"http://www.jobbole.com/members/wx1688837567\"&gt;@reboot&lt;/a&gt; /usr/bin/ethtool -s eth0 wol g\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18bd464515498-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18bd464515498-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2958a7d18bd464515498-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx1688837567\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">reboot</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ethtool</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">eth0 </span><span class=\"crayon-i\">wol</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18bd464515498-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>另一个选择是最近的网络管理器Network Manager版本有一个很好的小复选框来启用 Wake-On-LAN（图 2）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/484c151f9364dbf2b5e6e97c306ae643.png\" alt=\"wakeonlan\"></p>\n<p style=\"text-align: center\"><em>图 2：启用 Wake on LAN</em></p>\n<p>这里有一个可以用于设置密码的地方，但是如果你的网络接口不支持安全开机Secure On密码，它就不起作用。</p>\n<p>现在你需要配置第二台计算机来发送唤醒信号。你并不需要 root 权限，所以你可以为你的普通用户创建 cron 任务。你需要用到的是想要唤醒的机器的网络接口和MAC地址信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2958a7d18c1334678042\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n30 08 * * * /usr/bin/wakeonlan D0:50:99:82:E7:2B \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2958a7d18c1334678042-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2958a7d18c1334678042-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2958a7d18c1334678042-1\"><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">wakeonlan </span><span class=\"crayon-v\">D0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">99</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">82</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">E7</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2B</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2958a7d18c1334678042-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">RTC 唤醒</h3>\n<p>通过使用实时闹钟来唤醒计算机是最不可靠的方法。对于这个方法，可以参看 <a href=\"https://www.linux.com/learn/wake-linux-rtc-alarm-clock\">Wake Up Linux With an RTC Alarm Clock</a> ；对于现在的大多数发行版来说这种方法已经有点过时了。</p>\n<p>下周继续了解更多关于使用 RTC 唤醒的方法。</p>\n<p>通过 Linux 基金会和 edX 可以学习更多关于 Linux 的免费 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">Linux 入门</a>教程。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113203\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113203votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113203\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "front_image_path": "full/72efc180c69dbb1f32bcb55772e58d9f3b2d3bc1.jpg"}
{"url_object_id": "e7a6e5d4aa151c1ce783e4c76522d7ea", "title": "我问每个面试官的两个问题，把工程流程用到软件面试", "url": "http://blog.jobbole.com/113120/", "create_date": "2017/11/29", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3gy1flxwcxaj8fj20m80eqdij.jpg"], "praise_nums": "2", "fav_nums": 1, "comment_nums": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://blog.wesleyac.com/posts/two-interview-questions\">Wesley Aptekar</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>我最近一直在进行软件工程师面试。面试开始时，我都会问面试官两个问题，但至今没有得到令我满意的回答：</p>\n<blockquote><p>1. 你们面试的目的是什么？</p>\n<p>2. 如何评估你们的面试水平？</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1flxwcxaj8fj20m80eqdij.jpg\" width=\"690\" height=\"457\"></p>\n<h3>你们的面试目的是什么？</h3>\n<p>面试官的回答多种多样，只有极少数会说「其实我也不知道我们在寻找什么样的人」。他们大部分人的看法，在我看来，都属于以下几种：</p>\n<ol>\n<li>要找到“最出色的”人才；</li>\n<li>要搞清楚候选人是否适合公司；</li>\n<li>要评估候选人能多好地完成他们正在面试的工作<span style=\"color: #808080;\"><em>（这也比较罕见。注1：在我问的 11 家公司中，只有一家公司给出了接近的回答。）</em></span></li>\n</ol>\n<p>在我接受面试的公司中，只有不到 10% 说：他们进行面试是为了评估候选人<span style=\"color: #000000;\"><strong>如何有效地完成应聘的工作</strong>。</span></p>\n<p>在我看来这点很荒谬：“适合的”招聘策略以及招聘“最好的”人才，这两点筛选过滤掉了许多人才，但这是却基于面试官的偏见，而不是候选人的能力。</p>\n<p>如果你将评估候选人的工作能力看作是面试的重点，那么这也揭示了现在诸多技术面试的不足之处。我本人从未在面试中，接受过团队任务或优先级任务方面的能力评估，相对于在 O(n) 时间内找到回文词（anagram）这样的技术评估，这两项能力可能对软件工程师的工作<a href=\"http://arches.io/2016/01/hire-literally-anyone/\">更加重要</a>。</p>\n<h3>如何评估你们的面试水平？</h3>\n<p>面对我的这个问题，大多数公司的答案是“我们不评估”。<span style=\"color: #808080;\"><em>（注2：“没错，我们对自己的员工很满意，所以我要说，我们在招聘方面做得还不错”，这样的回答在我看来，其实并没有评估招聘过程是否有效。）</em></span></p>\n<p>如果你正在优化一个项目，而你的成功标准却是“我不知道（标准），但我做了一些改变，结果似乎看起来更好了，”相信我，走出房间后你一定会被人耻笑的。然而，这点在招聘过程中似乎是可以被接受的。尽管在创业初期，团队获得的口头承诺是特别重要的一部分，但大多数公司似乎都忽视了其招聘环节，几乎没有人将工程流程应用于招聘中。</p>\n<p>要将工程流程应用到招聘中，第一步是评估你目前拥有的员工，你可以问问自己：目前表现最好的员工是面试过程中表现最好的员工吗？如果不是，原因是什么？大多数公司都会进行绩效考核，也会保留当初面试的材料和相关数据，但很少会有公司将这些结合起来，以改进他们目前的面试过程。</p>\n<p>这样做总比什么都没做要好，但是你仍忽略了问题的另一半：那些你面试中过滤掉的人哪？</p>\n<p>人们常说，<a href=\"https://www.joelonsoftware.com/2006/10/25/the-guerrilla-guide-to-interviewing-version-30/\">拒绝一个好的候选人比招聘一个糟糕的候选人，承担的风险要更小</a>，但我不同意，在我看来它并没有道理。我经常听说，那些顶级公司缺少并渴求有才能的开发人员，而人才市场上却几乎找不到这类人，但也正是这些顶级公司，因为嫌弃候选人的学历或资历不足，或是没有通过白板测试等这个那个的原因，拒绝刷掉了一大批人，其中就有它们想要的人才。这听上去很讽刺，不是吗？即使你认为缩小（已经很小的）人才范围，仍比招错人的风险要小，你至少应该确保，一开始选定的范围是正确的。</p>\n<p>这是一个非常艰难的问题：如果你能获得一些信息，它们足以改变你对候选人最初的看法，那么你应该先雇佣他们。好吧，这是个悖论~ 但我们仍然可以尝试缓解这个问题：</p>\n<h5><strong>对现有员工进行面试</strong></h5>\n<p>如果你想改变面试流程，可以先在现有员工身上尝试。如果有人没有通过面试，你应该问问自己，是否应该要解雇他。当然，你可能不会这么做。</p>\n<p>我听说有一些公司是这么做的，但我认为，绝大多数公司都不会这样尝试。</p>\n<h5><strong>做一个“验证集”</strong></h5>\n<p>要确定认当前招聘策略是否有效的方法之一，就是深入了解一些被你拒绝的候选人，并判断拒绝他们是否是正确决定。</p>\n<blockquote class=\"twitter-tweet\"><p>我一直在 Twitter 上关注并追踪那些在面试中被我们 Pass 掉的候选人，结果证明我们几乎都错了。—— Pulltergeist (@trek) 写于 2016 年 1 月 26 日</p></blockquote>\n<p>但这存在一些问题：</p>\n<ol>\n<li>它对那些没有公共 Github/博客/Twitter 等（社交平台）的人不利。</li>\n<li>有许多候选人的<a href=\"https://blog.codinghorror.com/why-cant-programmers-program/\">编程能力非常糟糕</a>，而在面试过程中，要花更多的时间来发现这个问题。</li>\n</ol>\n<p>尽管依然存在着问题，但我认为它对一些公司来说仍是一个好策略，特别是那些申请者数量较少的公司。</p>\n<p>在现场面试中，这么做一定是可行的。简历则很难适用，因为存在着很多不合格的候选人，但我认为这个策略可能还是有用的。</p>\n<h3>结论</h3>\n<p>在面试过程中，大多数公司似乎都是盲目的。我发现，有些招聘人员和招聘经理甚至不知道他们在找什么样的人才，而且几乎没有人尝试更新和优化面试过程。</p>\n<p>在少数几个关注评估面试流程的公司中，大多数关注的是找到验证候选人好坏的方法，而不是改变现有的面试流程，让那些容易在“典型面试”中淘汰的优秀人才得以通过面试。（注3：Matasano 从那些在“传统面试”中淘汰的人才那里，吸取经验教训，获得了极大的成功。）</p>\n<p>如果你正在（作为面试官）为你的公司进行面试，我很乐意听到你的看法！如果你正在（作为候选人）接受面试，我强烈建议你向面试的公司提出这些问题，以此来看看它们对此的反应，这会非常具有启发性。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113120\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113120votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113120\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            I'm OUT, never IN.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 44</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,技术面试,面试", "front_image_path": "full/12b9aed2f37016dbd6259925e5ef6d316c6e0411.jpg"}
{"url_object_id": "fa24eafc29a7a991a5f4b675e3fe9aab", "title": "分布式、服务化的 ERP 系统架构设计", "url": "http://blog.jobbole.com/113174/", "create_date": "2017/12/07", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/03/architecture.jpg"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/liuche/p/7955462.html\">刘彻</a>   </div><p><strong>ERP</strong><strong>之痛</strong></p>\n<p>曾几何时，我混迹于电商、珠宝行业4年多，为这两个行业开发过两套大型业务系统（ERP）。作为一个ERP系统，系统主要功能模块无非是订单管理、商品管理、生产采购、仓库管理、物流管理、财务管理等等。作为一个管理系统，大家的一般开发习惯就是使用.Net或Java技术，建立一个单块（单进程）架构的应用，只有一个SQLServer或MySql数据库。然后在项目文件中分一下各个模块，三层结构方式组织代码编写开发。最后测试，交付上线。</p>\n<p>起初，因为数据量不大，系统性能还不错，各种列表查询，报表查询，Excel数据导出功能等用的都很流畅。但是随着公司业务发展，订单量日积月累，后期各种业务部门的报表查询、数据导出需求不断增多，我们渐渐就感觉系统运行越来越慢。于是我们可能最先想到的解决方案就是，优化系统瓶颈数据库这个大头。我们可能的一种尝试就是将数据库单独放置到一个服务器，实现数据库和应用程序分离，或者是建立各种数据库表索引，优化程序代码等方法。经过这样一番研究优化，系统某些功能可能性能的确大大提高，但是我们还是发现某些功能列表的数据查询导出依然很慢，或者随着数据量继续积累，原来较快的列表导出功能，也愈来愈变得缓慢了。我们用尽各种办法，最后也达不到理想的系统性能速度。</p>\n<p>为了提高系统性能，我们也许会主动学习一些互联网公司的技术经验，什么高并发、高性能、大数据、读写分离等方案，发现自己根本无从下手。我们会觉得因为系统业务特点不一样。ERP系统并发量不高，主要是业务复杂，各种业务耦合度远高于那些互联网应用，不好做拆分，数据查询逻辑要远比互联网系统复杂，一个列表页查询出来的数据，往往需要关联4、5张表才能得到结果。有些报表类的甚至更多。加上各种业务操作事务性、数据一致性要求很高，很多时候导致我们措不及手，无法进一步优化系统。</p>\n<p>曾几何时，我也被这样或那样的理由所挫败，认为ERP系统非常特殊，无药可救，可是后来。。。</p>\n<p>我现在已经不这么认为了，似乎有了新的解决方案O(∩_∩)O哈哈~</p>\n<p><strong>曙光乍现</strong></p>\n<p>在叙述具体方案前，先说下自己的想法。我首先觉得我们做ERP系统前，就得有当今互联网思维。我们不要再去做一个大一统的系统了。我们要分拆一个大系统，做成一个个小系统。然后通过系统接口让这些小系统相互通信。这样来组成一个大系统，具体来说就是“分布式”、“服务化”的互联网思维。让系统在架构设计上就是一个先天支持高度可扩展的系统。</p>\n<p>怎么做呢？具体来说就是要将订单管理、商品管理、生产采购、仓库管理、物流管理、财务管理拆分成一个个子系统。这些子系统可以单独设计开发，对外暴露出各种其他子系统需求的数据接口即可。每个子系统都有单独的数据库。甚至这些子系统可以交由不同的团队去开发和维护，使用不同的技术体系，使用不同的数据库。而不是再像以前那样，都集成在同一个大而全的系统中，一个大而全的数据库。</p>\n<p>对于新架构的系统他有什么优点呢？</p>\n<p>首先，也是最重要的就是解决系统的性能问题。以往数据库实例只有一个，没法扩展出多个实例，以便在性能受限的情况下依靠增加数据库实例来达到负载均衡。也许有人会说可以使用读写分离方案，但是因为ERP系统的特点，这个方案很多时候不现实。比如说操作库存的时候，你不能从读库里读库存，然后在写库里写入库存。因为主从复制会有时效性，写入的库存并不能马上写入从库。这样的场景在ERP中也有多处。何况写库不能扩展，只能有一个。而新设计方案是写库是分离的，每个子系统有自己的数据库。</p>\n<p>其次，就是更新非常方便，各个子系统以后台微服务的方式存在。前台一个单独的web项目，这个web项目调用后台这些子系统的服务接口。这样的设计，在某个业务子系统需要更新的时候，可以单独更新。不用像以前那种单进程架构时，一个小更新需要整个系统重启，导致用户会话也丢失，用户需要新登录。而现在的这种设计就不会有这个问题。</p>\n<p><strong>系统整体设计</strong></p>\n<p>系统物理部署视图</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/92662fec4eb3e86e81fbd23e062cef51.png\" alt=\"\" width=\"659\" height=\"534\"></p>\n<p><strong>详细设计</strong></p>\n<p><strong>   拆分应用层</strong></p>\n<p>拆分应用层，是践行“微服务”架构的理念。将原来大而全的单进程架构按照业务模块拆分成可独立部署的应用程序，以此来达到平滑系统更新、升级、方便负载扩展的目的。具体来说，技术上可以使用restfull风格的接口，也可以使用像java中dubbo框架方式来简化开发复杂度。ERPWeb端或其他移动端也是一个单独的应用充当表现层。非常薄，只是简单的接受参数，调取后台其他各种微服务程序的接口获取所需展示的数据。微服务充当业务逻辑层，每个微服务都是可独立部署上线的程序，对外提供数据访问接口。</p>\n<p>微服务可以使用流行的各种RPC框架，比如dubbo，可以支持多种调用协议Http、TCP等，这些框架使得编码比较容易，框架封装底层数据通信细节，使得客户端执行远程方法如同执行本地方法一样简单。</p>\n<p>dubbo微服务架构，还支持服务治理，负载均衡等功能。这样不仅可以提高系统的可用性，还能动态提升系统应用层的性能。比如仓库管理中入库业务非常繁忙，占用非常多的CPU和内存资源，我们可以另外加一台机器，单独再部署一个仓库管理服务上去。这样使得整个系统，有两个仓库管理服务在同时工作，平衡负载。而这一切都是在服务注册中心，比如Zookeeper下自动完成的。</p>\n<p>微服务结构，天生很好的支持系统更新升级操作。比如财务模块有个新需求需要上线，我们只需要替换财务模块的服务重启即可。这对已经登录系统的用户来说，没有多少影响，不用重新登陆系统，其他模块服务使用也不受影响。</p>\n<p><strong>    拆分数据层</strong></p>\n<p>数据库瓶颈是ERP系统的永久之伤。大量复杂的数据查询表连接逻辑充斥着整个系统。数据库垂直拆分成功的关键就是如何重新设计系统数据层各个模块相互耦合的问题。能解决这个问题，永久之伤便可以解决了。</p>\n<p>我们先来看一个典型数据层模块耦合问题。需求是展示物料库存，列表字段：物料编号、物料名称、品类、仓库、数量</p>\n<p>物料表：</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>物料ID</td>\n<td>名称</td>\n<td>品类ID</td>\n</tr>\n<tr>\n<td>Z0001</td>\n<td>Iphone6红色手机壳</td>\n<td>Z</td>\n</tr>\n<tr>\n<td>Z0002</td>\n<td>iPhone6黑色手机壳</td>\n<td>Z</td>\n</tr>\n</tbody>\n</table>\n<p>库存表：</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>物料ID</td>\n<td>仓库ID</td>\n<td>数量</td>\n</tr>\n<tr>\n<td>Z0001</td>\n<td>W1</td>\n<td>10</td>\n</tr>\n<tr>\n<td>Z0002</td>\n<td>W1</td>\n<td>20</td>\n</tr>\n</tbody>\n</table>\n<p>品类和仓库表省略。。。</p>\n<p>很显然，传统一个数据库中，我们只需要简单的join操作，即可关联这两张表，外加关联品类和仓库表即可查询出我们所要的数据。但是现在我们的架构中，物料表和商品表不在同一个数据库实例中，我们不能使用join操作了，那我们该怎么实现需求呢？</p>\n<p>新的架构，只允许我们通过对方的服务接口来获取数据，不能直接关联对方服务的私有数据库。至少从架构上，服务化角度来说不能直接访问对方服务的数据库。这种情况下，假设web模块子系统调用仓库子系统来获取数据，则我们需要在仓库模块中创建一个service方法来装配这些数据。然后返回给web子系统。如下图所示，仓库管理方法首先获取本地库存表的物料编码、和仓库表的仓库名称字段信息，并且分页完后最终准备返回20条数据到Web模块前，将这20条数据中的物料ID作为参数请求商品模块子系统，商品子系统返回这20个物料ID相关的商品信息给到仓库管理模块，然后仓库管理模块重新组装上列表所需的物料名称和品类两个字段数据，实现最终要返回给Web子系统的数据。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/5844da7dc1a895e04903b2e7e9a80583.png\" alt=\"\" width=\"492\" height=\"484\"></p>\n<p>也许你会说，这太麻烦了，这种方法的性能肯定没有直接join来的高，解决不了性能问题。咋看起来好像是这么回事，但是仔细考虑看看，在系统并发量低、数据量小、业务不算繁忙的环境下，的确性能还不如传统一个数据中join方式来的快速。但我们想想以后吧！我们现在的架构设计是将一个数据库拆成多个数据库，每个数据库可以运行在单独的服务器上去，这样以后就能负载数据库的压力了。整体来说这样才能不会让数据库成为未来业务繁忙时候的性能瓶颈了。想想都觉得让人兴奋不已，是不是？</p>\n<p>这时候有人又会问，那以后系统数据量、业务更大了，连你这个拆分成几个数据库还不够用怎么办呢？我的方法是，可以基于拆分的数据库，单独每个库可以做读写分离、使用缓存等。甚至可以继续拆分下去，将子系统再次拆分成多个孙子系统。视业务模块繁忙程度而定。</p>\n<p><strong>报表系统</strong></p>\n<p>有人又会问，有些列表查询逻辑非常复杂，关联十多张表，如果按上述方法拆分数据，那简直是灾难啊！是的，你说的没有错。这种情况下我的方案是将这种更加复杂的报表级别的数据查询展示需求，可以单独做个报表系统。报表数据库设计采用数据仓库方式。为了更高的读取性能，我们可以将数据库表设计成很多冗余字段方式也就是反范式设计，以及建立非常多的组合索引。</p>\n<p>这种系统成功的关键就是数据和主ERP系统业务库的同步问题了。一般可以写一个定时同步程序，将ERP主业务系统的数据经过帅选、转化等方式直接生成报表视图所需的最终或中间数据，简化关联查询。报表系统也可以采用微服务架构设计。如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/522a3600daf64a8e983f09ed54353a98.png\" alt=\"\" width=\"651\" height=\"294\"></p>\n<p>如果报表所需的数据要求实时的，我们可以让ERP系统业务操作时，触发同步数据的请求，实时同步至报表库。</p>\n<p><strong>分布式事务</strong></p>\n<p>也许有人又又问了，ERP系统很多操作都要求事务性，你拆分系统后怎么实现事务性，保障数据一致性呢？</p>\n<p>这个问题很好，也是我决定写这篇文章前思考的最后一个问题。在微服务架构中，实现夸服务的事务并不容易，至少不像本地应用使用本地数据库事务那样方便，性能高效，数据一致性好。</p>\n<p>也许你听过分布式事务这个概念。有两种情景，一种是一个应用中使用多个数据库，为保障数据一致性，需要使用分布式事务。还有一种情况就是针对我们这个架构而言的。微服务环境下的分布式事务，具体来说打个比方。采购入库这个操作设计在仓库管理服务中。入库后，需要更新采购子系统中的采购单中的入库数量。这个过程要求数据一致性，也就是采购单入库成功后写入了库存表中的数量，同时要更新采购单表中的入库数量。我们不能直接在仓库服务中去访问采购服务中的数据库，必须通过采购服务提供的服务接口才行。如果这样，我们怎么能保证数据一致性呢？因为很有可能库存表写入成功，但调取采购服务写入采购单数据时失败了。可能是网络问题原因导致的，这样数据就不一致了。</p>\n<p>在分布式事务技术中，有实现最终一致性这么一说，意思就是只要我能保证两边数据最终实现了一致性就行，不一定要使用事务。这样说来就有方案了。如仓库子系统在处理采购入库时需要增加入库单数据和更新库存数据等多个表。这多个表都在仓库子系统中，我们可以使用一个本地事务来保证仓库子系统中的表数据一致性。然后调用采购子系统更新采购单里的入库数量。为了防止这个过程突然中断导致调用失败，我们考虑增加一个消息队列中间件如ActiveMQ。如果接口返回失败我们就往MQ里写入这个处理请求，等到采购子系统恢复正常后，MQ通知采购子系统处理这个更新操作。由于消息消费掉以后不会再有通知了，采购子系统处理过程中发生异常导致更新失败，需要将问题写入本地的日志库，以便通知管理员做后续补偿处理。就这样通过各种办法来达到数据的最终一致性即可。虽然听上去有点坑，但这就是解决方案。没有其他更好的了。或者更新失败后重新调用仓库子系统回滚入库单和库存数据，达到最终一致性！如图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/a5b2c925209ba4a005c3b909e598de99.png\" alt=\"\" width=\"651\" height=\"312\"></p>\n<p>非常有幸能和大家一起分享知识和经验，正是由于大家的无私分享，才让我们得以成长和进步，我最近几年来都很少分享东西，有时候是因为工作很忙没有时间写点东西，有时候也是因为自己懒或是没有什么新东西可以分享给大家的。最后也希望大家对我的分享不足之处给予批评指正，一起进步！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113174\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113174votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113174\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,分布式,架构", "front_image_path": "full/900573f30c0b83190d0af33044be8518edaae066.jpg"}
{"url_object_id": "8ed0804ae6bd382f6ca9cf8d8ea52aba", "title": "Linux 上的科学图像处理", "url": "http://blog.jobbole.com/113171/", "create_date": "2017/12/04", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/1d34dd467641215c527e32ede94fe494.jpg"], "praise_nums": "1", "fav_nums": 1, "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linuxjournal.com/content/image-processing-linux\">Joey Bernard</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9091-1.html\">Linux中国/XYenChi</a>   </div><p>在显示你的数据和工作方面我发现了几个科学软件，但是我不会涉及太多方面。因此在这篇文章中，我将谈到一款叫 ImageJ 的热门图像处理软件。特别的，我会介绍 <a href=\"https://imagej.net/Fiji\">Fiji</a>，这是一款绑定了一系列用于科学图像处理插件的 ImageJ 软件。</p>\n<p>Fiji 这个名字是一个循环缩略词，很像 GNU 。代表着 “Fiji Is Just ImageJ”。 ImageJ 是科学研究领域进行图像分析的实用工具 —— 例如你可以用它来辨认航拍风景图中树的种类。 ImageJ 能划分物品种类。它以插件架构制成，海量插件可供选择以提升使用灵活度。</p>\n<p>首先是安装 ImageJ （或 Fiji）。大多数的 ImageJ 发行版都可有该软件包。你愿意的话，可以以这种方式安装它，然后根据你的研究安装所需的独立插件。另一种选择是安装 Fiji 的同时获取最常用的插件。不幸的是，大多数 Linux 发行版的软件中心不会有可用的 Fiji 安装包。幸而，官网上的简单安装文件是可以使用的。这是一个 zip 文件，包含了运行 Fiji 需要的所有文件目录。第一次启动时，你只会看到一个列出了菜单项的工具栏。（图 1）</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/4b5323a323cdefe54748623ef51e9287.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 1. 第一次打开 Fiji 有一个最小化的界面。</em></p>\n<p>如果你没有备好图片来练习使用 ImageJ ，Fiji 安装包包含了一些示例图片。点击“File”-&gt;“Open Samples”的下拉菜单选项（图 2）。这些示例包含了许多你可能有兴趣做的任务。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/f6badbcda0fa0d6b1bbee8ffab23cf01.jpg\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 2. 案例图片可供学习使用 ImageJ。</em></p>\n<p>如果你安装了 Fiji，而不是单纯的 ImageJ ，那么大量插件也会被安装。首先要注意的是自动更新器插件。每次打开 ImageJ ，该插件将联网检验 ImageJ 和已安装插件的更新。</p>\n<p>所有已安装的插件都在“插件”菜单项中可选。一旦你安装了很多插件，列表会变得冗杂，所以需要精简你选择的插件。你想手动更新的话，点击“Help”-&gt;“Update Fiji” 菜单项强制检测并获取可用更新的列表（图 3）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/34164c1b61f5d6c5b4ab3cb14875ccb0.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 3. 强制手动检测可用更新。</em></p>\n<p>那么，现在，用 Fiji/ImageJ 可以做什么呢？举一例，统计图片中的物品数。你可以通过点击“File”-&gt;“Open Samples”-&gt;“Embryos”来载入示例。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/cfee97aeff09774aadd91f6997833cd6.jpg\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 4. 用 ImageJ 算出图中的物品数。</em></p>\n<p>第一步给图片设定比例，这样你可以告诉 ImageJ 如何判别物品。首先，选择在工具栏选择线条按钮。然后选择“Analyze”-&gt;“Set Scale”，然后就会设置比例尺包含的像素点个数(图 5)。你可以设置“known distance ”为 100，单元为“um”。</p>\n<p style=\"text-align: center\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/6c891f88f41eabeffcb2588fcaf1ce90.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 5. 很多图片分析任务需要对图片设定一个范围。</em></p>\n<p>接下来的步骤是简化图片内的信息。点击“Image”-&gt;“Type”-&gt;“8-bit”来减少信息量到 8 比特灰度图片。要分隔独立物体点击“Process”-&gt;“Binary”-&gt;“Make Binary”以自动设置图片门限。(图 6)。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/02d9a149336105dbcd1c481282437ae8.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 6. 有些工具可以自动完成像门限一样的任务。</em></p>\n<p>图片内的物品计数前，你需要移除像比例尺之类的人工操作。可以用矩形选择工具来选中它并点击“Edit”-&gt;“Clear”来完成这项操作。现在你可以分析图片看看这里是啥物体。</p>\n<p>确保图中没有区域被选中，点击“Analyze”-&gt;“Analyze Particles”来弹出窗口来选择最小尺寸，这决定了最后的图片会展示什么（图 7）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/3cb08aa36ad4e4379b896c2aa1a3e636.png\" alt=\"\"></p>\n<p style=\"text-align: center\">*图 7. 你可以通过确定最小尺寸生成一个缩减过的图片。 *</p>\n<p>图 8 在总结窗口展示了一个概览。每个最小点也有独立的细节窗口。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/923cd604a9b9c69a21b07d1c35f433a7.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 8. 包含了已知最小点总览清单的输出结果。</em></p>\n<p>当你有一个分析程序可以工作于给定图片类型，你通常需要将相同的步骤应用到一系列图片当中。这可能数以千计，你当然不会想对每张图片手动重复操作。这时候，你可以集中必要步骤到宏，这样它们可以被应用多次。点击插件-&gt;“Macros”-&gt;“Record”，弹出一个新的窗口记录你随后的所有命令。所有步骤完成，你可以将之保存为一个宏文件，并且通过点击“Plugins”-&gt;“Macros”-&gt;“Run”来在其它图片上重复运行。</p>\n<p>如果你有非常特定的工作步骤，你可以简单地打开宏文件并手动编辑它，因为它是一个简单的文本文件。事实上有一套完整的宏语言可供你更加充分地控制图片处理过程。</p>\n<p>然而，如果你有真的有非常多的系列图片需要处理，这也将是冗长乏味的工作。这种情况下，前往“Process”-&gt;“Batch”-&gt;“Macro”，会弹出一个你可以设置批量处理工作的新窗口（图 9）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/1e4c9582d599e12de41f88309714d52e.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 9. 对批量输入的图片用单一命令运行宏。</em></p>\n<p>这个窗口中，你能选择应用哪个宏文件、输入图片所在的源目录和你想写入输出图片的输出目录。也可以设置输出文件格式，及通过文件名筛选输入图片中需要使用的。万事具备之后，点击窗口下方的的“Process”按钮开始批量操作。</p>\n<p>若这是会重复多次的工作，你可以点击窗口底部的“Save”按钮保存批量处理到一个文本文件。点击也在窗口底部的“Open”按钮重新加载相同的工作。这个功能可以使得研究中最冗余部分自动化，这样你就可以在重点放在实际的科学研究中。</p>\n<p>考虑到单单是 ImageJ 主页就有超过 500 个插件和超过 300 种宏可供使用，简短起见，我只能在这篇短文中提出最基本的话题。幸运的是，还有很多专业领域的教程可供使用，项目主页上还有关于 ImageJ 核心的非常棒的文档。如果你觉得这个工具对研究有用，你研究的专业领域也会有很多信息指引你。</p>\n<hr>\n<p>作者简介：</p>\n<p>Joey Bernard 有物理学和计算机科学的相关背景。这对他在新不伦瑞克大学当计算研究顾问的日常工作大有裨益。他也教计算物理和并行程序规划。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113171\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113171votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113171\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "front_image_path": "full/11a48b07810c909fd0ce4f50b3b33355d43f04e2.jpg"}
{"url_object_id": "dbb11ac8ca732aec09107bbe3caa6c00", "title": "成熟开发者的“元品质”", "url": "http://blog.jobbole.com/113166/", "create_date": "2017/12/04", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2017/11/career.jpeg"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<p>有时候我回首望过这些年走过的职业路径，从开发到测试，参与技术社区，兼职编辑，到今天这样一个“跨界”的角色，心中没有放下过的一直是对开发者这个身份的认同。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/11/career.jpeg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/11/career.jpeg\" alt=\"\" width=\"940\" height=\"625\"></a></p>\n<p>我喜欢跟有技术内核的人在一起，击键如飞，改变世界，内心沉浸，性格单纯。虽然会觉得忝列其中而觉羞愧，但这也是我“跨界”的基础，久而久之，反而会有新的发现。</p>\n<p>目睹着周围的同事们越来越年轻，他们有冲劲，无限的精力和好奇心，像是随时都会在我面前宣布他们终究要把我远远地甩在时间的后面。但我也不断地发现，他们在走的路以及会落下去的坑，都是那么熟悉，好胜之心，求快求新，很多东西浅尝辄止，拿着锤子四处找钉子。</p>\n<p>也许这就是人生吧，甚至无关乎职业，人注定要在不断体验失意和收获教训之后，才从无知无畏走向敬畏和宽容。</p>\n<p>但我周围仍旧存在这样一些开发者，他们除了那些通用的开发者品质外，更显从容和优雅，对软件，对世界，对内心有更成熟的理解和认知。他们“上得厅堂，下得厨房”，面对高大上的客户可以雍容不迫，撸起袖子干活也可以尽显极客本色，更重要的是，他们更懂得自己的存在是为了改善这个世界上另外一个地方一些人的命运，并从未停止去追逐。</p>\n<p>所以我在想，除了那些通用的开发者品质，是不是可能还存在一些品质，可以让我们的开发者快速地成熟起来？除了要对新技术和趋势保持敏感，对工具和语言保持兴趣并熟练掌握，趁着年轻一年又一年挥洒不尽的精力和时间之外，还有没有一些品质存在，是年轻的开发者可借以成熟的路径，或者可供参考的方向？</p>\n<p>我愿意把这些叫做成熟开发者的“元品质”。</p>\n<h3>有人文心</h3>\n<p>行业的隔膜加上互联网的便捷，让现代的年轻开发者不用顾及太多专业外的知识，就可以在比特海里畅游不停。我们可以在虚拟的世界里，完成我们几乎所有的生活和工作所需，一切伸手可触但圈子却越来越小，不经意间把自己禁锢在一个以为可以自给自足的小世界里。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/11/wiseacre-3.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/11/wiseacre-3-1024x683.jpg\" alt=\"\" width=\"700\" height=\"467\"></a></p>\n<p>这样失去的是对周遭环境和人的感知，失去的是对更大世界现实感的体会，失去的是对自我能力和未来的认知（高估或者低估），还有对自己能改变周遭甚至世界的可能的探知。</p>\n<p>读史，读传记，读一切可以让自己有人文心的信息，可以感知自己的渺小，这样不会再有无知的虚妄无畏，也可以知晓未来通向的方向和自己的未来之路。</p>\n<h3>有宽容心</h3>\n<p>很早之前看过一本书，《做单》，作者是IBM的金牌销售胡震生。书里详述了他作为销售的经历，抛开那些触目惊心以及不断刷新我认知的销售经过之外，让我体验最深的，是他作为销售人员所体现出来的对他人的宽容心，和对人性的敬畏心。不管对待自己想要拿下的客户，还是面对自己团队的同事，用自己的包容处处为之着想一一化解掉对方的猜忌和不满。而最后单子做成只是产生的副作用而已。</p>\n<p>当开发者需要去承担更大职责，或者被置身于一个比独立开发更加复杂的环境时，所面临的局面和接触的人都发生了很大的变化。工作方式和风格的不同所产生的摩擦会容易让我们失去耐心。只包容自己，无意识下伤及合作伙伴的行为，会被简单地斥以情商低。</p>\n<p>而多方共赢，甚至牺牲自己成就他人是最难的吧。从更高的层面来思考整个系统的运作方式，以及不同利益相关者的需求，结合从他人出发角度，来寻找多方共赢的可能方案。</p>\n<p>不管是客户，还是自己团队的同事，想想他们的诉求，工作上的诉求，私人的诉求，是否跟我们自己有更大的重合面。而寻找到了就是幸运，加持以耐心和包容心，这才是我理解的成功。</p>\n<h3>有勇气</h3>\n<p>有勇气，不代表无知者的无畏，而是代表在面临困难或者诱惑的时候，对自己原则的坚持和自信。</p>\n<p>我见过很多次，开发者在面临客户的威逼利诱时候的不知所措，在面对遗留系统代码，不重构，不测试，不尝试的推脱：</p>\n<blockquote><p>因为这个迭代太紧张，因为客户很着急。</p></blockquote>\n<p>偷懒和没有原则，失去的不仅仅是自己练习实践的机会，还有将来被各种理由裹挟的可能，更重要的是距离成为一个具备独立思考力和可被委以重任的开发者也越来越远。</p>\n<h3>会写作</h3>\n<p>不只是我自己，越来越多人开始意识到，在现在这样注意力容易缺失，四处追求快速的环境下，开发者更容易堕落成简单的问题解决者，而不是有系统思考能力的设计者和决策者。</p>\n<p>我们更像是缺乏一种摆脱现实窘境（欲罢不能，饮鸩止渴）的方式，而在寻找之后似乎都指向了同样的方向——<strong>写作</strong>。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/11/writing.jpeg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/11/writing.jpeg\" alt=\"\" width=\"940\" height=\"627\"></a></p>\n<p>一个人再怎么呼吁也是苍白的，让我们看看更多的人怎么说，下面是我很认可的几个：</p>\n<ul>\n<li><a href=\"http://wj1s.farbox.com/post/xin-de-ti-hui/wdl\">王健：写作驱动学习</a></li>\n</ul>\n<blockquote><p>回到写作这件事情，抛开那些“总有一天”才能实现的好处外，眼前的好处无外乎就是帮助我们记录理解消化沉淀学到的知识了。不过我们的内心里总有一个声音反复出现：反正书看了，Session听了，感觉知识已经学会了，那还值得花时间写么？我用这个时间多学点东西不更好？</p></blockquote>\n<ul>\n<li><a href=\"http://mindhacks.cn/2009/02/09/writing-is-better-thinking/\">刘未鹏：书写是为了更好的思考</a></li>\n</ul>\n<blockquote><p>你越是不开始书写，总是拿有限的思维缓存去默想一个问题，就越是没有内容可以写，如果你逼着自己将一些不成熟的想法写下来，看着自己写的内容，试着进一步拓展它们，就有可能在理性的道路上走得很远，很远。</p></blockquote>\n<ul>\n<li><a href=\"http://www.tuzei8.com/how-to-write/index.html\">熊子川：如何写作</a></li>\n</ul>\n<blockquote><p>我喜欢写作，并认为写作是最好的学习过程，它像是设计思维里知识漏斗的颈，把你以往的、现在的、以及新发现的知识融合在一起，汇聚成落在纸上的文字，这是我一直保持写作热情的秘诀。</p></blockquote>\n<ul>\n<li><a href=\"http://www.luanxiang.org/blog/archives/2160.html\">余晟：写作是种高质量的社交</a></li>\n</ul>\n<blockquote><p>愿意思考的人很多，很多人比我想得更深入更广阔，但愿意写出来的人不多，这太可惜了。其实写作是个熟练工，哪怕一开始没有感觉，写写就会有感觉的。我希望有越来越多的朋友认真写作，既为自己营造了高质量的社交，也让这个世界更美好。</p></blockquote>\n<p>我们可以看到写作对于我们个人由内到外的很多方面，都有积极的意义：</p>\n<ul>\n<li>帮助提升思考的能力</li>\n<li>提高学习的效率</li>\n<li>打造个人在专业性上的名声</li>\n<li>延伸人脉和职业发展的可能</li>\n</ul>\n<p>而这些意义，又有哪个不是开发者需要的呢？</p>\n<h3>最后</h3>\n<p>人活着的意义和人生的价值就在于提升心性、磨炼灵魂。——《活法》</p>\n<p>文／ThoughtWorks张凯峰</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113166\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113166votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113166\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 78</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员", "front_image_path": "full/8a8df86e3fed5b3767e81281dbdce35a24ce7ea9.jpg"}
{"url_object_id": "7977373aa7cda30ddbb6f13b26014e73", "title": "如何轻松记住 Linux 命令", "url": "http://blog.jobbole.com/113158/", "create_date": "2017/11/30", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "praise_nums": "2", "fav_nums": 3, "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/remember-linux-commands/\"> Nick Congleton</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9093-1.html\">Linux中国/DarkSun</a>   </div><p>Linux 新手往往对命令行心存畏惧。部分原因是因为需要记忆大量的命令，毕竟掌握命令是高效使用命令行的前提。</p>\n<p>不幸的是，学习这些命令并无捷径，然而在你开始学习命令之初，有些工具还是可以帮到你的。</p>\n<h3 id=\"toc_1\">history</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/b9f1e0ab22ccd690e6064704ebc0333a.jpg\" alt=\"Linux Bash History 命令\"></p>\n<p>首先要介绍的是命令行工具 <code>history</code>，它能帮你记住那些你曾经用过的命令。包括应用最广泛的 Bash 在内的大多数 <a href=\"https://www.maketecheasier.com/alternative-linux-shells/\">Linux shell</a>，都会创建一个历史文件来包含那些你输入过的命令。如果你用的是 Bash，这个历史文件就是 <code>/home/&lt;username&gt;/.bash_history</code>。</p>\n<p>这个历史文件是纯文本格式的，你可以用任意的文本编辑器打开来浏览和搜索。</p>\n<h3 id=\"toc_2\">apropos</h3>\n<p>确实存在一个可以帮你找到其他命令的命令。这个命令就是 <code>apropos</code>，它能帮你找出合适的命令来完成你的搜索。比如，假设你需要知道哪个命令可以列出目录的内容，你可以运行下面命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a29585e29d0f816494725\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\napropos \"list directory\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a29585e29d0f816494725-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585e29d0f816494725-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a29585e29d0f816494725-1\"><span class=\"crayon-i\">apropos</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"list directory\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585e29d0f816494725-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/5b2776fdc0581fc6c87486cb46f7a289.jpg\" alt=\"Linux Apropos\"></p>\n<p>这就搜索出结果了，非常直接。给 “directory” 加上复数后再试一下。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a29585e29d18419246495\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\napropos \"list directories\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a29585e29d18419246495-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585e29d18419246495-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a29585e29d18419246495-1\"><span class=\"crayon-i\">apropos</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"list directories\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585e29d18419246495-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这次没用了。<code>apropos</code> 所作的其实就是搜索一系列命令的描述。描述不匹配的命令不会纳入结果中。</p>\n<p>还有其他的用法。通过 <code>-a</code> 标志，你可以以更灵活的方式来增加搜索关键字。试试这条命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a29585e29d1c319564019\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\napropos \"match pattern\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a29585e29d1c319564019-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585e29d1c319564019-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a29585e29d1c319564019-1\"><span class=\"crayon-i\">apropos</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"match pattern\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585e29d1c319564019-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/a3a848058d32cc97367b81816aef9a25.jpg\" alt=\"Linux Apropos -a Flag\"></p>\n<p>你会觉得应该会有一些匹配的内容出现，比如 <a href=\"https://www.maketecheasier.com/what-is-grep-and-uses/\">grep</a> 对吗? 然而，实际上并没有匹配出任何结果。再说一次，apropos 只会根据字面内容进行搜索。</p>\n<p>现在让我们试着用 <code>-a</code> 标志来把单词分割开来。（LCTT 译注：该选项的意思是“and”，即多个关键字都存在，但是不需要正好是连在一起的字符串。）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a29585e29d20868544654\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\napropos \"match\" -a \"pattern\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a29585e29d20868544654-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a29585e29d20868544654-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a29585e29d20868544654-1\"><span class=\"crayon-i\">apropos</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"match\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"pattern\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a29585e29d20868544654-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这一下，你可以看到很多期望的结果了。</p>\n<p><code>apropos</code> 是一个很棒的工具，不过你需要留意它的缺陷。</p>\n<h3 id=\"toc_3\">ZSH</h3>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/2e229d2b2029a07d42724367d9cec29f.jpg\" alt=\"Linux ZSH Autocomplete\"></p>\n<p>ZSH 其实并不是用于记忆命令的工具。它其实是一种 shell。你可以用 <a href=\"https://www.maketecheasier.com/understanding-the-different-shell-in-linux-zsh-shell/\">ZSH</a> 来替代 Bash 作为你的命令行 shell。ZSH 包含了自动纠错机制，能在你输入命令的时候给你予提示。开启该功能后，它会提示你相近的选择。在 ZSH 中你可以像往常一样使用命令行，同时你还能享受到极度安全的网络以及其他一些非常好用的特性。充分利用 ZSH 的最简单方法就是使用 <a href=\"https://github.com/robbyrussell/oh-my-zsh\">Oh-My-ZSH</a>。</p>\n<h3 id=\"toc_4\">速记表</h3>\n<p>最后，也可能是最间的方法就是使用 <a href=\"https://www.maketecheasier.com/premium/cheatsheet/linux-command-line/\">速记表</a>。</p>\n<p>有很多在线的速记表，比如<a href=\"https://www.cheatography.com/davechild/cheat-sheets/linux-command-line/\">这个</a> 可以帮助你快速查询命令。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/1903ffeaf9160b3705d5bd2670ea6a95.gif\" alt=\"linux-commandline-cheatsheet\"></p>\n<p>为了快速查询，你可以寻找图片格式的速记表，然后将它设置为你的桌面墙纸。</p>\n<p>这并不是记忆命令的最好方法，但是这么做可以帮你节省在线搜索遗忘命令的时间。</p>\n<p>在学习时依赖这些方法，最终你会发现你会越来越少地使用这些工具。没有人能够记住所有的事情，因此偶尔遗忘掉某些东西或者遇到某些没有见过的东西也很正常。这也是这些工具以及因特网存在的意义。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113158\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113158votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113158\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Linux", "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg"}
{"url_object_id": "4c6c17f1e0f1344a3e82bc74ed4170c4", "title": "Go 的这十年！Go 语言之父等人回顾", "url": "http://blog.jobbole.com/113119/", "create_date": "2017/12/04", "front_image_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fm29qjec1aj20sg0hs0to.jpg"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q4000052677\">听风</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://commandcenter.blogspot.com/2017/09/go-ten-years-and-climbing.html\">commandcenter</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：Go 语言的主要缔造者 Rob Pike、Robert Griesemer 与 Ken Thompson，他们三人撰文回顾 Go 的发展史与一些重要人物，并曝光促成 Go 诞生的相关邮件的片段。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fm29qjec1aj20sg0hs0to.jpg\" width=\"690\" height=\"431\"></p>\n<p>2017 年 9 月，Go 语言迎来其诞生十周年纪念日。</p>\n<p>关于 Go 语言设计的初次讨论是在 2007 年 9 月 20 日，一个周四的下午。这次讨论促使 Robert Griesemer、Rob Pike、 以及 Ken Thompson 于第二天下午 2 点，在 Google’s Mountain View 的 43 号大楼的 Yaounde 会议室又组织了一次关于该语言设计的会议。语言的名字于 9 月 25 号确定了，在有关该语言设计的第一封邮件里面有关于命名的考量：</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fm29qkruczj20c207lq3s.jpg\" width=\"434\" height=\"273\"></p>\n<p>（译注：这是一封由 Rob Pike 在 2007 年 9 月 25 号，星期二，下午 3：12 回复给 Robert Griesemer、Ken Thompson 的有关编程语言讨论主题的邮件，邮件正文大意为：在开车回家的路上我得到了些灵感。1.给这门编程语言取名为“go”。你可以为这个命名假借各种理由，但它确实有其可取之处。它很简短，易书写。工具类可以命名为：goc、 gol、goa。交互式的调试工具也可以直接命名为“go”。语言文件后缀名为 .go ……）</p>\n<div class=\"paragraph\">\n<p>（值得一提的是，本语言的名字是 Go ；“golang”来自于其 web 站点网址（go.com 在当时已是一个迪士尼 web 站点地址。），并不是该语言的正确名字。）</p>\n</div>\n<p class=\"paragraph\">Go 项目团队将 2009 年 11 月 10 日，即该语言正式对外开源的日字作为其官方生日。源代码最初托管在 code.google.com 上，之后几年才迁移到 GitHub 上。但是，现在我们要回到语言设计的最初概念构建阶段，即更早的两年，这可以让我们做更进一步地回顾，以更长远的视角，见证语言发展历史上的一系列早期事件。</p>\n<div class=\"paragraph\"></div>\n<div class=\"paragraph\">\n<div class=\"paragraph\">\n<p>在开发设计 Go 语言过程中的第一个重大惊喜是收到了以下这封邮件：</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fm29qldqvxj20bi05qaar.jpg\" width=\"414\" height=\"206\"></p>\n</div>\n<p class=\"paragraph\">(译注：这是一封由 Ian Lance Taylor 在 2008 年 6月 7 日（星期六）的晚上 7：06 写给 Robert Griesemer、Rob Pike、 Ken Thompson 的关于 Go gcc 编译器前端的邮件。邮件正文大意如下：我的同事向我推荐了这个网站 http://…/go_lang.html 。这似乎是一门很有趣的编程语言。我为它写了一个 gcc 编译器前端。虽然这个工具仍缺少很多的功能，但它确实可以编译网站上展示的那个素数筛选程序了。）</p>\n<p class=\"paragraph\"><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm29qk08vvj20hw0l2tdz.jpg\" width=\"420\" height=\"494\"></p>\n<p class=\"paragraph\" style=\"text-align: center;\">（Drawing Copyright ©2017 <a href=\"http://reneefrench.io/\" target=\"_blank\">Renee French</a>）</p>\n<p class=\"paragraph\">Ian Lance Taylor 的加入以及第二个编译器 (gcc go) 的实现 在带来震惊的同时，也伴随着喜悦。这对 Go 项目来说不仅仅是鼓励，更是一种对可行性的证明。语言的第二次实现对制定语言规范和确定标准库的过程至关重要，同时也有助于保证其高可移植性，这也是 Go 语言承诺的一部分。</p>\n</div>\n<div class=\"paragraph\">\n<p>虽然 Ian 的办公室离我们不远，但在收到此邮件以前，我们三人与他素未谋面。不过，自那以后，Ian Lance Taylor 便成为了设计和实现 Go 语言及其工具的核心人物。</p>\n</div>\n<div class=\"paragraph\">\n<p> Russ Cox 在2008 年带着他的语言设计天赋和编程技巧也加入了刚成立不久的 Go 团队。Russ 发现 Go 方法的通用性意味着函数也能拥有自己的方法,这直接促成了 <strong><em><a href=\"https://golang.org/pkg/net/http/#HandlerFunc\">http.HandlerFunc</a> </em></strong>的实现，这是一个出乎我们所有人意料的结果。Russ 还提出了更多的泛化性的想法，比如 io.Reader 和 io.Writer 接口，奠定了所有 I/O 库的整体结构。</p>\n</div>\n<div class=\"paragraph\">\n<p>Jini Kim 是我们最初的产品经理，聘请了安全专家 Adam Langley 帮助 Go 走向 Google 外面的世界。Adam 为我们做了许多不为外人知晓的工作，包括创建最初的 <a href=\"https://golang.org/\"><strong><em>golang.org</em></strong></a>  网站以及 <a href=\"https://build.golang.org/\"><strong><em>build dashboard</em></strong></a>。不过他最大的贡献当属创建了 cryptographic 库。起先，在我们中的部分人看来，这个库无论在规模还是复杂度上都不成气候。但是就是这个库在后期成为了很多重要的网络和安全软件的基础，并且成为了 Go 语言开发历史的关键组成部分。许多网络基础设施公司，比如 <a href=\"https://www.cloudflare.com/\"><strong><em>Cloudflare</em></strong></a>，均重度依赖 Adam 在 Go 项目上的工作，互联网也因它变得更好。因此，就 Go 而言，我们由衷地感谢 Adam。</p>\n</div>\n<div class=\"paragraph\">\n<p>事实上，有许多公司在项目早期就开始使用 Go 语言进行开发，尤其是一些初创公司。在这些公司当中有些现已成为云计算领域中的巨头。有一家创业公司，现在叫 Docker，就是使用 Go 进行项目开发，并促进了计算机领域的容器行业，进而出现了像 Kubernetes 这样的项目。现在，我们完全可以说 Go 是容器语言，这是另一个完全出乎意料的结果。</p>\n</div>\n<div class=\"paragraph\">\n<p>不过，Go 在云计算领域中所起的作用更大。2014 年 3 月， Donnie Berkholz 为 RedMonk 撰写文章，声称 Go 是“云计算基础设施的新兴语言”。同时，Apcera 的 Derek Collison 表示，Go 已是一门云计算语言。彼时，这样的表述可能言过其实，但 Berkholz 所使用的“新兴”一词恰如其分地表达了 Go 语言在当时的地位。</p>\n</div>\n<p class=\"paragraph\">如今 Go 已经是云计算编程语言。想象一下：一个只有 10 年发展经历的编程语言已经成为了如此巨大而且正在不断发展的行业的主导者，这种成功是每个人都无法想象的。如果你认为“主导”一词太过强势，请看看中国的互联网。一段时间以来，Go 在中国大量使用的数据一度让我们误认为 Google 趋势图出现了某些错误，但是凡是去过中国，参加过中国区 Go 语言大会的人都可以证实：Google 趋势图的数据是真实的。Go 在中国的使用非常火爆！</p>\n<p class=\"paragraph\">简而言之，Go 语言的十年发展旅程中经历了众多里程碑。最令人震惊的是我们现在的位置：保守估计至少有 50 万 Go 程序员。当发送那封为 Go 命名的邮件时，憧景将会有五十万 Go 追随者，这听起来一定很荒唐。但就在此时此刻，我们不仅有 50 万 gopher，并且这个数量还在持续增长。</p>\n<div class=\"paragraph\">\n<p>说到 gophers，很高兴看到来自 Renee French 想法的吉祥物 Go Gopher(地鼠)，不仅成为了一个非常受人喜爱的作品，而且也是世界各地Go 程序员的象征。许多各地区顶级的 Go 大会都被称为 GopherCons，因为他们聚集了来自世界各地的 gophers。</p>\n</div>\n<div class=\"paragraph\">\n<p>Gopher 会议正在飞速发展。第一次大会的举办只不过是三年前的事情，但今天在全世界各地有很多这样的 Gopher 大会,并且还有无数小的本地“聚会”。无论哪一天，都会有不止一个 gopher 群体相聚在世界上的某个地方分享有关 Go 语言设计的想法。</p>\n</div>\n<div class=\"paragraph\">\n<p>回顾过去十年的 Go 设计和开发，Go 社区的发展尤其惊人的。技术会议和聚会的数量、长长的且不断增加的 Go 项目贡献者名单、大量使用Go 实现的开源代码库、使用 Go 开发公司数量（有些甚至只使用 Go 开发）：任何一项数据考量后都足以让人震惊！</p>\n</div>\n<div class=\"paragraph\">\n<p>就我们三人而言，Robert、 Rob 和 Ken，当初只是想让我们的编程生活更轻松一些，而如今，我们难以置信地、欣慰地看到我们的工作已经开始起作用了。</p>\n</div>\n<div class=\"paragraph\">\n<p>未来十年它将会带来什么呢？让我们拭目以待。</p>\n</div>\n<div class=\"paragraph\" style=\"text-align: right;\">– Rob Pike、Robert Griesemer 和 Ken Thompson</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113119\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113119votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113119\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q4000052677\">听风</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q4000052677\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/9538B04AD8C6883F49C38BC8ECDDAF3C/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q4000052677\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q4000052677/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q4000052677/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 23</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Go", "front_image_path": "full/e52a998f9dfbb36e1ef7520ece8e5a7eb3374e2c.jpg"}
{"url_object_id": "986ccf2aa5053a80703a2f892c18fcab", "title": "写会 MySQL 索引", "url": "http://blog.jobbole.com/113142/", "create_date": "2017/11/29", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "praise_nums": "2", "fav_nums": 3, "comment_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/u/1462914/blog/1563127\">andyqian</a>   </div><h4>前言</h4>\n<p>继上篇《读懂MySQL执行计划》后，在文章末尾，我们谈到了索引的概念，那么，今天我们就一起来聊一聊MySQL索引。</p>\n<p> </p>\n<h4>什么是索引？</h4>\n<p>百度百科是这样描述的：</p>\n<blockquote><p>索引是为来加速对表中数据行中的检索而创建的一种分散的数据结果，时针对表而建立的，它是由数据页面以外的索引页面组成，每个索引页中的行都含有逻辑指针，以便加速检索物理数据</p></blockquote>\n<p>其实，索引的概念大家都很清楚，也知道索引能够提升查询效率，但大部分童鞋在怎么建索引，建在哪些字段上有以下常见误解:</p>\n<ul>\n<li>新建表时不需要建索引，后续才添加索引</li>\n<li>where条件后的字段均建索引</li>\n<li>简单SQL不需要索引，联合查询才需要索引</li>\n<li>联合索引的顺序是where条件后字段的先后顺序</li>\n<li>对于区分度小的字段上也新建索引,如状态,性别等字段等。</li>\n</ul>\n<p> </p>\n<h4>索引区分度</h4>\n<p>在说上述问题之前，我们先来看看另一个概念，就是区分度。</p>\n<blockquote><p>区分度: 指字段在数据库中的不重复比</p></blockquote>\n<p>区分度在新建索引时有着非常重要的参考价值，在MySQL中，区分度的计算规则如下:</p>\n<blockquote><p>字段去重后的总数与全表总记录数的商。</p></blockquote>\n<p>例如:</p>\n<blockquote><p>select count(distinct(name))/count(*) from t_base_user;</p></blockquote>\n<p>结果如下:</p>\n<table>\n<tbody>\n<tr>\n<th>count(distinct(name))/count(*)</th>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td>1.0000</td>\n</tr>\n</tbody>\n</table>\n<p>其中区分度最大值为1.000，最小为0.0000，区分度的值越大，也就是数据不重复率越大，新建索引效果也越好，在主键以及唯一键上面的区分度是最高的，为1.0000，在状态、性别等字段上面的区分度值是最小的。 (这个就要看数据量了，如果只有几条数据，这时区分度还挺高的，如果数据量多，区分度基本为0.0000。也就是在这些字段上添加索引后，效果也不佳的原因。)</p>\n<p>值得注意的是：如果表中没有任何记录时，计算区分度的结果是为空值，其他情况下，区分度值均分布在0.0000-1.0000之间。</p>\n<p> </p>\n<h4>如何建索引</h4>\n<p><strong>   (一)  : 区分度</strong><br>\n个人强烈建议，建索引时，一定要先计算该字段的区分度，原因如下:</p>\n<p><strong>1. 单列索引</strong><br>\n可以查看该字段的区分度，根据区分度的大小，也能大概知道在该字段上的新建索引是否有效，以及效果如何。区分度越大，索引效果越明显。</p>\n<p><strong>2.多列索引(联合索引)</strong><br>\n多列索引中其实还有一个字段的先后顺序问题，一般是将区分度较高的放在前面，这样联合索引才更有效，例如:</p>\n<blockquote><p>select * from t_base_user where name=”” and status=1;</p></blockquote>\n<p>像上述语句，如果建联合索引的话，就应该是:</p>\n<blockquote><p>alter table t_base_user add index idx_name_status(name,status);</p></blockquote>\n<p>而不是:</p>\n<blockquote><p>alter table t_base_user add index idx_status_name(status,name)；</p></blockquote>\n<p><strong>(二) 最左前缀匹配原则</strong><br>\nMySQL会一直向右匹配直到遇到范围查询(&gt;、&lt;、between、like)就停止匹配，比如</p>\n<blockquote><p>select * from t_base_user where type=”10″ and created_at&lt;“2017-11-03” and status=1, (该语句仅作为演示)</p></blockquote>\n<p>在上述语句中，status就不会走索引，因为遇到&lt;时，MySQL已经停止匹配，此时走的索引为：(type,created_at)，其先后顺序是可以调整的，而走不到status索引，此时需要修改语句为:</p>\n<blockquote><p>select * from t_base_user where type=10 and status=1 and created_at&lt;“2017-11-03”</p></blockquote>\n<p>即可走status索引。</p>\n<p><strong>(三) 函数运算</strong><br>\n不要在索引列上，进行函数运算，否则索引会失效。因为b+树中存的都是数据表中的字段值，但进行检索时，需要把所有元素都应用函数才能比较，显然成本太大。</p>\n<p><strong>(四) 扩展优先</strong><br>\n扩展优先，不要新建索引，尽量在已有索引中修改。如下:</p>\n<blockquote><p>select * from t_base_user where name=”andyqian” and email=”andytohome”</p></blockquote>\n<p>在表t_base_user表中已经存在idx_name索引，如果需要加入idx_name_email的索引，应该是修改idx_name索引，而不是新建一个索引。</p>\n<p> </p>\n<h4>误解纠正</h4>\n<p>上面说了，如何新建索引，现在我们就可以来回答，在第一步中存在的误解了。</p>\n<p><strong>误解一: 新建表时不需要建立索引,后续才加索引</strong></p>\n<p>答: 一个好的数据表设计，在一开始就要考虑索引的创建，而不是等到后续出问题了，影响业务使用了，才新建索引来救场，而且后续创建索引的成本也相对高很多。(这就是给生产事故留下生根发芽的机会呀)</p>\n<p><strong>误解二: where条件后的字段均建索引</strong></p>\n<p>答: 这个误解比较常见，但where条件后的字段不需要全部建立索引，过多的索引，也会导致索引文件剧增，也还达不到期望中的效果。详细请参考上述新建索引的小节。</p>\n<p><strong>误解三: 简单SQL不需要建立索引,联合查询采建立索引</strong></p>\n<p>答: 这个误解就得好好说说了，现在互联网公司特别是B/S架构下，业务逻辑均剥离在代码逻辑层，到最后SQL层面，其实都是一些简单的SQL，只有些许连接查询，更多的还是单表操作，(C/S架构中有很多在SQL层面的写逻辑的)，你说这些语句简不简单。</p>\n<p><strong>误解四: 联合索引的顺序是where条件后字段的先后顺序</strong></p>\n<p>答: 我们刚才说过，联合索引的顺序，是根据最左前缀原则，以及区分度来区分的，和where条件后字段的先后顺序无关。</p>\n<p><strong>误解五： 对于区分度较小的字段新建索引</strong></p>\n<p>答: 在区分度较小的字段上新建索引，基本无效，还会增加大量的索引文件，你说是不是得不偿失。</p>\n<p> </p>\n<h4>索引重不重要？</h4>\n<p>上面介绍了MySQL索引的概念，新建索引时的一些技巧。这么理论的东西，对于平时没有使用或使用比较少的童鞋，此时对索引的重要性可能还没那么直观，那么，我就来说说我在索引上吃过的亏，踩过的坑！同时也是未建索引常见问题！</p>\n<p><strong>0. 导致慢查询</strong><br>\n这个问题可是未建索引的常客哦，（这里也还有很多细节呢，如: 隐式类型转换等等）</p>\n<p><strong>1. 导致服务超时</strong></p>\n<p><strong>场景 :</strong><br>\n在某次上线时，作为服务提供者，提供服务给业务方使用。一开始以为就提供一个简单的服务，也已经测试完成，心里还在窃喜，今天总算可以早早回家了！<br>\n<strong>描述 :</strong><br>\n实际一上线，在生产环境中导致业务方请求调用时，而且每次请求均超时，数据也已落地，此时只能review代码，最后发现生产中有个慢查询导致，活活的花费了10多秒，这个语句有多简单呢，你绝对想不到，就是一个简单的单表where查询。</p>\n<p>你说这种原因导致服务不可用，你说冤不冤，气不气！（这也是我为什么说，一个好的数据表设计，从一开始就要考虑新建索引了）。</p>\n<p><strong>2. 数据库服务器CPU 100%</strong></p>\n<p>在查询频率比较高的SQL上，如果出现未建索引，导致慢查询的话，那可是会导致数据库服务器CPU 100%，影响可是整个系统哦。</p>\n<p><strong>小结</strong><br>\n上面说了好几类，由于没建立索引而导致的问题，轻则导致慢查询，影响系统效率，重则，导致CPU 100%，影响整个系统的使用，看到这里，你说索引重不重要？</p>\n<p> </p>\n<h4>最后</h4>\n<p>上面简单说了，索引是什么、有什么用，以及建立索引时的一些技巧，还着重说了索引的重要性。那么索引这么重要，在平时编码时如何规避问题呢？以下是我个人的建议:</p>\n<ol>\n<li>在建表时就应该考虑添加索引，如: 外键字段等等。</li>\n<li>在写完SQL后，一定要查看执行计划。尽量避免全表扫描。</li>\n<li>如果是已有表中添加索引，一定要先计算该字段的区分度。</li>\n<li>联合索引，将区分度大放在前面。</li>\n<li>遵从MySQL左列前缀优先原则</li>\n</ol>\n<p> </p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113142\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113142votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113142\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,MySQL,数据库", "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg"}
{"url_object_id": "5e244333b2e2d343e4da5e7def593f3e", "title": "大道至简，职场上做人做事做管理", "url": "http://blog.jobbole.com/112724/", "create_date": "2017/12/05", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fm5xvq0mhvj20m80etq7d.jpg"], "praise_nums": "2", "fav_nums": 0, "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/JimmyZhang/archive/2011/08/20/2146390.html\">JimmyZhang</a>   </div><p>大道至简，越是根源和基本的问题，道理实际上越简单。关于如何做人、做事、做管理的书很多，我看得不多，但是我觉得这些书更多是侧重技术和实现细节上的，而很少从人的思想和观念去讲。实际上，从根本上去说，如何做人做事是世界观的问题，也是一个哲学话题。很多人和我一样，已经到了快30的年纪，是需要去思考一下应该如何做人如何做事的，也需要一套简单、有效、完整的体系来指导自己，而这套体系将是让自己安身立命于这个世界的基石。</p>\n<h3>职场上如何做人</h3>\n<p>关于在职场上如何做人，我只谨记两个字－－服务。你要把自己当成一个品牌去爱惜，当成一家公司去经营，你要牢牢记住你之所以能在一家公司立足，是因为公司需要你的服务。我们经常会抱怨某某银行的工作人员服务态度不好、某某商品的售后服务不好，但从来不去思考自己对公司的服务好不好？公司的任务有没有如期完成，是不是没有哪个任务是提前完成的，几乎所有任务都拖到“最后期限”？工作完成的够不够彻底，是不是答复已经完成了，结果日后又出状况？完成后有没有向上级反馈，是不是等到上级问你完成了没有，你才去报告进度？拖延的任务有没有持续跟进，是不是上级不追了这个任务最后就不了了之了？上面这些问题我都是反复遇见的，其实根本原因就是没有意识到你其实在做一项服务，你在公司的发展前景，全都取决你对公司的服务够不够好。设想一下，如果交给你的每件事情都可以迎刃而解、化险为夷，让人感觉稳妥、放心、踏实，你自然会收到更多更重要的“订单”。当你的单多到你忙不过来的时候怎么办？招下属啊，呵呵，恭喜你，你已经是领导了。反之，如果给你一件事情你要拖延，给你一件事情你办不好，给你一件事情就没了下文了，让人不放心，久而久之你就“无单可做”了，那么公司重新请一个人就可以了，干嘛非要用你呢？</p>\n<p>服务不光是对于自己供职的公司，对于公司的客户也是一样的。每一次去客户那里出差前，我总是再三叮嘱自己，我此次之行是为客户做服务的，是去为客户解决问题的。这个心态非常重要，我们做软件系统的，去见客户除了做演示、做培训，很多时候就是处理现场问题，难免遇到客户对系统的投诉，比如系统速度慢、bug多等问题。当你有了这样的心态，你就会谦虚地接受客户的批评，细致地记录客户提出的问题，然后一项项地去思考如何解决，并且应该给客户一份详尽的解决方案。有了这样的心态，你会不自觉地、自然而然地与客户站在一边，让他感到你是在为他着想，帮助他去解决问题的。在你面对客户时，应该有这样一个虔诚的信念：我是去为客户服务的，为他解决他所解决不了的问题的。如果你没有这样的心态，面对投诉很可能就会产生厌烦，而且容易为自己的问题进行辩解。这种做法给客户的感觉就是你竭力在证明你是对的他是错的，这样你就站在客户的对面了。</p>\n<p>在客户面前的表现对你的职场发展也是非常有好处的，尤其是接触到一些跨国企业时，你优良的职业素养会为你赢来客户的认同与尊敬。这样当你哪天希望寻找更高的平台，只要放个口风出去，立即就会有Offer了。所以认真服务好客户只赚不赔。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fm5xvq0mhvj20m80etq7d.jpg\" width=\"690\" height=\"460\"></p>\n<h3>职场上如何做事</h3>\n<p>关于如何做事，也有很多的理论，比如要事第一，把事情分为紧急、重要等等，这些我都不讨论了，我只就我自己的经验来谈一谈。</p>\n<p>对于如何做事，我也恪守一个信条：不焦不燥，把心沉下去，将注意力集中于要解决的问题上。</p>\n<p>我看过这样一个故事，是说从前有一户人家，家里的菜园中有一块大石头，经常会有人不小心撞到；儿子就问：为什么不把他挖走呢？他的爸爸说：这个石头爷爷的时代就有了，就是因为它那么大，不好挖才一直在那里；又过了一代人，家里的一个媳妇实在受不了，就扛着锄头去挖了，她已经做好了心理准备要挖几天的时间，结果一天就挖完了… …原来那个石头的中间是空的。</p>\n<p>我们遇到的很多事情也是一样的，看似棘手、难以解决，实际上只要你认真地去分析、去思考，然后放手去做，往往并没有想象中的那么困难。你需要克服心中的顽石。我发现一些人遇到问题后，很轻易地就会说：这个我做不了，这个实现不了，这个我也没办法。其实就好像看到这块大石头一样，被它的“外表”吓住了，而放弃了应有的行动。</p>\n<p>而且我发现了一个有趣的现象，不管多么困难的问题，只要你沉下心去思考如何解决，就好像在冥冥之中上苍在看着你一样，当你拼到最后就要打算认输的时候，往往会出现新的契机和方法。</p>\n<p>另外，我发现有些人遇到问题的时候，他想的是这件事如何困难如何难以完成，这样的思维方式是有问题的，是一种保守且退缩的思维；遇到问题的时候，想的应该是如何才能够完成。我一般采取这样几个步骤：1、列出所有的可能性；2、分析各种可能性；3、选择一种实现起来最简单、快速的可能性；4、去实现。</p>\n<p>除此以外，我发现一些人在做事的时候，会以“这样做很麻烦”来作为不采纳方案的理由，而不是“这样是否必要”或者“这样是否更好”来作为标准，实际上“麻烦”应该是排在“是否必要”、“是否更好”后面进行考虑的。如果一种实现方式，虽然麻烦，但是很有必要，且对客户来说更好，那么就算麻烦也要去做。但是程序员往往关心的是会不会很麻烦，是不是要修改很多地方，是不是给自己带来很多工作量… …告诉你，你关心的这些不是最重要的。</p>\n<h3>职场上如何做管理</h3>\n<p>和上面一样，做管理也有很多的细节，我也都不谈了，因为这些都是一本书一本书的讲，而我觉得要简单、有效、好操作，所以我也只说三点。</p>\n<p>我觉得做好一个技术经理，只要下面的三点就好了：</p>\n<p><strong>1、德行</strong></p>\n<p>德行其实就是品德，简单地讲就是要善良、诚恳。最重要的，你做事的出发点要是好的，对别人是没有坏心的。为什么说出发点一定要是好的呢？我们还是以服务客户的例子来说，在为客户解决问题的时候，如果我们的出发点是好的，是站在客户一边尽心尽力去为客户解决问题的，那么即便由于方法、能力、条件等各方面的原因，事情搞砸了或者没有做好，也很容易获得客户的理解和原谅。很可能的情形是，你就算做失败了也一样赢得客户；相反，如果你的出发点是“省麻烦”，“赶紧交差了事”，“完成任务”，如果事情做成了也就算了，一旦失败了，你看看客户会怎么样？告诉你，好的客户会批评你、投诉你，因为他对你还有期望；更多的客户是什么话也不说，直接换个供应商就是了，才懒得理你。记住永远不要把客户当成傻瓜，你是如何做事情的，客户是很容易感受得到的。所以，面对和服务客户没有那么多的技巧，你不需要有多好的口才和魅力，也用不着忽悠和夸大其词(我发现很多销售人员都是这样，你可以骗客户一次，但就没有第二次了)，你只需要放下身段，兢兢业业地为客户着想，设身处地地解决他的问题就可以。对待下属也是一样的，你对他的奖励也好，惩罚也好，出发点一定要是好的。我对待下属遵循的原则就是：我是在帮助你，帮你把工作做的更好，帮你获得更大的提高，而不是说找你茬儿，跟你过意不去，或者是挤兑你压迫你。德行是基本的，有一个好的德行，至少可以保证你的下属不会讨厌你。</p>\n<p><strong>2、敬业</strong></p>\n<p>如果有人问我，下属和经理的区别是什么。我会告诉他：下属等着别人交代事情做，经理想着还有哪些事情可以做。这其实是一个积极心态的问题，作为一个中层干部，你需要将公司的事情当成自己家的事情来处理，当你有这样的心态，你就是再怎么加班都不会有怨言的，即便分文不取… （有谁见过给自己家装修叫苦不迭的？）如果你可以长期保持这样的状态，你的这种献身精神和敬业精神，会很轻易地感染你的下属和你的同事，你会感觉到在公司左右逢源，而且你也会更有话语权，大家会更重视你的意见，同事和下属也会对你报以更多的信任。当这种情况出现时，管理起下属还会困难吗？但需要注意的是，你的敬业精神不是说体现在无休止的加班上，工作异常繁忙、经常性加班其实是工作没有做好的表现之一，加班只应该出现在紧急情况发生的时候，而不应该是一种常态。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm5xvphmcxj20m80ewwfw.jpg\" width=\"690\" height=\"462\"></p>\n<p><strong>3、技术</strong></p>\n<p>如果有人问我，技术人员和其他人员最大的区别是什么。我会告诉他：技术人员个个自以为是，认为别人的技术都不如自己。呵呵，可能大家不爱听，但我观察到的现象就是这样的。很少有人愿意去读别人的代码，彼此都觉得写得好烂。所以，如果想赢得技术人员的钦佩，你需要有压倒性的技术能力。这个压倒性的优势，不是下属70分，你80分，而是下属70分，你要做到100分；下属100分，你要做到150分。所以，缺乏技术能力的人去管理技术人员往往是吃力不讨好的，可能下属表面上服从你，心里根本不当你一回事儿，这样管理起来就存在障碍了。当然，如果你的德行非常好，也非常敬业，技术就显得不那么重要了；而如果你已经满足了前面两条，同时技术也很精湛，那自然是锦上添花了。</p>\n<p>上面就是一点点心得，欢迎交流。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112724\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112724votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112724\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,职场", "front_image_path": "full/e64fca57ae5ee001243898066e610c2e2800dcaa.jpg"}
{"url_object_id": "4f618c983b25ffff16b2f08257be1136", "title": "自动化来势汹汹，未来的程序员该何去何从？", "url": "http://blog.jobbole.com/113147/", "create_date": "2017/11/30", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/08/programmer-developer-at-work.jpg"], "praise_nums": "1", "fav_nums": 4, "comment_nums": 3, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.com/@TebbaVonMathenstien/are-programmers-headed-toward-another-bursting-bubble-528e30c59a0e\">Tebba Von Mathenstien</a>   译文出处：<a target=\"_blank\" href=\"https://36kr.com/p/5105109.html\">36氪</a>   </div><p>【编者按】：AI、自动化，这些技术进步不仅威胁到到了其他行业的工作，甚至有声音认为，连开发这些技术的程序员其自嘲的“码农”地位都将不保。比方说，OpenAI 前研究科学家 Andrej Karpathy 就<a href=\"https://36kr.com/p/5103242.html\" target=\"_self\">认为</a>，在AI引领的软件2.0趋势下，传统程序员真的有可能要失业了。不过，跟 Tyler Elliot Bettilyon 相比，这些都是对程序员未来的片面看法，相对而言，他对程序员未来的工作前景分析更加全面客观，值得从业者好好<a href=\"https://medium.com/@TebbaVonMathenstien/are-programmers-headed-toward-another-bursting-bubble-528e30c59a0e\" target=\"_self\">看看</a>，思考未来作何选择。</p>\n<p>我的一位朋友最近提出了一个问题，这样的问题我在不同场合都听说过，只是形式各不相同：</p>\n<blockquote><p>你是否认为IT和一些低端的编程工作会重蹈渡渡鸟的覆辙？看起来一场大规模的就业泡沫似乎就要破裂了。在我看来，技术和低端计算机科学相关工作之所以还“久负盛名”并且拿到不菲的报酬的其中一个原因，是那些荒谬的行话以及公众对计算机的无知，但这两个在未来10年都会消失……</p></blockquote>\n<p>这个问题同时指向了两点，一是技术工作的未来，二是对软件工程领域的普遍误解。虽说有大量“荒谬的行话”没错，但是还有同样多的困难问题等着那帮有着合适技能组合的人去解决也是事实。一些软件工作绝对是要消失的，但在很多年的时间里有着合适经验和知识的一些程序员仍然会继续享有声望并且拿到可观的报酬；作为例子可以看看最近AI研究人员薪水的爆发以及可用人才的相应短缺就知道了。</p>\n<p>在不断变化的技术业能够保持与时俱进是个挑战。通过审视取代现在哪些程序员的技术可以预测出市场的那些岗位会消失。此外，要想预测特定技能薪酬和需求变化我们应该考虑学习编程群体的壮大情况。就像Hannah指出“公众对计算机的无知”导致了那些会编程的人工资高企一样，大众对计算机的认知正在逐年变得更加娴熟。</p>\n<p><strong>日益走向商品化</strong></p>\n<p>对自动化取代工作的恐惧既不新鲜也不是杞人忧天。在任何领域，尤其是在技术领域，市场力量都会推动着企业朝着自动化和商品化发展。Gartner的炒作周期曲线就是对这一现象的很好诠释。</p>\n<p><span class=\"load-html-img loaded\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/ec63e35ba99dfacfddc63231e5ae5d2f.jpg\" alt=\"自动化来势汹汹，未来的程序员该何去何从？\" data-img-size-val=\"800,619\"></span></p>\n<p style=\"text-align: center;\">Gartner 2017炒作周期曲线</p>\n<p>随着时间延续，特定想法和技术把生产力推进到了“高原期”，最终实现自动化。但凡回顾历史就能得出结论，自动化是有能力摧毁特定的就业市场的。从作物收割到，到汽车装配，不同行业的技术发展正在不断替代和增强人类劳动力，降低成本。一位教授曾经在自己的编译器课程上总结说，“以史为鉴，看看纺织业和钢铁业：你是想建造机器和工具呢，还是想操作那些机器？”</p>\n<p>在这里“机器”的隐喻是指计算机编程语言。这位教授其实是问：你是想用JavaScript开发网站呢，还是想开发驱动JavaScript的<a href=\"https://github.com/v8/v8\" target=\"_self\">V8引擎</a>？</p>\n<p>网站的创建工作已经由WordPress等工具自动化了。而另一方面V8的竞争对手也越来越多，其中一些正在解决开放的研究问题。语言会来了又走（想想看现在还有多少分Fortran的工作？），但总会有人开发下一种编程语言。我们是幸运的，因为编程语言的实现也是用编程语言写的。作为软件的“机器操作者”把你推上了一条成为“机器制造者”的道路，这是过去的钢铁厂工人所没有走过的。</p>\n<p>语言、解译器以及编译器的不断增多向我们表明，每一台摧毁工作的机器也提供了对这些机器进行改进、维护等的新机遇。尽管消失的工作的列表正在变得越来越长，但是人类全体都认为“我想已经没有工作可以做的了”的那个历史性时刻还没有到来。</p>\n<p><span class=\"load-html-img loaded\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/aeda4039483d8093363233d4be04c23a.jpg\" alt=\"自动化来势汹汹，未来的程序员该何去何从？\" data-img-size-val=\"650,448\"></span></p>\n<p style=\"text-align: center;\">Pinsetters</p>\n<p>商品化会向我们所有人袭来，不仅仅只是软件工程师。在整个历史长河中，人类劳动力都在不断被非人类的东西取代或者增强，导致工作所需的人更少，对技能的要求更低。自动汽车和自动卡车只是这个伟大的人类传统的一时之兴。如果创造和自动化的周期是生活的现实，接下来我们自然要问：哪些工作和行业有危险，哪些又暂时无忧呢？</p>\n<p><strong>谁自动化谁？</strong></p>\n<p>AWS、Heroku等类似托管主机平台永久性地改变了系统管理员/DevOps工程师的角色。互联网企业过去绝对需要自己的服务器专家。其中一些精通Linux；一些懂得如何用Apache或者NGINX配置服务器；有的不仅会对服务器、路由器等各种物理组件进行布线，而且还懂配置路由表以及各种必要的软件来让服务器供大众在web上访问。尽管现在仍然有一群人懂得干这一行，但AWS正在令其中一些技能变得过时——尤其是对经验要求更低的一些事情以及硬件类的事情。对于灵通物理基础设施的人来说，Amazon（以及Netflix、Google等）内部还有非常赚钱的角色可以担任，但是中小企业方面对这些角色的需求已经大为减少。</p>\n<p>像SalesForce、Tableau以及SpotFire这样的“商业智能（BI）”工具正在开始占领历史上属于软件工程师的地盘。这些系统已经减少了对内部数据库管理员的需求，但作为一种通用技能同时也增加了对SQL的需求。BI还减少了对内部报表技术的需求，但增加了对“集成工程师”的需求，后者的工作是将来自企业的数据流交给第三方平台进行自动化处理。一度为Excel和电子表格所统治的数据管理领域正在逐步被推向Python或者R这样的脚本语言以及SQL上。一些工作会消失，但对能够写软件的人的需求总体上来说是增长的。</p>\n<p>就更接近软件而言，数据科学是商品化的一个很好的例子。Scikit.learn、Tensorflow以及PyTorch都是、方便大家编写机器学习软件的软件库。事实上，用同一个数据集跑许多有着不同参数集、同时赌气算法实现几乎一无所知的机器学习算法是有可能的（当然这么做是不明智的，这里只是说可能性）。我敢打赌未来几年商业智能公司会尝试将这些类型的算法集成到自己的工具里面。</p>\n<p>从很多方面来说数据科学就像5到8年前的web开发——这是一个蓬勃发展的领域，因为“技能鸿沟”，你能够获得的效果知识很少。后来，随着web开发训练营的关停整合，数据科学训练营又在原来的地方冒出来。收购了原来的web开发训练营（Dev Bootcamp）的Kaplan现在就是设立了一个数据科学训练营（Metis），并且决定关闭DevBootcamp，同时维持Metis的运转。</p>\n<p>内容管理系统是工具里面因为自动化而取消对软件工程师需求的最明显例子之一。SquareSpace和WordPress是当今最流行的CMS系统之一。这些平台显著降低了只有一点前端web开发技能的人的价值。事实上，做网站并把它放上网的门槛已经低了很多，低到毫无变成经验的人也能够每天都成功地发布新网站。这些人没法做出服务数十亿人的、交互性极强的网站，但是替自己的企业制作网站为客户提供所需信息绝对是可以的。一个可爱的登录页，再加上如何寻找公司、如何联络自己这样的信息对于当地饭店、酒吧或者零售店来说已经绰绰有余。</p>\n<p>如果你的企业不是以“互联网业务”为主，想弄个过得去的网站放到网上从来都没有像现在这么容易。因此，可迅速做好网站并放到网上的 web承包商产业一度欣欣向荣，但现在已经变得没那么赚钱了。</p>\n<p>最后，在这种情况下如果忽视计算机的物理方面的话这种态度近乎自大。用Mike Acton的话来说：“软件不是平台，硬件才是平台”。搞软件的人至少要学习一点计算机体系结构和电气工程的知识才算是明智的。硬件的一次大动荡，消比如费者级的量子计算机的出现将会改变软件工程的一切。</p>\n<p>量子计算机仍然还有很长一段路要走，但对GPU的兴趣在增加，同时朝着并行化的方向发展是即将到来的转变。 CPU的速度近几年来一直停滞不前，而在当时，对机器学习和“大数据”的渴望似乎已经达到无可遏止的地步。随着对大型数据集的处理需求与日俱增，OpenMP，OpenCL，Go，CUDA等其他并行处理语言和框架将继续成为主流。为了在短期内快速提高竞争力，显著并行化将成为全面需求，而不仅仅局限在高性能的小众应用领域，比如操作系统，基础设施以及视频游戏等。</p>\n<p><strong>人人都在学编码</strong></p>\n<p>网站无所不在。<a href=\"https://insights.stackoverflow.com/survey/2017#company-type\" target=\"_self\">2017 Stack Overflow调查报告</a>指出，约15%的专业软件工程师正在“互联网/Web服务”公司工作。美国劳工部预计Web开发的增长率比平均岗位需求增长速度高很多的情况仍将继续（<a href=\"https://www.bls.gov/ooh/computer-and-information-technology/web-developers.htm\" target=\"_self\">2014年到2024年间为24%</a>）。鉴于其可视性，这个行业很大一部分的关注点都会落在“填补技能鸿沟”上面。编码训练营几乎只教Web开发，而Udemy、Udacity以及Coursera等类似市场上也充斥着Web开发的课程。</p>\n<p>整个Web开发技术栈的自动化程度越来越高，入门级的新程序员大量涌入Web开发领域，这导致部分人预测软件开发人员将会面临一个<a href=\"https://www.wired.com/2017/02/programming-is-the-new-blue-collar-job/\" target=\"_self\">“蓝领”市场</a>。有的人甚至更加激进一点，认为把这个产业推向蓝领市场是大型科技公司设计的战略。当然，其他人会说我们正朝着又一次泡沫破裂进发。</p>\n<p>对特定技术需求的变化已经不是新闻。技术的语言和框架总是会有此消彼长的情况。Web开发目前的化身（“JS为王”）的走势最终会像2000年代早期的Web开发走势一样（还记得Flash吗？）所不同的是，这次在当今流行的web开发框架上很多人都有着明确（且主要）的教育经历。在你决定给自己贴上“React开发者”标签之前，请记住曾经有人自认为是“Flash开发者”。如果把你的职业生涯吊死在一种语言、框架或者技术上无异于玩轮盘赌游戏。当然，要预测哪些技术还将继续发展下去是相当困难的，但是如果你打算找个东西全力以赴的话，我建议可以按照Lindy效应（对易损的东西来说，每多活一天，都会缩短其寿命；相反的，对于不易损的东西来说，每多活一天，都将更拉长其存在寿命。）选出一些已经经受住了时间考验的语言，比如C语言。</p>\n<p>下一代人将具备一种事实上的技术素养水平，这是X世代乃至千禧世代所不具备的。其结果之一是，这些人将会使用下一代的CMS工具。这些工具会变得更好，年轻的工作者也会用得更好会更好地使用它们。随着充满渴望技能熟练的年轻人进入就业市场，这两个因素的结合绝对会降低低水平的IT和web开发技能的价值。高中也在迎头赶上，开始提供计算机科学和编程课程，一些受过良好教育的高中学生一旦毕业可能就会马上以编程实习生的身份加入劳动大军。</p>\n<p>另外一大群的新人是MBA和数据分析师。一度由Excel主宰的岗位列表正在开始把SQL列为“具备更好”，甚至变成了“岗位要求”。诸如Tableau，SpotFire，SalesForce等基于Web的指标体系在继续取代电子表格作为报表生成主要工具的地位。如果这种情况持续下去，更多的数据分析师将会开始学习如何直接使用SQL，因为这要比把数据导出到电子表格更加简单。</p>\n<p>想要超越同行在职场继续往上爬的人正在网上学习数据库和统计变成语言方面的课程。有了这些新技能之后，通过机器学习和统计库的学习，他们就可以把自己定位成数据科学家了。走这条路的话看看Metis的课程就是很好的例子。</p>\n<p>最后，获得计算机科学和软件工程学位的人数在不断攀升。比如说，普渡大学报告说，其计算机课程课程的申请量在5年间已经翻了一番。康奈尔大学的计算机科学毕业生也出现了类似的爆发式增长。鉴于软件的发展和普及，这种趋势并不令人惊讶。年轻人很难会想象出计算机在我们的未来发挥的作用会越来越小，所以为什么不去学习一些能提供工作保障的东西呢。</p>\n<p><strong>稀有与期望</strong></p>\n<p>现在这个行业的一个普遍的观点是，你在大学四年计算机科学课程中受到的教育大多是不必要的东西。我已经多次在编程训练营的大厅里，web开发商店里听到过这样的说法，甚至像Eric Elliott这样的业界知名人物都<a href=\"https://medium.com/javascript-scene/want-to-code-a-university-degree-might-be-a-huge-waste-of-time-81e1817a2ef0\" target=\"_self\">这么说</a>。不过反方意见也很流行，有的甚至说“<a href=\"https://qz.com/414542/why-programmers-should-get-a-masters-degree/\" target=\"_self\">所有的程序员都应该拿到硕士学位</a>”。</p>\n<p>我的观点跟Eric Elliott一样，我认为学习编程应该有更多的选择，而4年的学位未必许多人的最佳选择。同时，我也同意William Bain的观点，即跨编程领域的基础技能对职业寿命至关重要，但是除了大学课程，目前你很难在其他地方找到这些信息。我曾经写过，作为长期职业生涯的基础，有抱负的工程师应该学习什么样的技能，并且解释了为了帮助分享这些知识，我加入了Bradfield。</p>\n<p>不同形态和规模的编码学校正变得愈发的无处不在，这里面有很好的理由。你不用了解大O符号、晦涩的数据结构以及算法细节也能学习编程。然而，尽管斯坦福大学的新鲜热辣的毕业生确实也能跟刚出Hack Reactor出来的人竞争一些工作，但这种情况只在一个或两个子行业中出现。编码学校和训练营的毕业生还没有申请嵌入式系统、密码/安全、机器人、网络基础设施或人工智能研究和开发方面的工作。但这些领域就像web开发一样正在迅速发展。</p>\n<p>一些与编程相关的技能已经开始从“稀有技能”向“基准期望”过渡。相反，建立像AWS这样强悍的引擎的工作已经非常普遍的。推动技术发展的大公司——比如Amazon、Google、Facebook、Nvidia以及Space-X等——通常不会找“对JavaScript有基本了解”的人。 AWS每天为数十亿用户提供服务。为了支撑这种载荷量，AWS基础设施工程师需要对网络协议、计算机架构有深入的了解，并且要有多年的相关经验。就像任何学科一样，这里面有业余爱好者和工匠之别。</p>\n<p>这些知名企业正在解决研究问题开发真正建立真正开拓能力疆界的系统。然而，即使在基本的编程技能越来越普遍的情况下，他们仍然很难填补其中的空缺。可以编写算法来预测基因序列变化从而带来想要结果的人在未来将会非常值钱。可以对卫星、航天器和机械自动化编程的人将继续受到高度重视。这些领域并不适合采取前端web开发那种“3个月密集学习计划”的人才速成，至少还没有像样的成功先例。</p>\n<p>因为计算机科学开头是“计算机”这个词，所以我们可以认为，到2025年，所有的年轻人天生就能理解计算机。不幸的是，计算机的普及并没有造就对数学、计算机科学、网络基础设施、电气工程等有着事实上的了解的新一代人。会用计算机跟计算研究是不一样的。尽管数学自创始伊始就已经存在，但十分精通统计学的人仍然相对较少，而计算机科学也是一样的陈旧。 Euclid发明了好几种算法，其中之一是在每次发出HTTPS请求时使用；每次我们登录网站都要用HTTPS这一事实并不会自动让任何人了解这些协议是如何工作的。</p>\n<p><strong>双峰工资分布</strong></p>\n<p>更成熟的专业领域往往会有双峰的工资分布模式：相对较少的从业人员赚走了相当多的钱，其中大多数人的工资都不错，但并没有处在前1%之列。美国全国法律就业组织收集的数据可以十分清晰地反映出这一现象。大部分法学毕业生的工资在45000美元到65000美元之间，这是很高的工资了，但很难跟“顶尖专业人士”联系在一起。</p>\n<p><span class=\"load-html-img loaded\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/82e94b917a7e5639fb5b2459b453fbf2.jpg\" alt=\"自动化来势汹汹，未来的程序员该何去何从？\" data-img-size-val=\"800,582\"></span></p>\n<p style=\"text-align: center;\">法律专业的工资分布情况</p>\n<p>我们往往会认为，所有的法律毕业生都有可能成为一家律师事务所的合伙人，但事实上他们有很多条路可以走：律师助理，文员，公设辩护人，法官，企业法律服务，合同写作等等。计算机科学专业的毕业生也有很多选择，从Web开发到嵌入式系统不等。基本的编程技能会继续成为一种期望，而不是“锦上添花”，我怀疑编程工作也会出现类似的分布情况。</p>\n<p>尽管还会有一批程序员靠着不断推进技术极限而赚到很多的钱，但是为新的以计算机为中心的经济提供动力的中级程序员队伍将会越来越壮大。Web开发人员的平均工资肯定会随着时间的推移而下降。说虽如此，但我怀疑“程序员”的岗位总量只会继续增长。随着人工的供给侧开始满足需求，希望我们将看到各种中级编程工作将会出现有益的繁荣。对于那些正在开辟无限可能的程序员来说，他们还将继续拿到顶级的职业工资。</p>\n<p>不管你是属于哪一类的程序员，从事技术行业意味着终生都要继续教育。如果你想成为第二类程序员，你就得加大投入，去学习如何创造机器，而不仅仅是使用机器。</p>\n<p> </p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113147\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113147votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113147\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "职场,程序员,自动化", "front_image_path": "full/bb38d11fb4038702790e0370ed966c50f186ff40.jpg"}
{"url_object_id": "c6756a8d7f29cfd491297923fa0cbbcb", "title": "Google Brain 推荐算法，给了 Youtube 新生", "url": "http://blog.jobbole.com/113153/", "create_date": "2017/12/04", "front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm098yai29j20g40apq4j.jpg"], "praise_nums": "2", "fav_nums": 1, "comment_nums": 1, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.theverge.com/2017/8/30/16222850/youtube-google-brain-algorithm-video-recommendation-personalized-feed\">Casey Newton</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><em>YouTube 整合 Google Brain 推荐算法，视频播放量提升 20 倍。</em></p>\n<p>去年晚些时候，我在玩《羞辱2》（Dishonored 2）游戏时，照常在 YouTube 上搜索了如何通过游戏中棘手的部分。和往常一样，我找到了一个能回答我问题的视频。</p>\n<p><img class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm098xpivkj21hc0u0dmd.jpg\" width=\"621\" height=\"349\"></p>\n<p>但是在我下一次访问 YouTube 时，网站给我推送了更多引人入胜的《羞辱》游戏视频，比如：</p>\n<ul>\n<li>玩家在玩《羞辱》时能够<u><a href=\"https://www.youtube.com/watch?v=wKF5Rs1A8w8\">不被敌人察觉</a></u>的剪辑；</li>\n<li>玩家用<a href=\"https://www.youtube.com/watch?v=tWSIHC2lvn4&amp;t=597s\">极具创造性的方法</a>杀死每一个敌人的剪辑；</li>\n<li>对游戏开发人员的采访；</li>\n<li>聪明的<a href=\"https://www.youtube.com/watch?v=AivuXyh9PV4\">讽刺评价</a>。</li>\n</ul>\n<p>我到 YouTube 去寻找我问题的答案，它则向我展示了一个宇宙。</p>\n<p>随后，我发现自己一天就要访问 YouTube 好几次。大多数时候我都漫无目的，我已经习惯了网站主动提供我会喜欢的视频。一月份的时候，我迷上了一个叫 <a href=\"https://www.youtube.com/watch?v=mgSnptOsCuw&amp;t=996s\">Pinegrove</a> 的民谣摇滚乐队，几周内 YouTube 就向我提供了几乎所有上传到服务器上的该乐队现场演出。当我今年春天有了一个新公寓时，我开始更频繁地下厨了。在我搜索了如何做意大利面包沙拉之后，YouTube 很快就向我推送了大量专业厨师：<a href=\"https://www.youtube.com/user/ByronTalbott\">Byron Talbott</a>、Serious Eat 的 <a href=\"https://www.youtube.com/watch?v=66btvAWmp7g\">J. Kenji López-Alt</a>、以及 <a href=\"https://www.youtube.com/channel/UCJFp8uSYCjXOMnkUyb3CQ3Q\">Tasty</a> 团队等。</p>\n<p>YouTube一直都是非常实用。自从它于 2005 年成立，就一直是网络的中流砥柱。但是过去一年左右，反正对我来说，YouTube 似乎开始变得出奇的好。这个网站开始以怪异的准确性来预测我可能会感兴趣的视频——比以前精准太多了。那么什么改变了呢？</p>\n<p><img class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm098yai29j20g40apq4j.jpg\" width=\"580\" height=\"385\"></p>\n<p>在 12 年的历程中，YouTube 已经从一个搜索驱动的网站转变成了一个本身就是目的地的网站。实现这一转变需要数百次的实验、少量的重新设计，以及在人工智能领域的一些重大飞跃。但是真正提升了 YouTube 的，是其在 feed 上的演化发展。</p>\n<p>虽然现在很难回忆起来，但是 YouTube 最初不过是基础设施：它提供了一个把视频嵌入其他网页上的简便方法，这也是你最可能用到它的地方。随着 YouTube 的发展，它成了一个寻找档案电视剪辑、补深夜喜剧，以及观看最新热点视频的网站。除了维基百科以外，YouTube 很可能是网上最引人入胜的地方。你的同事在饮水机旁边提到了 <a href=\"https://www.youtube.com/watch?v=8f7wj_RcqYk\">Harlem Shake</a>，于是你花了余下的整个晚上，去 YouTube 上看了 Harlem Shake 的视频。</p>\n<p>与此同时，Facebook 已经发明了我们这个时代的定义形式：News Feed。它是根据你的兴趣，个性化定制的无限更新流。Feed 占领了消费者网络，从 Tumblr 到 Twitter，到 Instagram，再到 LinkedIn。YouTube 早期实现个性化的方法要更有限，包括要求用户订阅频道。这个比喻来自于电视，并且产生了混杂的结果。虽然 2011 年的大量推送订阅取得了一些成功，但是 ComScore 上的数据显示，一个人观看 YouTube 的平均时间却没有变化。</p>\n<p>频道不再像曾经那样支配着 YouTube。现在，在手机上打开 YouTube， 会发现它们隐藏在一个分开的标签页里。而应用打开的则是一个 feed 流，由根据用户兴趣定制的视频集组成。当然有来自你订阅频道的视频，但是还有来自你可能没有看过的频道的视频，这些视频跟你之前观看过的视频相关。</p>\n<p>这就是为什么直接搜索了《羞辱》（Dishonored）视频之后，我开始看到游戏中的秘密行动和讽刺评价的推荐。YouTube 开发的工具使得它的推荐不仅是个性化的，而且极其准确，从而增加了整个网站的视频观看时间。</p>\n<p>YouTube 推荐的技术领导 Jim McFadden 在 2011 年加入了公司，他说：“当人们知道他们是来找什么的时候，我们知道他们会上 YouTube。我们也希望在他们不一定知道想找什么的时候，为他们提供服务。”</p>\n<p>在 2011 年 McFadden 加入 YouTube 几个月后，我第一次访问了这个公司。YouTube 当时和现在一样，<a href=\"http://www.sfgate.com/business/article/YouTube-s-effort-to-get-people-to-watch-longer-2352967.php\">首要目标</a>都是让用户花更多时间来观看视频。那时事情进行得不是特别顺利。McFadden 说：“YouTube.com 作为一个主页，并没有大量参与度。我们想，既然这样怎么才能把它转变成目标呢？”</p>\n<p>Youtube 尝试了很多方法。给顶部的视频主（top creator）购买了专业摄影仪器。引进了 <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjTzeaMnf3VAhUQzGMKHfNaA_AQFggoMAA&amp;url=http%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLLTK93ZhdOWb3X4M3xojmqTZKTGeRSXaQ&amp;usg=AFQjCNHrRwK8QlbAD9YRMTacRrTKtN6Ipg\">leanback</a>，这个特性允许用户在当前视频播放时排列一会要看的新视频。重新设计了 Youtube 主页，突出订阅频道而不是单独的视频。</p>\n<p>每个用户观看的视频数量没有变化，但是一个改变让接下来的那个春天终于有了起色：YouTube 的算法推荐不再基于视频点击量，<a href=\"http://www.businessinsider.com/youtube-watch-time-vs-views-2015-7\">而是基于</a>视频观看时长。</p>\n<p>几乎一夜之间，那些从误导人的标题和缩略图中获益的视频主就发现他们的浏览量暴跌。更高质量的视频不断涌现，这些视频与更长的观看时间紧密相连。接下来的三年，YouTube 的用户观看时长每年增长 50%。</p>\n<p>我订阅了几个频道，并认为自己称得上是一个 YouTube 的常客。但是要想让它变成一个每天能被访问很多次的网站，YouTube 需要一些新的工具——这些工具在过去 18 个月内才成为现实。</p>\n<p>这个月当我拜访 YouTube 办公室时，McFadden 揭示了 YouTube 突然的准确推荐的原因：Google Brain，它是母公司的人工智能部门，YouTube 从 2005 年开始使用它。Google Brain 不是 YouTube 使用人工智能（AI）的第一次尝试。YouTube 之前利用过 Google 建立的系统 Sibyl，将机器学习技术应用于推荐。但是 Google Brain 应用了一种叫非监督学习的技术：它的算法能够找到不同输入之间的关系，而软件工程师永远想不到这些关系。</p>\n<p>“它的关键之一是，它能够概化（generalize）。然而之前，如果我看了一个喜剧演员的视频，我们的推荐很擅长说，这还有一个和它一样的视频。但是 Google Brain 模型能选出其他相似但并不完全一样的喜剧演员——甚至有更紧密的关系。它能够看到不那么明显的模式。”McFadden 说。</p>\n<p>举个例子，Brain 算法开始向 YouTube 手机应用用户推送短视频， 向电视应用用户推送长视频。它推测，根据平台来推送不同时长的视频，能够增加视频观看时长；这个想法是正确的。YouTube 在 2016 年发布了 190 个类似的改动，并且会在今年逐步发布另外 300 个。Todd Beaupre 是 YouTube 挖掘团队的产品组经理，他说：“事实是，大量小的改进随着时间逐步积累。对每一个改进，你尝试了 10 件事，并发布一个。”</p>\n<p>Brain 算法比 YouTube 之前运算得更快。过去几年，它需要花几天时间来将用户行为与未来推荐整合起来。该公司说，这使得公司很难确定热门主题。“如果我们想要让用户回来，弄清现在正在发生什么，那么我们已经从某种程度上解决了这个问题。现在的延迟是用分钟或者小时计算的，而不再是几天了。”Beaupre 说。</p>\n<p>整合 Brain 产生了巨大的影响：超过 70% 的 YouTube 视频观看时长都是由算法推荐产生的。每天，YouTube 向用户推荐 200 万个不同的、76 种语言的视频。人们在 YouTube 主页上观看视频的总时长比三年前增长了 20 倍。</p>\n<p>这大概和我自己的行为对上了。几年前，我开始经常在午餐时间访问 YouTube 主页，这样吃饭的时候可以看看视频。但是它的推荐足够好，让我开始更经常地给自己 YouTube 休息时间。本周我失控了，在 PlayStation 4 上登陆了 YouTube，这样我就能在我所拥有的最大屏幕设备上看推荐视频了。</p>\n<p>这就是真正个性化 feed 的强大之处。但是我对 YouTube 的感觉，与其他组成电子生活的事物很不同；这让我感到吃惊。Facebook 的 feed 是基于好友的动态，以及你点过赞的主页的动态。它能告诉你谁订婚了或者生孩子了。但是我觉得，这些关于好友里程碑式事件的动态内容没那么有趣。Twitter 中则有关注人的推文，以及他们转推的内容。作为一个记者，我几乎被要求住在 Twitter 里，尽管最近主页的时间线里只有无穷无尽的、慌张的尖叫。</p>\n<p>每种 feed 都有它的长处，尽管 2017 年让它们消减了。在 Twitter 上，无论你关注了谁，政治都主导了所有讨论。Facebook 对事件和组这类特征的一时热情导致它的 feed 周周都以不和谐的方法转变，让我觉得我和好友们不再那么相联。（都是图片的 Instagram 仍然像个绿洲，这个应用仍然在快速增长也不是什么奇迹。）</p>\n<p>Facebook、Twitter 和 Instagram，他们的 feed 都经常要求你在他们的平台上表演；这似乎很显著。YouTube 明显是由表演驱动的，即使只有小部分的用户上传过视频，它也不曾对用户施加压力，要求他们上传视频。人们可以被动地享受 YouTube，就像它想方设法地想要取代的电视频道。在这个疯狂的时代，在没有被问到我对当天新闻的反应时，有些东西也能保持镇静。</p>\n<p>YouTube 强调与你可能喜欢的视频相关联的视频，这意味着它的 feed 似乎总要比它同类型的网站在视野范围上更广、更好奇。YouTube 越是在远的地方寻找内容，它越像是想要逃离其他 feed。在黑暗的一年，我会接受 YouTube 提供的所有东西来逃避现实。</p>\n<p>2013 年，Alexis Madrigal 在 Atlantic 上写道，假定我们知道 feed 已经达到了顶峰。他认为，未来是属于有限的经历的：时事通讯邮件、Medium 专栏、10 集的 Netflix 剧集。毕竟，无穷无尽的内容流让人感到疲惫。“当媒体主义的秩序废止时，自由不会冲进真空吸尘器里，但是会产生一个有着它自己逻辑的新兴秩序。”Madrigal 写道。“我们发现，流引进了它自己种类的强烈欲望和约束。更快！更多！更快！更多！更快！更多！”</p>\n<p>4 年来，YouTube 的方法表明 feed 只会变得更加重要。抵制一个与不断提高的个性化方法相对应的、不断增长的视频库是困难的。YouTube 现在对用户进行了调查，调查他们有多喜欢推荐给他们的视频；随着时间流逝，结果会使 YouTube 更聪明——会导致更多的视频被「消费」。</p>\n<p>Beaupre 向我把这个过程描述成穿过峡谷。“这里有与你喜欢过的视频紧密联系的视频，也有热点和流行的视频。但是在这之间，是魔法区。”如果 YouTube 的对手无法找到穿过峡谷的路，他们可能会发现很难与 YouTube 抗衡。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113153\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113153votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113153\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "其他,Google Brain,Youtube,算法", "front_image_path": "full/b1f2264c1f51fd5a79fff3be41bb947d60891d5b.jpg"}
{"url_object_id": "d61fbe74705766dc3935a52a0e1a0415", "title": "机器学习之Logistic回归算法", "url": "http://blog.jobbole.com/113182/", "create_date": "2017/12/05", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/ff247977ac3e5237654ad324e8c880ed.jpg"], "praise_nums": "1", "fav_nums": 0, "comment_nums": 0, "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://holynull.leanote.com/post/Logistic-2\">Holy Null</a>   </div><h1 id=\"title\">Logistic回归算法</h1>\n<p>本文介绍机器学习中的Logistic回归算法，我们使用这个算法来给数据进行分类。Logistic回归算法同样是需要通过样本空间学习的监督学习算法，并且适用于数值型和标称型数据，例如，我们需要根据输入数据的特征值（数值型）的大小来判断数据是某种分类或者不是某种分类。</p>\n<h2 id=\"title-1\">一、样本数据</h2>\n<p>在我们的例子中，我们有这样一些样本数据：</p>\n<ul>\n<li>样本数据有3个特征值：<span id=\"MathJax-Element-1-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-1\" class=\"math\"><span id=\"MathJax-Span-2\" class=\"mrow\"><span id=\"MathJax-Span-3\" class=\"msubsup\"><span id=\"MathJax-Span-4\" class=\"mi\">X</span><span id=\"MathJax-Span-5\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>，<span id=\"MathJax-Element-2-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-6\" class=\"math\"><span id=\"MathJax-Span-7\" class=\"mrow\"><span id=\"MathJax-Span-8\" class=\"msubsup\"><span id=\"MathJax-Span-9\" class=\"mi\">X</span><span id=\"MathJax-Span-10\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>，<span id=\"MathJax-Element-3-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-11\" class=\"math\"><span id=\"MathJax-Span-12\" class=\"mrow\"><span id=\"MathJax-Span-13\" class=\"msubsup\"><span id=\"MathJax-Span-14\" class=\"mi\">X</span><span id=\"MathJax-Span-15\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span></li>\n<li>我们通过这3个特征值中的<span id=\"MathJax-Element-4-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-16\" class=\"math\"><span id=\"MathJax-Span-17\" class=\"mrow\"><span id=\"MathJax-Span-18\" class=\"msubsup\"><span id=\"MathJax-Span-19\" class=\"mi\">X</span><span id=\"MathJax-Span-20\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-5-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-21\" class=\"math\"><span id=\"MathJax-Span-22\" class=\"mrow\"><span id=\"MathJax-Span-23\" class=\"msubsup\"><span id=\"MathJax-Span-24\" class=\"mi\">X</span><span id=\"MathJax-Span-25\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>来判断数据是否符合要求，即符合要求的为1，不符合要求的为0。</li>\n<li>样本数据分类存放在一个数组中</li>\n</ul>\n<p>我们在logRegres.py文件中编写如下函数来准备数据，并将数据打印观察一下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d772149160862\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#coding=utf-8\r\nfrom numpy import *\r\ndef loadDataSet():\r\n    dataMat = []; labelMat = []\r\n    fr = open('testSet.txt')\r\n    for line in fr.readlines():\r\n        lineArr = line.strip().split()\r\n        dataMat.append([1.0, float(lineArr[0]), float(lineArr[1])])\r\n        labelMat.append(int(lineArr[2]))\r\n    return dataMat,labelMat\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    print 'dataMat:\\n',dataMat</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d772149160862-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d772149160862-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d772149160862-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d772149160862-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d772149160862-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d772149160862-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d772149160862-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d772149160862-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d772149160862-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d772149160862-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d772149160862-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d772149160862-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d772149160862-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d772149160862-1\"><span class=\"crayon-p\">#coding=utf-8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d772149160862-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-e \">import *</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d772149160862-3\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d772149160862-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d772149160862-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">fr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'testSet.txt'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d772149160862-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">readlines</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d772149160862-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">line</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d772149160862-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d772149160862-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d772149160862-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">labelMat</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d772149160862-11\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d772149160862-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d772149160862-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'dataMat:\\n'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">dataMat</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>我们来观察一下这个数据样本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d77d472817608\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndataMat:\r\n[[1.0, -0.017612, 14.053064], [1.0, -1.395634, 4.662541], [1.0, -0.752157, 6.53862], [1.0, -1.322371, 7.152853], [1.0, 0.423363, 11.054677], [1.0, 0.406704, 7.067335], [1.0, 0.667394, 12.741452], [1.0, -2.46015, 6.866805], [1.0, 0.569411, 9.548755], [1.0, -0.026632, 10.427743], [1.0, 0.850433, 6.920334], [1.0, 1.347183, 13.1755], [1.0, 1.176813, 3.16702], [1.0, -1.781871, 9.097953], [1.0, -0.566606, 5.749003], [1.0, 0.931635, 1.589505], [1.0, -0.024205, 6.151823], [1.0, -0.036453, 2.690988], [1.0, -0.196949, 0.444165], [1.0, 1.014459, 5.754399], [1.0, 1.985298, 3.230619], [1.0, -1.693453, -0.55754], [1.0, -0.576525, 11.778922], [1.0, -0.346811, -1.67873], [1.0, -2.124484, 2.672471], [1.0, 1.217916, 9.597015], [1.0, -0.733928, 9.098687], [1.0, -3.642001, -1.618087], [1.0, 0.315985, 3.523953], [1.0, 1.416614, 9.619232], [1.0, -0.386323, 3.989286], [1.0, 0.556921, 8.294984], [1.0, 1.224863, 11.58736], [1.0, -1.347803, -2.406051], [1.0, 1.196604, 4.951851], [1.0, 0.275221, 9.543647], [1.0, 0.470575, 9.332488], [1.0, -1.889567, 9.542662], [1.0, -1.527893, 12.150579], [1.0, -1.185247, 11.309318], [1.0, -0.445678, 3.297303], [1.0, 1.042222, 6.105155], [1.0, -0.618787, 10.320986], [1.0, 1.152083, 0.548467], [1.0, 0.828534, 2.676045], [1.0, -1.237728, 10.549033], [1.0, -0.683565, -2.166125], [1.0, 0.229456, 5.921938], [1.0, -0.959885, 11.555336], [1.0, 0.492911, 10.993324], [1.0, 0.184992, 8.721488], [1.0, -0.355715, 10.325976], [1.0, -0.397822, 8.058397], [1.0, 0.824839, 13.730343], [1.0, 1.507278, 5.027866], [1.0, 0.099671, 6.835839], [1.0, -0.344008, 10.717485], [1.0, 1.785928, 7.718645], [1.0, -0.918801, 11.560217], [1.0, -0.364009, 4.7473], [1.0, -0.841722, 4.119083], [1.0, 0.490426, 1.960539], [1.0, -0.007194, 9.075792], [1.0, 0.356107, 12.447863], [1.0, 0.342578, 12.281162], [1.0, -0.810823, -1.466018], [1.0, 2.530777, 6.476801], [1.0, 1.296683, 11.607559], [1.0, 0.475487, 12.040035], [1.0, -0.783277, 11.009725], [1.0, 0.074798, 11.02365], [1.0, -1.337472, 0.468339], [1.0, -0.102781, 13.763651], [1.0, -0.147324, 2.874846], [1.0, 0.518389, 9.887035], [1.0, 1.015399, 7.571882], [1.0, -1.658086, -0.027255], [1.0, 1.319944, 2.171228], [1.0, 2.056216, 5.019981], [1.0, -0.851633, 4.375691], [1.0, -1.510047, 6.061992], [1.0, -1.076637, -3.181888], [1.0, 1.821096, 10.28399], [1.0, 3.01015, 8.401766], [1.0, -1.099458, 1.688274], [1.0, -0.834872, -1.733869], [1.0, -0.846637, 3.849075], [1.0, 1.400102, 12.628781], [1.0, 1.752842, 5.468166], [1.0, 0.078557, 0.059736], [1.0, 0.089392, -0.7153], [1.0, 1.825662, 12.693808], [1.0, 0.197445, 9.744638], [1.0, 0.126117, 0.922311], [1.0, -0.679797, 1.22053], [1.0, 0.677983, 2.556666], [1.0, 0.761349, 10.693862], [1.0, -2.168791, 0.143632], [1.0, 1.38861, 9.341997], [1.0, 0.317029, 14.739025]]\r\nlabelMat:\r\n[0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d77d472817608-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d77d472817608-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d77d472817608-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d77d472817608-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d77d472817608-1\"><span class=\"crayon-v\">dataMat</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d77d472817608-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.017612</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.053064</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.395634</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.662541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.752157</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.53862</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.322371</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.152853</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.423363</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.054677</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.406704</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.067335</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.667394</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.741452</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.46015</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.866805</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.569411</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.548755</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.026632</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.427743</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.850433</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.920334</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.347183</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.1755</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.176813</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.16702</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.781871</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.097953</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.566606</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.749003</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.931635</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.589505</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.024205</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.151823</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.036453</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.690988</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.196949</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.444165</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.014459</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.754399</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.985298</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.230619</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.693453</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.55754</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.576525</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.778922</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.346811</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.67873</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.124484</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.672471</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.217916</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.597015</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.733928</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.098687</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.642001</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.618087</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.315985</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.523953</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.416614</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.619232</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.386323</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.989286</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.556921</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.294984</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.224863</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.58736</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.347803</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.406051</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.196604</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.951851</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.275221</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.543647</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.470575</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.332488</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.889567</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.542662</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.527893</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.150579</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.185247</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.309318</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.445678</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.297303</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.042222</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.105155</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.618787</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.320986</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.152083</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.548467</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.828534</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.676045</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.237728</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.549033</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.683565</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.166125</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.229456</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.921938</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.959885</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.555336</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.492911</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.993324</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.184992</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.721488</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.355715</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.325976</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.397822</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.058397</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.824839</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.730343</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.507278</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.027866</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.099671</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.835839</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.344008</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.717485</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.785928</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.718645</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.918801</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.560217</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.364009</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.7473</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.841722</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.119083</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.490426</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.960539</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.007194</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.075792</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.356107</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.447863</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.342578</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.281162</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.810823</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.466018</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.530777</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.476801</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.296683</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.607559</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.475487</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.040035</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.783277</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.009725</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.074798</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.02365</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.337472</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.468339</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.102781</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.763651</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.147324</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.874846</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.518389</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.887035</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.015399</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.571882</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.658086</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.027255</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.319944</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.171228</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.056216</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.019981</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.851633</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.375691</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.510047</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.061992</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.076637</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.181888</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.821096</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.28399</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.01015</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.401766</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.099458</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.688274</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.834872</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.733869</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.846637</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.849075</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.400102</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.628781</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.752842</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.468166</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.078557</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.059736</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.089392</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.7153</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.825662</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.693808</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.197445</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.744638</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.126117</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.922311</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.679797</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.22053</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.677983</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.556666</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.761349</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.693862</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.168791</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.143632</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.38861</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.341997</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.317029</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.739025</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d77d472817608-3\"><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d77d472817608-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0265 seconds] -->\r\n<p>样本数据<code>dataMat</code>的第一列，也就是我们的特征值<span id=\"MathJax-Element-6-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-26\" class=\"math\"><span id=\"MathJax-Span-27\" class=\"mrow\"><span id=\"MathJax-Span-28\" class=\"msubsup\"><span id=\"MathJax-Span-29\" class=\"mi\">X</span><span id=\"MathJax-Span-30\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>全部为1，这个问题我们之后在计算回归参数时需要注意理解。所有的样本数据一共100条，对应的分类结果也是100个。</p>\n<p><strong>那么，我们现在的问题是：</strong><br>\n<strong>我们要找到样本空间中的特征值与分类结果的关系。设计一个函数或者功能，实现在输入一组特征值后，能够根据样本空间特征值与分类结果的关系，自动为输入的数据进行分类，即得到结果要么是1，要么是0。</strong></p>\n<h2 id=\"title-2\">二、Sigmoid函数</h2>\n<p>为了解决上一节我们提到的问题，我们这里先介绍一下Sigmoid函数：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fm60lvcgxjj208p03cdfn.jpg\" width=\"313\" height=\"120\"></p>\n<p>这个函数有如下几个特征：</p>\n<ul>\n<li>当<span id=\"MathJax-Element-8-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-49\" class=\"math\"><span id=\"MathJax-Span-50\" class=\"mrow\"><span id=\"MathJax-Span-51\" class=\"mi\">z</span><span id=\"MathJax-Span-52\" class=\"mo\">=</span><span id=\"MathJax-Span-53\" class=\"mn\">0</span></span></span><span class=\"MJX_Assistive_MathML\">z=0</span></span>时，值为<span id=\"MathJax-Element-9-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-54\" class=\"math\"><span id=\"MathJax-Span-55\" class=\"mrow\"><span id=\"MathJax-Span-56\" class=\"mn\">0.5</span></span></span><span class=\"MJX_Assistive_MathML\">0.5</span></span></li>\n<li>当<span id=\"MathJax-Element-10-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-57\" class=\"math\"><span id=\"MathJax-Span-58\" class=\"mrow\"><span id=\"MathJax-Span-59\" class=\"mi\">z</span></span></span><span class=\"MJX_Assistive_MathML\">z</span></span>不断增大时，值将趋近于1</li>\n<li>当<span id=\"MathJax-Element-11-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-60\" class=\"math\"><span id=\"MathJax-Span-61\" class=\"mrow\"><span id=\"MathJax-Span-62\" class=\"mi\">z</span></span></span><span class=\"MJX_Assistive_MathML\">z</span></span>不断减小时，值将趋近于0</li>\n</ul>\n<p>我们来看一下函数的曲线图：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fm60ltmj50j20fu0ag0sv.jpg\" width=\"570\" height=\"376\"></p>\n<p>我们如果将样本空间的3个特征值<span id=\"MathJax-Element-12-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-63\" class=\"math\"><span id=\"MathJax-Span-64\" class=\"mrow\"><span id=\"MathJax-Span-65\" class=\"msubsup\"><span id=\"MathJax-Span-66\" class=\"mi\">X</span><span id=\"MathJax-Span-67\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>、<span id=\"MathJax-Element-13-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-68\" class=\"math\"><span id=\"MathJax-Span-69\" class=\"mrow\"><span id=\"MathJax-Span-70\" class=\"msubsup\"><span id=\"MathJax-Span-71\" class=\"mi\">X</span><span id=\"MathJax-Span-72\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-14-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-73\" class=\"math\"><span id=\"MathJax-Span-74\" class=\"mrow\"><span id=\"MathJax-Span-75\" class=\"msubsup\"><span id=\"MathJax-Span-76\" class=\"mi\">X</span><span id=\"MathJax-Span-77\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>的值代入到函数中，计算出一个结果。那么这个结果将是接近与我们的分类结果的（0到1之间的一个数值）。如果这个结果接近0那么我们就认为分类为0，如果结果接近1我们就认为分类为1。</p>\n<p>以什么方式代入到函数中呢？其实简单的相加就可以，因为<span id=\"MathJax-Element-15-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-78\" class=\"math\"><span id=\"MathJax-Span-79\" class=\"mrow\"><span id=\"MathJax-Span-80\" class=\"mi\">z</span></span></span><span class=\"MJX_Assistive_MathML\">z</span></span>不断增大或者减小时，函数的值就相应的趋近于1或者0。我们使<span id=\"MathJax-Element-16-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-81\" class=\"math\"><span id=\"MathJax-Span-82\" class=\"mrow\"><span id=\"MathJax-Span-83\" class=\"mi\">z</span><span id=\"MathJax-Span-84\" class=\"mo\">=</span><span id=\"MathJax-Span-85\" class=\"msubsup\"><span id=\"MathJax-Span-86\" class=\"mi\">x</span><span id=\"MathJax-Span-87\" class=\"mn\">0</span></span><span id=\"MathJax-Span-88\" class=\"mo\">+</span><span id=\"MathJax-Span-89\" class=\"msubsup\"><span id=\"MathJax-Span-90\" class=\"mi\">x</span><span id=\"MathJax-Span-91\" class=\"mn\">1</span></span><span id=\"MathJax-Span-92\" class=\"mo\">+</span><span id=\"MathJax-Span-93\" class=\"msubsup\"><span id=\"MathJax-Span-94\" class=\"mi\">x</span><span id=\"MathJax-Span-95\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">z=x0+x1+x2</span></span></p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fm60lvuesej2089027dfn.jpg\" width=\"297\" height=\"79\"></p>\n<p>但是实际的情况是我们的计算结果和实际的分类值，会有误差，甚至是完全不正确。为了矫正这个问题，我们为样本空间的3个特征值<span id=\"MathJax-Element-18-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-126\" class=\"math\"><span id=\"MathJax-Span-127\" class=\"mrow\"><span id=\"MathJax-Span-128\" class=\"msubsup\"><span id=\"MathJax-Span-129\" class=\"mi\">X</span><span id=\"MathJax-Span-130\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>、<span id=\"MathJax-Element-19-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-131\" class=\"math\"><span id=\"MathJax-Span-132\" class=\"mrow\"><span id=\"MathJax-Span-133\" class=\"msubsup\"><span id=\"MathJax-Span-134\" class=\"mi\">X</span><span id=\"MathJax-Span-135\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-20-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-136\" class=\"math\"><span id=\"MathJax-Span-137\" class=\"mrow\"><span id=\"MathJax-Span-138\" class=\"msubsup\"><span id=\"MathJax-Span-139\" class=\"mi\">X</span><span id=\"MathJax-Span-140\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>，一一定义一个回归系数<span id=\"MathJax-Element-21-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-141\" class=\"math\"><span id=\"MathJax-Span-142\" class=\"mrow\"><span id=\"MathJax-Span-143\" class=\"msubsup\"><span id=\"MathJax-Span-144\" class=\"mi\">w</span><span id=\"MathJax-Span-145\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">w0</span></span>、<span id=\"MathJax-Element-22-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-146\" class=\"math\"><span id=\"MathJax-Span-147\" class=\"mrow\"><span id=\"MathJax-Span-148\" class=\"msubsup\"><span id=\"MathJax-Span-149\" class=\"mi\">w</span><span id=\"MathJax-Span-150\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">w1</span></span>和<span id=\"MathJax-Element-23-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-151\" class=\"math\"><span id=\"MathJax-Span-152\" class=\"mrow\"><span id=\"MathJax-Span-153\" class=\"msubsup\"><span id=\"MathJax-Span-154\" class=\"mi\">w</span><span id=\"MathJax-Span-155\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">w2</span></span>，使这个误差减小。即使<span id=\"MathJax-Element-24-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-156\" class=\"math\"><span id=\"MathJax-Span-157\" class=\"mrow\"><span id=\"MathJax-Span-158\" class=\"mi\">z</span><span id=\"MathJax-Span-159\" class=\"mo\">=</span><span id=\"MathJax-Span-160\" class=\"msubsup\"><span id=\"MathJax-Span-161\" class=\"mi\">w</span><span id=\"MathJax-Span-162\" class=\"mn\">0</span></span><span id=\"MathJax-Span-163\" class=\"msubsup\"><span id=\"MathJax-Span-164\" class=\"mi\">x</span><span id=\"MathJax-Span-165\" class=\"mn\">0</span></span><span id=\"MathJax-Span-166\" class=\"mo\">+</span><span id=\"MathJax-Span-167\" class=\"msubsup\"><span id=\"MathJax-Span-168\" class=\"mi\">w</span><span id=\"MathJax-Span-169\" class=\"mn\">1</span></span><span id=\"MathJax-Span-170\" class=\"msubsup\"><span id=\"MathJax-Span-171\" class=\"mi\">x</span><span id=\"MathJax-Span-172\" class=\"mn\">1</span></span><span id=\"MathJax-Span-173\" class=\"mo\">+</span><span id=\"MathJax-Span-174\" class=\"msubsup\"><span id=\"MathJax-Span-175\" class=\"mi\">w</span><span id=\"MathJax-Span-176\" class=\"mn\">2</span></span><span id=\"MathJax-Span-177\" class=\"msubsup\"><span id=\"MathJax-Span-178\" class=\"mi\">x</span><span id=\"MathJax-Span-179\" class=\"mn\">2</span></span></span></span></span></p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lw5fe7j20a402ajr8.jpg\" width=\"364\" height=\"82\"></p>\n<p>其实不难想象，这组<span id=\"MathJax-Element-26-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-221\" class=\"math\"><span id=\"MathJax-Span-222\" class=\"mrow\"><span id=\"MathJax-Span-223\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>回归系数的值决定了我们计算结果的准确性，甚至是正确性。也就是说，这组<span id=\"MathJax-Element-27-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-224\" class=\"math\"><span id=\"MathJax-Span-225\" class=\"mrow\"><span id=\"MathJax-Span-226\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>的值反应了样本空间分类的规则。<br>\n那么，我们在输入一组样本之外的数据时，配合正确的<span id=\"MathJax-Element-28-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-227\" class=\"math\"><span id=\"MathJax-Span-228\" class=\"mrow\"><span id=\"MathJax-Span-229\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>回归系数，我们就能得到比较接近样本空间分类规则的分类结果。<br>\n问题又来了，我们怎么来得到这样一组<span id=\"MathJax-Element-29-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-230\" class=\"math\"><span id=\"MathJax-Span-231\" class=\"mrow\"><span id=\"MathJax-Span-232\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>回归系数呢？</p>\n<h2 id=\"title-3\">三、梯度上升法</h2>\n<p>梯度上升法，是在函数的梯度方向上，不断的迭代计算参数值，以找到一个最大的参数值。迭代公式如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fm60lwk7ihj208o01iglf.jpg\" width=\"312\" height=\"54\"></p>\n<p>其中，<span id=\"MathJax-Element-31-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-255\" class=\"math\"><span id=\"MathJax-Span-256\" class=\"mrow\"><span id=\"MathJax-Span-257\" class=\"mi\">α</span></span></span><span class=\"MJX_Assistive_MathML\">α</span></span>为步长，<span id=\"MathJax-Element-32-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-258\" class=\"math\"><span id=\"MathJax-Span-259\" class=\"mrow\"><span id=\"MathJax-Span-260\" class=\"mi\">Δ</span><span id=\"MathJax-Span-261\" class=\"mi\">σ</span><span id=\"MathJax-Span-262\" class=\"mo\">(</span><span id=\"MathJax-Span-263\" class=\"mi\">w</span><span id=\"MathJax-Span-264\" class=\"mo\">)</span></span></span><span class=\"MJX_Assistive_MathML\">Δσ(w)</span></span>为<span id=\"MathJax-Element-33-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-265\" class=\"math\"><span id=\"MathJax-Span-266\" class=\"mrow\"><span id=\"MathJax-Span-267\" class=\"mi\">σ</span><span id=\"MathJax-Span-268\" class=\"mo\">(</span><span id=\"MathJax-Span-269\" class=\"mi\">w</span><span id=\"MathJax-Span-270\" class=\"mo\">)</span></span></span><span class=\"MJX_Assistive_MathML\">σ(w)</span></span>函数梯度。关于梯度的推导请参考<a href=\"http://blog.csdn.net/taotaofu/article/details/52831965\">这里</a>。作者的数学能力有限，就不做说明了。<br>\n最后，我们可以得到梯度的计算公式：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fm60lwxeqdj20ae02c746.jpg\" width=\"374\" height=\"84\"></p>\n<p>那么，迭代公式如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fm60lx83osj20b502ca9y.jpg\" width=\"401\" height=\"84\"></p>\n<p>公式说明：</p>\n<ul>\n<li><span id=\"MathJax-Element-36-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-354\" class=\"math\"><span id=\"MathJax-Span-355\" class=\"mrow\"><span id=\"MathJax-Span-356\" class=\"msubsup\"><span id=\"MathJax-Span-357\" class=\"mi\">w</span><span id=\"MathJax-Span-358\" class=\"texatom\"><span id=\"MathJax-Span-359\" class=\"mrow\"><span id=\"MathJax-Span-360\" class=\"mi\">k</span><span id=\"MathJax-Span-361\" class=\"mo\">+</span><span id=\"MathJax-Span-362\" class=\"mn\">1</span></span></span></span></span></span><span class=\"MJX_Assistive_MathML\">wk+1</span></span>为本次迭代<span id=\"MathJax-Element-37-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-363\" class=\"math\"><span id=\"MathJax-Span-364\" class=\"mrow\"><span id=\"MathJax-Span-365\" class=\"mi\">X</span></span></span><span class=\"MJX_Assistive_MathML\">X</span></span>特征项的回归系数结果</li>\n<li><span id=\"MathJax-Element-38-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-366\" class=\"math\"><span id=\"MathJax-Span-367\" class=\"mrow\"><span id=\"MathJax-Span-368\" class=\"msubsup\"><span id=\"MathJax-Span-369\" class=\"mi\">w</span><span id=\"MathJax-Span-370\" class=\"mi\">k</span></span></span></span><span class=\"MJX_Assistive_MathML\">wk</span></span>为上一次迭代<span id=\"MathJax-Element-39-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-371\" class=\"math\"><span id=\"MathJax-Span-372\" class=\"mrow\"><span id=\"MathJax-Span-373\" class=\"mi\">X</span></span></span><span class=\"MJX_Assistive_MathML\">X</span></span>特征项的回归系数结果</li>\n<li><span id=\"MathJax-Element-40-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-374\" class=\"math\"><span id=\"MathJax-Span-375\" class=\"mrow\"><span id=\"MathJax-Span-376\" class=\"mi\">α</span></span></span><span class=\"MJX_Assistive_MathML\">α</span></span>为每次迭代向梯度方向移动的步长</li>\n<li><span id=\"MathJax-Element-41-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-377\" class=\"math\"><span id=\"MathJax-Span-378\" class=\"mrow\"><span id=\"MathJax-Span-379\" class=\"msubsup\"><span id=\"MathJax-Span-380\" class=\"mi\">x</span><span id=\"MathJax-Span-381\" class=\"texatom\"><span id=\"MathJax-Span-382\" class=\"mrow\"><span id=\"MathJax-Span-383\" class=\"mi\">i</span></span></span></span></span></span><span class=\"MJX_Assistive_MathML\">xi</span></span>为<span id=\"MathJax-Element-42-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-384\" class=\"math\"><span id=\"MathJax-Span-385\" class=\"mrow\"><span id=\"MathJax-Span-386\" class=\"mi\">X</span></span></span><span class=\"MJX_Assistive_MathML\">X</span></span>特征项中第i个元素</li>\n<li><span id=\"MathJax-Element-43-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-387\" class=\"math\"><span id=\"MathJax-Span-388\" class=\"mrow\"><span id=\"MathJax-Span-389\" class=\"msubsup\"><span id=\"MathJax-Span-390\" class=\"mi\">y</span><span id=\"MathJax-Span-391\" class=\"mi\">i</span></span></span></span><span class=\"MJX_Assistive_MathML\">yi</span></span>是样本中第i条记录的分类样本结果</li>\n<li><span id=\"MathJax-Element-44-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-392\" class=\"math\"><span id=\"MathJax-Span-393\" class=\"mrow\"><span id=\"MathJax-Span-394\" class=\"mi\">σ</span><span id=\"MathJax-Span-395\" class=\"mo\">(</span><span id=\"MathJax-Span-396\" class=\"msubsup\"><span id=\"MathJax-Span-397\" class=\"mi\">x</span><span id=\"MathJax-Span-398\" class=\"mi\">i</span></span><span id=\"MathJax-Span-399\" class=\"mo\">,</span><span id=\"MathJax-Span-400\" class=\"msubsup\"><span id=\"MathJax-Span-401\" class=\"mi\">w</span><span id=\"MathJax-Span-402\" class=\"mi\">k</span></span><span id=\"MathJax-Span-403\" class=\"mo\">)</span></span></span><span class=\"MJX_Assistive_MathML\">σ(xi,wk)</span></span>是样本中第i条记录，使用sigmoid函数和<span id=\"MathJax-Element-45-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-404\" class=\"math\"><span id=\"MathJax-Span-405\" class=\"mrow\"><span id=\"MathJax-Span-406\" class=\"msubsup\"><span id=\"MathJax-Span-407\" class=\"mi\">w</span><span id=\"MathJax-Span-408\" class=\"mi\">k</span></span></span></span><span class=\"MJX_Assistive_MathML\">wk</span></span>作为回归系数计算的分类结果</li>\n<li><span id=\"MathJax-Element-46-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-409\" class=\"math\"><span id=\"MathJax-Span-410\" class=\"mrow\"><span id=\"MathJax-Span-411\" class=\"mo\">[</span><span id=\"MathJax-Span-412\" class=\"msubsup\"><span id=\"MathJax-Span-413\" class=\"mi\">y</span><span id=\"MathJax-Span-414\" class=\"mi\">i</span></span><span id=\"MathJax-Span-415\" class=\"mo\">−</span><span id=\"MathJax-Span-416\" class=\"mi\">σ</span><span id=\"MathJax-Span-417\" class=\"mo\">(</span><span id=\"MathJax-Span-418\" class=\"msubsup\"><span id=\"MathJax-Span-419\" class=\"mi\">x</span><span id=\"MathJax-Span-420\" class=\"mi\">i</span></span><span id=\"MathJax-Span-421\" class=\"mo\">,</span><span id=\"MathJax-Span-422\" class=\"msubsup\"><span id=\"MathJax-Span-423\" class=\"mi\">w</span><span id=\"MathJax-Span-424\" class=\"mi\">k</span></span><span id=\"MathJax-Span-425\" class=\"mo\">)</span><span id=\"MathJax-Span-426\" class=\"mo\">]</span></span></span><span class=\"MJX_Assistive_MathML\">[yi−σ(xi,wk)]</span></span>是样本第i条记录对应的分类结果值,与sigmoid函数使用<span id=\"MathJax-Element-47-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-427\" class=\"math\"><span id=\"MathJax-Span-428\" class=\"mrow\"><span id=\"MathJax-Span-429\" class=\"msubsup\"><span id=\"MathJax-Span-430\" class=\"mi\">w</span><span id=\"MathJax-Span-431\" class=\"mi\">k</span></span></span></span><span class=\"MJX_Assistive_MathML\">wk</span></span>作为回归系数计算的分类结果值的误差值。</li>\n</ul>\n<p>现在，我们有了计算回归系数的公式，下面我们在logRegres.py文件中来实现一个函数，实现计算样本空间的回归系数，并打印一下我们的结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d7ab902414006\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef gradAscent(dataMatIn, classLabels):\r\n    dataMatrix = mat(dataMatIn)             #100行3列\r\n    #print dataMatrix\r\n    labelMat = mat(classLabels).transpose() #100行1列\r\n    #print 'labelMat:\\n',labelMat\r\n    print 'labelMat 的形状:rowNum=',shape(labelMat)[0],'colNum=',shape(labelMat)[1]\r\n    rowNum,colNum = shape(dataMatrix)\r\n    alpha = 0.001\r\n    maxCycles = 500\r\n    weights = ones((colNum,1))  #3行1列\r\n    #print shape(dataMatrix)\r\n    #print shape(weights)\r\n    #print shape(labelMat)\r\n    for k in range(maxCycles):              #heavy on matrix operations\r\n        h = sigmoid(dataMatrix*weights)     #100行1列\r\n        #print h\r\n        error = (labelMat - h)              #vector subtraction\r\n        weights = weights + alpha * dataMatrix.transpose()* error #3行1列\r\n    return weights\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    #weights=gradAscent(dataMat,labelMat)\r\n    #print 'dataMat:\\n',dataMat\r\n    #print 'labelMat:\\n',labelMat\r\n    print weights</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7ab902414006-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7ab902414006-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">gradAscent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatIn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatIn</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\">#100行3列</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print dataMatrix</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#100行1列</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'labelMat 的形状:rowNum='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'colNum='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">rowNum</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">colNum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.001</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">maxCycles</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">500</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ones</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">colNum</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\">#3行1列</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print shape(dataMatrix)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print shape(weights)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print shape(labelMat)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">maxCycles</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">              </span><span class=\"crayon-p\">#heavy on matrix operations</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">dataMatrix*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-p\">#100行1列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\">#print h</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-p\">#vector subtraction</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">alpha *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#3行1列</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">weights</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-20\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=gradAscent(dataMat,labelMat)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'dataMat:\\n',dataMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7ab902414006-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7ab902414006-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print </span><span class=\"crayon-v\">weights</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p>打印结果:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d7b3539444505\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n回归系数：\r\n[[ 4.12414349]\r\n [ 0.48007329]\r\n [-0.6168482 ]]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b3539444505-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b3539444505-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b3539444505-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b3539444505-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b3539444505-1\">回归系数：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b3539444505-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.12414349</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b3539444505-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.48007329</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b3539444505-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.6168482</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>为了验证我们计算的回顾系数的准确性，我们观察一下样本空间的散点图和回归系数的拟合曲线。我们以<span id=\"MathJax-Element-48-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-432\" class=\"math\"><span id=\"MathJax-Span-433\" class=\"mrow\"><span id=\"MathJax-Span-434\" class=\"mi\">z</span><span id=\"MathJax-Span-435\" class=\"mo\">(</span><span id=\"MathJax-Span-436\" class=\"msubsup\"><span id=\"MathJax-Span-437\" class=\"mi\">x</span><span id=\"MathJax-Span-438\" class=\"mn\">1</span></span><span id=\"MathJax-Span-439\" class=\"mo\">,</span><span id=\"MathJax-Span-440\" class=\"msubsup\"><span id=\"MathJax-Span-441\" class=\"mi\">x</span><span id=\"MathJax-Span-442\" class=\"mn\">2</span></span><span id=\"MathJax-Span-443\" class=\"mo\">)</span><span id=\"MathJax-Span-444\" class=\"mo\">=</span><span id=\"MathJax-Span-445\" class=\"msubsup\"><span id=\"MathJax-Span-446\" class=\"mi\">w</span><span id=\"MathJax-Span-447\" class=\"mn\">0</span></span><span id=\"MathJax-Span-448\" class=\"mo\">+</span><span id=\"MathJax-Span-449\" class=\"msubsup\"><span id=\"MathJax-Span-450\" class=\"mi\">w</span><span id=\"MathJax-Span-451\" class=\"mn\">1</span></span><span id=\"MathJax-Span-452\" class=\"msubsup\"><span id=\"MathJax-Span-453\" class=\"mi\">x</span><span id=\"MathJax-Span-454\" class=\"mn\">1</span></span><span id=\"MathJax-Span-455\" class=\"mo\">+</span><span id=\"MathJax-Span-456\" class=\"msubsup\"><span id=\"MathJax-Span-457\" class=\"mi\">w</span><span id=\"MathJax-Span-458\" class=\"mn\">2</span></span><span id=\"MathJax-Span-459\" class=\"msubsup\"><span id=\"MathJax-Span-460\" class=\"mi\">x</span><span id=\"MathJax-Span-461\" class=\"mn\">2</span></span></span></span></span>作为我们的拟合函数，在坐标系中画出它的拟合曲线。以样本空间中<span id=\"MathJax-Element-49-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-462\" class=\"math\"><span id=\"MathJax-Span-463\" class=\"mrow\"><span id=\"MathJax-Span-464\" class=\"msubsup\"><span id=\"MathJax-Span-465\" class=\"mi\">X</span><span id=\"MathJax-Span-466\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-50-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-467\" class=\"math\"><span id=\"MathJax-Span-468\" class=\"mrow\"><span id=\"MathJax-Span-469\" class=\"msubsup\"><span id=\"MathJax-Span-470\" class=\"mi\">X</span><span id=\"MathJax-Span-471\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>的值作为横坐标和纵坐标，画出样本空间的散点。代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d7b9081610457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef plotBestFit(weights):\r\n    import matplotlib.pyplot as plt\r\n    dataMat,labelMat=loadDataSet()\r\n    dataArr = array(dataMat)\r\n    n = shape(dataArr)[0] \r\n    xcord1 = []; ycord1 = []\r\n    xcord2 = []; ycord2 = []\r\n    for i in range(n):\r\n        if int(labelMat[i])== 1:\r\n            xcord1.append(dataArr[i,1]); ycord1.append(dataArr[i,2])\r\n        else:\r\n            xcord2.append(dataArr[i,1]); ycord2.append(dataArr[i,2])\r\n    fig = plt.figure()\r\n    ax = fig.add_subplot(111)\r\n    ax.scatter(xcord1, ycord1, s=30, c='red', marker='s')\r\n    ax.scatter(xcord2, ycord2, s=30, c='green')\r\n    x = arange(-3.0, 3.0, 0.1)\r\n    y = (-weights[0]-weights[1]*x)/weights[2]\r\n    y = y.transpose()\r\n    ax.plot(x, y)\r\n    plt.xlabel('X1'); plt.ylabel('X2');\r\n    plt.show()\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    weights=gradAscent(dataMat,labelMat)\r\n    print '回归系数：\\n',weights\r\n    plotBestFit(weights)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7b9081610457-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7b9081610457-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">plotBestFit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">xcord1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">xcord2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">xcord1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">xcord2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">fig</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">figure</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fig</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add_subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">111</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xcord1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'red'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">marker</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'s'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xcord2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'green'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xlabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'X1'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ylabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'X2'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-23\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">gradAscent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7b9081610457-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'回归系数：\\n'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">weights</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7b9081610457-27\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">plotBestFit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p>运行后，我们得到如下图片：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lu2rxoj20hs0dcdg0.jpg\" width=\"640\" height=\"480\"></p>\n<p>通过我们的观察，我们的这个回归系数的算法还是比较准确的，拟合曲线将样本数据分成两部分，并且符合样本的分类规则。</p>\n<p>接下来，我们来实现一个分类器，并测试这个分类器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d7bf456193652\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef classify0(targetData,weights):\r\n    v = sigmoid(targetData*weights)\r\n    if v&gt;0.5:\r\n        return 1.0\r\n    else :\r\n        return 0\r\ndef testClassify0():\r\n    dataMat,labelMat=loadDataSet()\r\n    examPercent=0.7\r\n    row,col=shape(dataMat)\r\n    exam=[]\r\n    exam_label=[]\r\n    test=[]\r\n    test_label=[]\r\n    for i in range(row):\r\n        if i &lt; row*examPercent:\r\n            exam.append(dataMat[i])\r\n            exam_label.append(labelMat[i])\r\n        else:\r\n            test.append(dataMat[i])\r\n            test_label.append(labelMat[i])\r\n    weights=gradAscent(exam,exam_label)\r\n    errCnt=0\r\n    trow,tcol=shape(test)\r\n    for i in range(trow):\r\n        v=int(classify0(test[i],weights))\r\n        if v != int(test_label[i]):\r\n            errCnt += 1\r\n            print '计算值：',v,' 原值',test_label[i]\r\n    print '错误率：',errCnt/trow\r\nif __name__=='__main__':\r\n    #dataMat,labelMat=loadDataSet()\r\n    #weights=gradAscent(dataMat,labelMat)\r\n    ##print 'dataMat:\\n',dataMat\r\n    ##print 'labelMat:\\n',labelMat\r\n    #print '回归系数：\\n',weights\r\n    #plotBestFit(weights)\r\n    testClassify0()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7bf456193652-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7bf456193652-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">classify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">targetData</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">targetData*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-7\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">testClassify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">examPercent</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">col</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">exam</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">exam_label</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">test_label</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">row*</span><span class=\"crayon-v\">examPercent</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">exam</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">exam_label</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">test_label</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">gradAscent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">exam</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">exam_label</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">errCnt</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">trow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">tcol</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">trow</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">v</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">classify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test_label</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">errCnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'计算值：'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">' 原值'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">test_label</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'错误率：'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">errCnt</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">trow</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-31\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#dataMat,labelMat=loadDataSet()</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=gradAscent(dataMat,labelMat)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">##print 'dataMat:\\n',dataMat</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">##print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print '回归系数：\\n',weights</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7bf456193652-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#plotBestFit(weights)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7bf456193652-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">testClassify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n<p>分类器的实现很简单。我们使用之前的样本数据中的70条数据作为我们测试的样本数据，计算出回归系数。然后用分类器对剩下的30条记录进行分类，然后将结果和样本数据进行对比。最后打印出错误率。我们可以看到，错误率是0，近乎完美！我们可以修改测试样本在原样本空间的比例多测试几遍。那么，结论是我们的算法的准确率还不错！</p>\n<p>那么，到这里问题就解决了吗？好像还差一点什么。我们来仔细研究一下我们计算回归系数的方法，不难发现，这个过程中我们用样本数据组成的矩阵进行了矩阵乘法。也就是说，为了计算回归系数，我们遍历了整个样本数据。</p>\n<p>我们的问题又来了，我们例子中的样本数据只有100条，如果处理成千上万的样本数据，我们的计算回归系数的函数的计算复杂度会直线上升。下面我们来看看如何优化这个算法。</p>\n<h2 id=\"title-4\">四、优化梯度上升算法——随机梯度上升法</h2>\n<p>我们在理解了回归系数迭代计算的公式</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lxkhvdj20ba02f746.jpg\" width=\"406\" height=\"87\"><br>\n和我们实现的程序之后。我们将计算回归系数的方法进行如下改进：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d7c4365146802\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef stocGradAscent0(dataMatrix, classLabels):\r\n    m,n = shape(dataMatrix)\r\n    alpha = 0.01\r\n    weights = ones((n,1))   #initialize to all ones\r\n    for i in range(m):\r\n        h = sigmoid(sum(dataMatrix[i]*weights))\r\n        error = classLabels[i] - h\r\n        weights = weights + alpha * error * mat(dataMatrix[i]).transpose()\r\n    return weights</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c4365146802-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c4365146802-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c4365146802-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c4365146802-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c4365146802-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c4365146802-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c4365146802-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c4365146802-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c4365146802-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c4365146802-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">stocGradAscent0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c4365146802-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c4365146802-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c4365146802-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ones</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-p\">#initialize to all ones</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c4365146802-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c4365146802-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c4365146802-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c4365146802-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">alpha *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">error *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c4365146802-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>每一次迭代计算回归系数时，只使用样本空间中的一个样本点来计算。我们通过程序生成一个样本散点和拟合曲线的图来看一下这个算法的准确程度：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fm60luh3ndj20hs0dcdg5.jpg\" width=\"640\" height=\"480\"></p>\n<p>不难看出跟之前的算法相差还是比较大的。原因是之前的算法是通过500次迭代算出的结果，后者只经过了100次迭代。那么这里要说明的问题是，回归系数在随着迭代次数的增加是趋于收敛的，并且收敛的过程是存在波动的。说白了，就是迭代的次数越多，越接近我们想要的那个值，但是由于样本的数据是非线性的，这个过程也会有一定的误差。具体的回归系数和迭代次数的关系大家可以参考一些教材，例如《机器学习实战》中的描述，这里就不做详细介绍了。<br>\n我们这里只介绍一下如何改进我们的算法，使我们的算法能够快速的收敛并减小波动。方法如下：</p>\n<ul>\n<li>每次迭代随机的抽取一个样本点来计算回归向量</li>\n<li>迭代的步长随着迭代次数增大而不断减少，但是永远不等于0</li>\n</ul>\n<p>改进代码，并打印出拟合曲线和样本散点图：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a294a8a7d7c8271326409\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef stocGradAscent1(dataMatrix, classLabels, numIter=150):\r\n    m,n = shape(dataMatrix)\r\n    weights = ones((n,1))   #initialize to all ones\r\n    for j in range(numIter):\r\n        dataIndex = range(m)\r\n        for i in range(m):\r\n            alpha = 4/(1.0+j+i)+0.0001    #apha decreases with iteration, does not \r\n            randIndex = int(random.uniform(0,len(dataIndex)))#go to 0 because of the constant\r\n            h = sigmoid(sum(dataMatrix[randIndex]*weights))\r\n            error = classLabels[randIndex] - h\r\n            weights = weights + alpha * error * mat(dataMatrix[randIndex]).transpose()\r\n            del(dataIndex[randIndex])\r\n    return weights\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    #weights=stocGradAscent0(dataMat,labelMat)\r\n    weights=stocGradAscent1(dataMat,labelMat)\r\n    #weights=gradAscent(dataMat,labelMat)\r\n    #print 'dataMat:\\n',dataMat\r\n    #print 'labelMat:\\n',labelMat\r\n    #print '回归系数：\\n',weights\r\n    plotBestFit(weights)\r\n    #testClassify0()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a294a8a7d7c8271326409-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a294a8a7d7c8271326409-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">stocGradAscent1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numIter</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">150</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ones</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-p\">#initialize to all ones</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numIter</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0.0001</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#apha decreases with iteration, does not </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">uniform</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataIndex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-p\">#go to 0 because of the constant</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">alpha *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">error *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">del</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataIndex</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">weights</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-14\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=stocGradAscent0(dataMat,labelMat)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">stocGradAscent1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=gradAscent(dataMat,labelMat)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'dataMat:\\n',dataMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print '回归系数：\\n',weights</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a294a8a7d7c8271326409-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">plotBestFit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a294a8a7d7c8271326409-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#testClassify0()</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>默认是150迭代的样本散点图和拟合曲线图：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lutip0j20hs0dcjrk.jpg\" width=\"640\" height=\"480\"></p>\n<p>不难看出准确程度与第一个算法很接近了！</p>\n<h2 id=\"title-5\">五、总结</h2>\n<p>Logistic回归算法主要是利用了Sgimoid函数来为数据分类，分类的准确的关键取决于从样本空间中计算出的回归系数。我们使用梯度上升法来计算回归系数，并采用随机梯度上升法来改进了算法的性能。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113182\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113182votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113182\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": "IT技术,Logistic回归算法,机器学习", "front_image_path": "full/eadb28355fab57e9672e5c965147ef4caca04ac4.jpg"}
